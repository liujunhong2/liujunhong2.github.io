<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>cycle</title>
    <url>/cycle.html</url>
    <content><![CDATA[<p>éª‘è¡Œå°è®°</p>
<span id="more"></span>

<h1 id="é“è…šè¡Œ"><a href="#é“è…šè¡Œ" class="headerlink" title="é“è…šè¡Œ"></a>é“è…šè¡Œ</h1><h2 id="å·²å¤‡éª‘è¡Œè£…å¤‡"><a href="#å·²å¤‡éª‘è¡Œè£…å¤‡" class="headerlink" title="å·²å¤‡éª‘è¡Œè£…å¤‡"></a>å·²å¤‡éª‘è¡Œè£…å¤‡</h2><ol>
<li>è½¦</li>
</ol>
<p>å–œå¾·ç››RC200 <span class="price" data-price="1499"> 1499 ï¿¥</span></p>
<p><img src="/cycle/init1.png" alt="init1"></p>
<ol start="2">
<li>æŠ¤ç›®é•œï¼š</li>
</ol>
<p>åŒ¹å…‹æ—¥å¸¸ <span class="price" data-price="39"> 39 ï¿¥</span></p>
<ol start="3">
<li>æ‰‹æœºæ”¯æ¶</li>
</ol>
<p>ROCKBROS <span class="price" data-price="29"> 29 ï¿¥</span></p>
<ol start="4">
<li>å¤´ç›”</li>
</ol>
<p>GUB M5 Mipséª‘è¡Œå¤´ç›” <span class="price" data-price="239"> 239 ï¿¥</span></p>
<ol start="5">
<li>æ‰‹å¥—</li>
</ol>
<p>VEIDOORN åŠæŒ‡ <span class="price" data-price="39"> 39 ï¿¥</span></p>
<ol start="6">
<li>æ°´å£¶ + æ°´å£¶æ¶</li>
</ol>
<p>ROCKBROS <span class="price" data-price="35">&#96;35ï¿¥</span></p>
<p>é“‚æœ—å°¼æ°´å£¶ <span class="price" data-price="23"> 23 ï¿¥</span></p>
<ol start="7">
<li>åå«</li>
</ol>
<p>ROCKBROS <span class="price" data-price="39"> 39 ï¿¥ï¼ˆnot commendedï¼‰</span></p>
<ol start="8">
<li>å°¾ç¯</li>
</ol>
<p>ç¾åˆ©è¾¾æ™ºèƒ½æ„Ÿåº”åˆ¹è½¦ç¯ <span class="price" data-price="30"> 30 ï¿¥</span></p>
<ol start="9">
<li>ç”µè§£è´¨</li>
</ol>
<p>è¯ºç‰¹å…°å¾·ç”µè§£è´¨ <span class="price" data-price="25"> 25 ï¿¥</span></p>
<hr>
<blockquote>
<p><strong>æ€»ä»·</strong>:  <span id="total-price">è®¡ç®—ä¸­â€¦</span></p>
</blockquote>
<h2 id="æ€»è¡Œç¨‹"><a href="#æ€»è¡Œç¨‹" class="headerlink" title="æ€»è¡Œç¨‹"></a>æ€»è¡Œç¨‹</h2><p>2025-03-01ä¹‹å‰ <span class="distance" data-distance="147"> 147 km</span></p>
<p>2025-03-01 <span class="distance" data-distance="150"> 150 km<br><img src="/cycle/lvdao1.png" alt="lvdao1"></span></p>
<p>2025-03-11 <span class="distance" data-distance="40"> 40 km<br><img src="/cycle/shouan1.jpg" alt="shouan1"></span></p>
<p>2025-03-15 <span class="distance" data-distance="13"> 13 km</span></p>
<p>2025-03-18 <span class="distance" data-distance="40"> 40 km</span></p>
<!-- ![shouan2](cycle/shouan2.jpg) -->

<p>2025-03-25 <span class="distance" data-distance="40"> 40 km</span></p>
<!-- ![shouan3](cycle/shouan3.jpg) -->

<p>2025-04-02 <span class="distance" data-distance="40"> 40 km</span></p>
<!-- ![shouan4](cycle/shouan4.jpg) -->

<p>2025-04-08 <span class="distance" data-distance="40"> 40 km</span></p>
<!-- ![shouan5](cycle/shouan5.jpg) -->

<p>2025-04-15 <span class="distance" data-distance="40"> 40 km</span></p>
<!-- ![shouan6](cycle/shouan6.jpg) -->

<p>2025-04-22 <span class="distance" data-distance="40"> 40 km</span></p>
<!-- ![shouan7](cycle/shouan7.jpg) -->

<p>2025-05-24 <span class="distance" data-distance="40"> 40 km<br>ç¬¬ä¸€æ¬¡å¤œéª‘ï¼Œæ²¡æœ‰å‰ç¯åªæœ‰å°¾ç¯ï¼Œéª‘çš„è¿˜æ˜¯ä¹¡é•‡è·¯ï¼Œä¼¸æ‰‹ä¸è§äº”æŒ‡çš„æˆ‘å®Œæˆäº†pb<br><img src="/cycle/shouan8.jpg" alt="shouan8"></span></p>
<p>2025-05-27 <span class="distance" data-distance="40"> 40 km</span></p>
<!-- ![shouan9](cycle/shouan9.jpg)
å’•å™œå’•å™œç‰›è‚‰é¢
<div style="text-align: center;">
  <video style="max-width: 90%;" controls>
    <source src="cycle/beef2.mp4" type="video/mp4">
    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ video æ ‡ç­¾ã€‚
  </video>
</div> -->

<!-- ![beefnoodle1](cycle/beefnoodle1.png) -->

<p>2025-05-29 <span class="distance" data-distance="40"> 40 km</span></p>
<!-- ![shouan10](cycle/shouan10.jpg) -->

<p>2025-05-30 <span class="distance" data-distance="40"> 40 km</span></p>
<!-- ![shouan11](cycle/shouan11.jpg) -->

<p>2025-06-05 <span class="distance" data-distance="50"> 50 km<br>è§£é”æ–°è·¯çº¿ï¼šåŒ—æ—</span></p>
<!-- ![shouan12_2](cycle/shouan12_2.png) -->

<p><img src="/cycle/shouan12_3.png" alt="shouan12_3"><br><img src="/cycle/shouan12_1.png" alt="shouan12_1"></p>
<p>2025-06-25 <span class="distance" data-distance="40"> 40 km</span></p>
<p>è§£æ”¾çš„æœŸæœ«ï¼Œä¹…è¿çš„éª‘è¡Œ</p>
<!-- ![shouan13](cycle/shouan13.png) -->

<p>2025-06-28 <span class="distance" data-distance="40"> 40 km</span></p>
<p>æœ€ç´¯çš„ä¸€é›†ï¼Œæ„Ÿè§‰æœŸæœ«çŠ¶æ€æ²¡æ¢å¤è¿‡æ¥</p>
<!-- ![shouan14](cycle/shouan14.png) -->

<p>2025-07-07 <span class="distance" data-distance="25"> 25 km</span></p>
<p>å›å®¶äº†ï¼Œç»•åŸ</p>
<p><img src="/cycle/dianjiang1.png" alt="dianjiang1"></p>
<p>2025-07-15 <span class="distance" data-distance="20"> 20 km</span></p>
<p>2025-07-17 <span class="distance" data-distance="20"> 20 km</span></p>
<blockquote>
<p><strong>æ€»è¡Œç¨‹</strong>: <span id="total-distance"> è®¡ç®—ä¸­â€¦</span></p>
</blockquote>
<h2 id="è½¦"><a href="#è½¦" class="headerlink" title="è½¦"></a>è½¦</h2><p>2025-04-21 ç¬¬ä¸€æ¬¡æ‰èƒï¼Œæ‰åˆ°è½å¶é‡Œç”Ÿå‘½çš„ä½™éŸµäº†ğŸ”¥<br><img src="/cycle/cy1.jpg" alt="2"></p>
<p>2025-06-29 ç¬¬ä¸€æ¬¡æ‹†è½¦å¹¶è£…è½¦ï¼Œä¸€å®šè¦ç»å¸¸æ¾åŠ¨ä¸€äº›å…³é”®éƒ¨ä½çš„èºä¸ï¼Œä¸ç„¶ç”Ÿé”ˆäº†ä¼šå¡æ­»ï¼Œæ‹†ä¸‹æ¥çš„å‰è½®è¦æ”¾åœ¨é£ç›˜çš„å¦ä¸€ä¾§ï¼Œè½®è½´å·®ä¸å¤šå¯¹å‡†æ”¾ç«–æ¯æ¶çš„åœ°æ–¹ã€‚<br><img src="/cycle/offcar1.png" alt="offcar"></p>
<script>
document.addEventListener("DOMContentLoaded", function () {
    let totalPrice = 0;
    document.querySelectorAll(".price").forEach(item => {
        totalPrice += parseFloat(item.getAttribute("data-price"));
    });
    document.getElementById("total-price").innerText = totalPrice.toFixed(2) + " ï¿¥";

    let totalDistance = 0;
    document.querySelectorAll(".distance").forEach(item => {
        totalDistance += parseFloat(item.getAttribute("data-distance"));
    });
    document.getElementById("total-distance").innerText = totalDistance + " km";
});
</script>
]]></content>
      <categories>
        <category>Daily</category>
      </categories>
      <tags>
        <tag>bike</tag>
      </tags>
  </entry>
  <entry>
    <title>Git better</title>
    <url>/learngit.html</url>
    <content><![CDATA[<p>Gitè‡ªç”¨æŒ‡ä»¤</p>
<span id="more"></span>
<h1 id="Gitå¸¸ç”¨æŒ‡ä»¤"><a href="#Gitå¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="Gitå¸¸ç”¨æŒ‡ä»¤"></a>Gitå¸¸ç”¨æŒ‡ä»¤</h1><ul>
<li>è‡ªæŠ¥å®¶é—¨</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global user.name &quot;Your Name&quot;</span><br><span class="line">git config --global user.email &quot;email@example.com&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>æŸ¥è¯¢å®¶é—¨</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config user.name</span><br><span class="line">git config user.email</span><br></pre></td></tr></table></figure>
<!--more-->
<hr>
<p>åˆ›å»ºSSHè¿æ¥</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># åœ¨æœ¬åœ°ç”Ÿæˆå¯†é’¥å’Œå…¬é’¥</span><br><span class="line">ssh-keygen -t rsa -C &quot;xxx@xxx.com&quot;</span><br><span class="line"></span><br><span class="line">è·å–å…¬é’¥ï¼ˆid_rsa.pubï¼‰ååœ¨Githubä¸Šåˆ›å»ºSSHKey</span><br><span class="line"></span><br><span class="line">éªŒè¯æ˜¯å¦æˆåŠŸ</span><br><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li>pwd ç”¨äºæ˜¾ç¤ºå½“å‰ç›®å½•</li>
</ul>
<p><code>$ pwd</code></p>
<hr>
<ul>
<li>init æŠŠå½“å‰ç›®å½•å˜æˆGitå¯ä»¥ç®¡ç†çš„ä»“åº“</li>
</ul>
<p><code>$ git init</code></p>
<hr>
<ul>
<li>la -ah ç”¨äºæŸ¥çœ‹éšè—çš„.gitç›®å½•</li>
</ul>
<p><code>$ ls -ah</code></p>
<hr>
<ul>
<li>add æŠŠæ–‡ä»¶æ·»åŠ åˆ°ä»“åº“</li>
</ul>
<p><code>$ git add &lt;file&gt;</code></p>
<hr>
<ul>
<li>commit æŠŠæ–‡ä»¶æäº¤åˆ°ä»“åº“</li>
</ul>
<p><code>$ git commit -m &lt;message&gt;</code></p>
<hr>
<ul>
<li>status æŸ¥çœ‹åº“çŠ¶æ€</li>
</ul>
<p><code>$ git status</code></p>
<hr>
<ul>
<li>dif æŸ¥çœ‹ä¿®æ”¹å†…å®¹</li>
</ul>
<p><code>$ git diff &lt;file&gt;</code></p>
<hr>
<ul>
<li>log æŸ¥çœ‹å†å²è®°å½•</li>
</ul>
<p><code>$ git log</code><br><code>$ git log --pretty=oneline</code></p>
<ul>
<li>reflog æŸ¥çœ‹æ¯ä¸€æ¬¡å‘½ä»¤</li>
</ul>
<p><code>$ git reflog</code></p>
<hr>
<ul>
<li>reset ç‰ˆæœ¬å›é€€</li>
</ul>
<p>â€“hardä¼šå›é€€åˆ°ä¸Šä¸ªç‰ˆæœ¬çš„å·²æäº¤çŠ¶æ€ï¼Œè€Œâ€“softä¼šå›é€€åˆ°ä¸Šä¸ªç‰ˆæœ¬çš„æœªæäº¤çŠ¶æ€ï¼Œâ€“mixedä¼šå›é€€åˆ°ä¸Šä¸ªç‰ˆæœ¬å·²æ·»åŠ ä½†æœªæäº¤çš„çŠ¶æ€.</p>
<p><code>$ git reset --hard HEAD~&lt;num&gt;</code><br><code>$ git reset --hard &lt;version&gt;</code></p>
<hr>
<ul>
<li>cat æŸ¥çœ‹å†…å®¹</li>
</ul>
<p><code>$ cat &lt;file&gt;</code></p>
<hr>
<ul>
<li>æ’¤é”€å·¥ä½œåŒºä¿®æ”¹</li>
</ul>
<p><code>$ git checkout -- &lt;file&gt;</code></p>
<ul>
<li>æ’¤é”€æš‚å­˜åŒºä¿®æ”¹</li>
</ul>
<p><code>$ git reset HEAD &lt;file&gt;</code></p>
<hr>
<ul>
<li>åˆ é™¤æ–‡ä»¶</li>
</ul>
<p><code>$ git rm &lt;file&gt;</code></p>
<hr>
<ul>
<li>æ·»åŠ è¿œç¨‹åº“</li>
</ul>
<p><code>$ git remote add origin git@github.com:&lt;yourname&gt;/learngit.git</code></p>
<ul>
<li>æ¨é€</li>
</ul>
<p><code>$ git push -u origin master</code></p>
<ul>
<li>æœ¬åœ°åšäº†æäº¤å</li>
</ul>
<p><code>$ git push origin master</code></p>
<ul>
<li>æŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯</li>
</ul>
<p><code>$ git remote -v</code></p>
<ul>
<li>åˆ é™¤è¿œç¨‹åº“</li>
</ul>
<p><code>$ git remote rm &lt;name&gt;</code></p>
<hr>
<ul>
<li>å…‹éš†</li>
</ul>
<p><code>$ git clone git@github.com:&lt;name&gt;/gitskills.git</code></p>
<hr>
<ul>
<li>åˆ›å»ºå¹¶åˆ‡æ¢è‡³æ–°åˆ†æ”¯</li>
</ul>
<p><code>$ git checkout -b &lt;name&gt;</code><br><code>$ git switch -c &lt;name&gt;</code> </p>
<p>ç­‰åŒäº</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git branch dev</span><br><span class="line">$ git checkout dev</span><br></pre></td></tr></table></figure>

<p>æˆ–</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git branch dev</span><br><span class="line">$ git switch master</span><br></pre></td></tr></table></figure>

<ul>
<li>æŸ¥çœ‹åˆ†æ”¯</li>
</ul>
<p><code>$ git branch</code></p>
<ul>
<li>åˆå¹¶åˆ†æ”¯</li>
</ul>
<p><code>$ git merge &lt;name&gt;</code></p>
<ul>
<li>åˆ é™¤åˆ†æ”¯</li>
</ul>
<p><code>$ git branch -d &lt;name&gt;</code></p>
<ul>
<li>å¼ºåˆ¶åˆ é™¤</li>
</ul>
<p><code>$ git branch -D &lt;name&gt;</code></p>
<ul>
<li><code>--no-ff</code>æ–¹å¼çš„<code>git merge</code></li>
</ul>
<p><code>$ git merge --no-ff -m &quot;merge with no-ff&quot; &lt;name&gt;</code></p>
<ul>
<li>stashå‚¨è—å·¥ä½œç°åœº</li>
</ul>
<p><code>$ git stash</code></p>
<ul>
<li>æŸ¥çœ‹</li>
</ul>
<p><code>$ git stash list</code></p>
<ul>
<li>æ¢å¤ç°åœº</li>
</ul>
<p>æ¢å¤å¹¶åˆ é™¤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git stash apply</span><br><span class="line">$ git stash drop</span><br></pre></td></tr></table></figure>
<p>æˆ–<br><code>$ git stash pop</code></p>
<ul>
<li>å¤åˆ¶ä¿®æ”¹</li>
</ul>
<p><code>$ git cherry-pick &lt;version&gt;</code></p>
<ul>
<li>æ¨é€å†²çªåæŠ“å–æ–‡ä»¶åˆ°æœ¬åœ°åˆå¹¶</li>
</ul>
<p><code>$ git pull</code></p>
<ul>
<li>å˜åŸº</li>
</ul>
<p><code>$ git rebase</code></p>
<hr>
<ul>
<li>æ‰“æ ‡ç­¾</li>
</ul>
<p><code>$ git tag &lt;tag&gt;</code><br><code>$ git tag &lt;tag&gt; &lt;version&gt;</code></p>
<p>è¿˜å¯ä»¥åˆ›å»ºå¸¦æœ‰è¯´æ˜çš„æ ‡ç­¾ï¼Œç”¨-aæŒ‡å®šæ ‡ç­¾åï¼Œ-mæŒ‡å®šè¯´æ˜æ–‡å­—ï¼š</p>
<p><code>$ git tag -a &lt;tag&gt; -m &quot;info&quot; &lt;version&gt;</code></p>
<ul>
<li>æŸ¥çœ‹æ ‡ç­¾</li>
</ul>
<p><code>$ git tag</code></p>
<ul>
<li>æŸ¥çœ‹æ ‡ç­¾å†…å®¹</li>
</ul>
<p><code>$ git show &lt;tag&gt;</code></p>
<ul>
<li>åˆ é™¤æ ‡ç­¾</li>
</ul>
<p><code>$ git tag -d &lt;tag&gt;</code></p>
<ul>
<li>æ¨é€æ ‡ç­¾</li>
</ul>
<p><code>$ git push origin &lt;tag&gt;</code><br><code>$ git push origin --tags</code></p>
<ul>
<li>åˆ é™¤è¿œç¨‹æ ‡ç­¾</li>
</ul>
<p>å…ˆåˆ é™¤æœ¬åœ°å†ï¼š<br><code>$ git push origin :refs/tags/&lt;tag&gt;</code></p>
<p>è¡¥å……</p>
<p><img src="/learngit/git1.png" alt="git1"></p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://liaoxuefeng.com/">å»–é›ªå³°</a></p>
]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>Better</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo better</title>
    <url>/learnhexo.html</url>
    <content><![CDATA[<p>Hexoè‡ªç”¨æŒ‡ä»¤</p>
<span id="more"></span>
<h1 id="æ¥æ—¶è·¯"><a href="#æ¥æ—¶è·¯" class="headerlink" title="æ¥æ—¶è·¯"></a>æ¥æ—¶è·¯</h1><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><h3 id="1ï¼šæ— æ³•åˆå§‹åŒ–"><a href="#1ï¼šæ— æ³•åˆå§‹åŒ–" class="headerlink" title="1ï¼šæ— æ³•åˆå§‹åŒ–"></a>1ï¼šæ— æ³•åˆå§‹åŒ–</h3><p>hexo init ï¼ˆblogï¼‰æ—¶å› ä¸ºä»£ç†æ— æ³•æ­£å¸¸åˆå§‹åŒ–å®Œæˆï¼Œä¿®æ”¹ä»£ç†åœ°å€ï¼Œä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global http.proxy http://127.0.0.1:7890</span><br><span class="line">git config --global https.proxy http://127.0.0.1:7890</span><br></pre></td></tr></table></figure>
<p>è¿™å°†å…è®¸ Git é€šè¿‡æœ¬åœ°ä»£ç†è¿›è¡Œè¿æ¥ã€‚å¦‚æœä¸å†éœ€è¦ä»£ç†ï¼Œæˆ–è€…æƒ³è¦æ¸…é™¤ä»£ç†è®¾ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br></pre></td></tr></table></figure>


<h3 id="2ï¼šnpmé€Ÿåº¦æ…¢"><a href="#2ï¼šnpmé€Ÿåº¦æ…¢" class="headerlink" title="2ï¼šnpmé€Ÿåº¦æ…¢"></a>2ï¼šnpmé€Ÿåº¦æ…¢</h3><p><a href="https://npmmirror.com/">æ·˜å®é•œåƒ</a></p>
<p><img src="/learnhexo/taobao1.png" alt="p1"></p>
<p>ä¹‹ååœ¨npmå‰åŠ ä¸ªc!</p>
<h2 id="å¸¸ç”¨æŒ‡ä»¤"><a href="#å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨æŒ‡ä»¤"></a>å¸¸ç”¨æŒ‡ä»¤</h2><h3 id="å»ºç«™å‰"><a href="#å»ºç«™å‰" class="headerlink" title="å»ºç«™å‰"></a>å»ºç«™å‰</h3><p>åœ¨gitbaseä¸­cdåˆ°åšå®¢æ–‡ä»¶å¤¹</p>
<p>ä¸‹è½½hexoæ¡†æ¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<hr>
<p>åˆå§‹åŒ–åšå®¢é¡¹ç›®ï¼ˆè‹¥å·²ç»åœ¨ä¸‹ä¸€çº§æ–‡ä»¶å¤¹ä¸­å¯ä¸åŠ folderï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo init [folder] </span><br></pre></td></tr></table></figure>
<hr>
<p>è¿›å…¥folder</p>
<p>å®‰è£…ä¾èµ–é¡¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>
<hr>
<p>ä¸‹è½½éƒ¨ç½²å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<hr>
<p>ä¹‹åå¯éšæ—¶éƒ¨ç½²åˆ°Githubä¸Š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<h3 id="å»ºç«™å"><a href="#å»ºç«™å" class="headerlink" title="å»ºç«™å"></a>å»ºç«™å</h3><p>new æ–°å»ºä¸€ç¯‡æ–‡ç« </p>
<p>-p è‡ªå®šä¹‰æ–‡ç« è·¯å¾„</p>
<p>-r å¦‚æœå­˜åœ¨åˆ™æ›¿æ¢</p>
<p>-s æ–‡ç« åˆ«å</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure>
<hr>
<p>clean æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo cl</span><br></pre></td></tr></table></figure>
<hr>
<p>generate ç”Ÿæˆé™æ€æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure>
<hr>
<p>publish å‘å¸ƒè‰ç¨¿</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo publish [layout] &lt;filename&gt;</span><br></pre></td></tr></table></figure>
<hr>
<p>server å¯åŠ¨æœåŠ¡å™¨</p>
<p>-p é‡è®¾ç«¯å£</p>
<p>-s åªä½¿ç”¨é™æ€æ–‡ä»¶</p>
<p>-l å¯ç”¨æ—¥å¿—</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<hr>
<p>deploy éƒ¨ç½²ç½‘ç«™</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<hr>
<p>render æ¸²æŸ“æ–‡ä»¶<br>-o output destination</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo render &lt;file1&gt; [file2] ...</span><br></pre></td></tr></table></figure>
<hr>
<p>migrate ä»å…¶ä»–åšå®¢ç³»ç»Ÿè¿ç§»å†…å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo migrate&lt;type&gt;</span><br></pre></td></tr></table></figure>
<hr>
<p>list åˆ—å‡ºæ‰€æœ‰è·¯ç”±</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo list &lt;type&gt;</span><br></pre></td></tr></table></figure>
<hr>
<p>version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo version</span><br></pre></td></tr></table></figure>
<hr>
<p>config åˆ—å‡ºç½‘ç«™çš„é…ç½®ï¼ˆ_config.ymlï¼‰ã€‚ å¦‚æœæŒ‡å®šäº† keyï¼Œåˆ™åªå±•ç¤ºé…ç½®ä¸­å¯¹åº” key çš„å€¼ï¼›å¦‚æœåŒæ—¶æŒ‡å®šäº† key å’Œ valueï¼Œåˆ™å°†é…ç½®ä¸­å¯¹åº”çš„ key çš„å€¼ä¿®æ”¹ä¸º valueã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo config [key] [value]</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹å·²ç»å®‰è£…çš„æ’ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm ls --depth=0</span><br></pre></td></tr></table></figure>


<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://dayuzy.com/">èµ„æ·±æŠ€æœ¯åšå®¢</a></p>
<p><a href="https://blog.csdn.net/cat_bayi/article/details/128725230">CSDNè‰¯å¿ƒæ•™å­¦</a></p>
<p><a href="https://mp.weixin.qq.com/s/GmTmhpkB0QmoHIL5bmXQGw">å°å²›ç å†œ</a></p>
<p><a href="https://hexo.io/zh-cn/">å®˜æ–¹æ–‡æ¡£</a></p>
]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Better</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>algorithm</title>
    <url>/algorithm.html</url>
    <content><![CDATA[<p>ç®—æ³•æ¿å­</p>
<span id="more"></span>
<h1 id="ç®—æ³•æ±‡æ€»"><a href="#ç®—æ³•æ±‡æ€»" class="headerlink" title="ç®—æ³•æ±‡æ€»"></a>ç®—æ³•æ±‡æ€»</h1><h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><h3 id="å»ºå›¾"><a href="#å»ºå›¾" class="headerlink" title="å»ºå›¾"></a>å»ºå›¾</h3><p>ä¸‰ç§å»ºå›¾æ–¹å¼</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXN = <span class="number">11</span>; <span class="comment">// æœ€å¤§ç‚¹æ•°</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXM = <span class="number">21</span>; <span class="comment">// æœ€å¤§è¾¹æ•°ï¼ˆæ— å‘å›¾éœ€ 2 å€ï¼‰</span></span><br><span class="line"><span class="comment">// é‚»æ¥çŸ©é˜µ</span></span><br><span class="line"><span class="type">int</span> graph1[MAXN][MAXN];</span><br><span class="line"><span class="comment">// é‚»æ¥è¡¨</span></span><br><span class="line">vector&lt;vector&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt;&gt; graph2;</span><br><span class="line"><span class="comment">// é“¾å¼å‰å‘æ˜Ÿ</span></span><br><span class="line"><span class="type">int</span> head[MAXN], nxt[MAXM], to[MAXM], weight[MAXM], cnt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ¸…ç©ºé‚»æ¥çŸ©é˜µ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">            graph1[i][j] = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// æ¸…ç©ºé‚»æ¥è¡¨</span></span><br><span class="line">    graph2.<span class="built_in">clear</span>();</span><br><span class="line">    graph2.<span class="built_in">resize</span>(n + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">// æ¸…ç©ºé“¾å¼å‰å‘æ˜Ÿ</span></span><br><span class="line">    cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(head, <span class="number">0</span>, <span class="built_in">sizeof</span>(head));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addEdge</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v, <span class="type">int</span> w)</span> </span>&#123;</span><br><span class="line">    nxt[ ++cnt] = head[u];</span><br><span class="line">    to[cnt] = v;</span><br><span class="line">    weight[cnt] = w;</span><br><span class="line">    head[u] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ‰å‘</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">directGraph</span><span class="params">(<span class="type">const</span> vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; edges)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; edge : edges) &#123;</span><br><span class="line">        graph1[edge[<span class="number">0</span>]][edge[<span class="number">1</span>]] = edge[<span class="number">2</span>];</span><br><span class="line">        graph2[edge[<span class="number">0</span>]].<span class="built_in">emplace_back</span>(edge[<span class="number">1</span>], edge[<span class="number">2</span>]);</span><br><span class="line">        <span class="built_in">addEdge</span>(edge[<span class="number">0</span>], edge[<span class="number">1</span>], edge[<span class="number">2</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ— å‘</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">undirectGraph</span><span class="params">(<span class="type">const</span> vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; edges)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; edge : edges) &#123;</span><br><span class="line">        graph1[edge[<span class="number">0</span>]][edge[<span class="number">1</span>]] = edge[<span class="number">2</span>];</span><br><span class="line">        graph1[edge[<span class="number">1</span>]][edge[<span class="number">0</span>]] = edge[<span class="number">2</span>];</span><br><span class="line">        </span><br><span class="line">        graph2[edge[<span class="number">0</span>]].<span class="built_in">emplace_back</span>(edge[<span class="number">1</span>], edge[<span class="number">2</span>]);</span><br><span class="line">        graph2[edge[<span class="number">1</span>]].<span class="built_in">emplace_back</span>(edge[<span class="number">0</span>], edge[<span class="number">2</span>]);</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">addEdge</span>(edge[<span class="number">0</span>], edge[<span class="number">1</span>], edge[<span class="number">2</span>]);</span><br><span class="line">        <span class="built_in">addEdge</span>(edge[<span class="number">1</span>], edge[<span class="number">0</span>], edge[<span class="number">2</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">traversal</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;é‚»æ¥çŸ©é˜µéå†:&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            cout &lt;&lt; graph1[i][j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;é‚»æ¥è¡¨éå†:&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        cout &lt;&lt; i &lt;&lt; <span class="string">&quot; (é‚»å±…,è¾¹æƒ): &quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; edge : graph2[i]) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;(&quot;</span> &lt;&lt; edge.first &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; edge.second &lt;&lt; <span class="string">&quot;) &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;é“¾å¼å‰å‘æ˜Ÿéå†:&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        cout &lt;&lt; i &lt;&lt; <span class="string">&quot; (é‚»å±…,è¾¹æƒ): &quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> ei = head[i]; ei &gt; <span class="number">0</span>; ei = nxt[ei]) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;(&quot;</span> &lt;&lt; to[ei] &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; weight[ei] &lt;&lt; <span class="string">&quot;) &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n1 = <span class="number">4</span>;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; edges1 = &#123;&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>&#125;, &#123;<span class="number">4</span>, <span class="number">3</span>, <span class="number">4</span>&#125;, &#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>&#125;, &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">7</span>&#125;, &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>&#125;, &#123;<span class="number">3</span>, <span class="number">1</span>, <span class="number">1</span>&#125;&#125;;</span><br><span class="line">    <span class="built_in">build</span>(n1);</span><br><span class="line">    <span class="built_in">directGraph</span>(edges1);</span><br><span class="line">    <span class="built_in">traversal</span>(n1);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;==============================&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="type">int</span> n2 = <span class="number">5</span>;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; edges2 = &#123;&#123;<span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>&#125;, &#123;<span class="number">4</span>, <span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>&#125;, &#123;<span class="number">5</span>, <span class="number">2</span>, <span class="number">4</span>&#125;, &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span>&#125;, &#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>&#125;, &#123;<span class="number">4</span>, <span class="number">2</span>, <span class="number">6</span>&#125;&#125;;</span><br><span class="line">    <span class="built_in">build</span>(n2);</span><br><span class="line">    <span class="built_in">undirectGraph</span>(edges2);</span><br><span class="line">    <span class="built_in">traversal</span>(n2);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å›¾æœ€çŸ­è·¯"><a href="#å›¾æœ€çŸ­è·¯" class="headerlink" title="å›¾æœ€çŸ­è·¯"></a>å›¾æœ€çŸ­è·¯</h3><p>ä»æŸä¸€åŸºç‚¹åˆ°å…¶ä»–ç‚¹çš„æœ€çŸ­è·¯å¾„</p>
<h4 id="Dijkstraç®—æ³•"><a href="#Dijkstraç®—æ³•" class="headerlink" title="Dijkstraç®—æ³•"></a>Dijkstraç®—æ³•</h4><h5 id="æ™®é€šå †"><a href="#æ™®é€šå †" class="headerlink" title="æ™®é€šå †"></a>æ™®é€šå †</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m, st;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; st;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">distance</span><span class="params">(n + <span class="number">1</span>, INT_MAX)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">visited</span><span class="params">(n + <span class="number">1</span>, <span class="literal">false</span>)</span></span>;</span><br><span class="line">    vector&lt;vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt;&gt; <span class="built_in">g</span>(n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, u, v, w; i &lt; m; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        g[u].<span class="built_in">push_back</span>(&#123;v, w&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"> 	priority_queue&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;,vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt;,greater&lt;&gt;&gt; q1;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> it : g[st])&#123;</span><br><span class="line">        q1.<span class="built_in">push</span>(&#123;it.second,it.first&#125;);  </span><br><span class="line">    &#125;</span><br><span class="line">    distance[st] = <span class="number">0</span>;</span><br><span class="line">    pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; temp;</span><br><span class="line">    <span class="type">int</span> u, w, v;</span><br><span class="line">    <span class="keyword">while</span>(!q1.<span class="built_in">empty</span>())&#123;</span><br><span class="line">        temp = q1.<span class="built_in">top</span>();</span><br><span class="line">        q1.<span class="built_in">pop</span>();</span><br><span class="line">        u = temp.second;</span><br><span class="line">        w = temp.first;</span><br><span class="line">        <span class="keyword">if</span>(visited[u]) <span class="keyword">continue</span>;</span><br><span class="line">        visited[u] = <span class="literal">true</span>;</span><br><span class="line">        distance[u] = w;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> it : g[u])&#123;</span><br><span class="line">            v = it.first;</span><br><span class="line">            <span class="keyword">if</span>(!visited[v] &amp;&amp; it.second + distance[u] &lt; distance[v])&#123;</span><br><span class="line">                q1.<span class="built_in">push</span>(&#123;it.second + distance[u], v&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">        cout &lt;&lt; distance[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="åå‘ç´¢å¼•å †"><a href="#åå‘ç´¢å¼•å †" class="headerlink" title="åå‘ç´¢å¼•å †"></a>åå‘ç´¢å¼•å †</h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//heap</span></span><br><span class="line"><span class="type">int</span> MAXN = <span class="number">100001</span>;</span><br><span class="line"><span class="type">int</span> MAXM = <span class="number">200001</span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">head</span><span class="params">(MAXN)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">next1</span><span class="params">(MAXM)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">to</span><span class="params">(MAXM)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">weight</span><span class="params">(MAXM)</span></span>;</span><br><span class="line"><span class="type">int</span> cnt = <span class="number">1</span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">heap</span><span class="params">(MAXN)</span></span>;</span><br><span class="line"><span class="type">int</span> sizeh = <span class="number">0</span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">where</span><span class="params">(MAXN,<span class="number">-1</span>)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">distance1</span><span class="params">(MAXN,INT_MAX)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap1</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">swap</span>(heap[i], heap[j]);</span><br><span class="line">    where[heap[i]] = i;</span><br><span class="line">    where[heap[j]] = j;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">heapInsert</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (i &gt; <span class="number">0</span> &amp;&amp; distance1[heap[i]] &lt; distance1[heap[(i - <span class="number">1</span>) / <span class="number">2</span>]])&#123;</span><br><span class="line">        <span class="built_in">swap1</span>(i, (i - <span class="number">1</span>) / <span class="number">2</span>);</span><br><span class="line">        i = (i - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">heapify</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> l = i * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> max_mark;</span><br><span class="line">    <span class="type">int</span> mark;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; sizeh) &#123;</span><br><span class="line">        max_mark = l + <span class="number">1</span> &lt; sizeh &amp;&amp; distance1[heap[l + <span class="number">1</span>]] &lt; distance1[heap[l]] ? l + <span class="number">1</span> : l;</span><br><span class="line">        mark =distance1[ heap[i]] &lt;distance1[ heap[max_mark]] ? i : max_mark;</span><br><span class="line">        <span class="keyword">if</span> (mark == i) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">swap1</span>(i, mark);</span><br><span class="line">            i = mark;</span><br><span class="line">            l = i * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m, s;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; s;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>, x, y, w; i &lt; m; i++) &#123;</span><br><span class="line">        cin &gt;&gt; x &gt;&gt; y &gt;&gt; w;</span><br><span class="line">        next1[cnt] = head[x];</span><br><span class="line">        to[cnt] = y;</span><br><span class="line">        weight[cnt] = w;</span><br><span class="line">        head[x] = cnt++;</span><br><span class="line">    &#125;</span><br><span class="line">    heap[sizeh++] = s;</span><br><span class="line">    distance1[s] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (sizeh) &#123;</span><br><span class="line">        <span class="type">int</span> u = heap[<span class="number">0</span>];</span><br><span class="line">        <span class="built_in">swap1</span>(<span class="number">0</span>, --sizeh);</span><br><span class="line">        <span class="built_in">heapify</span>(<span class="number">0</span>);</span><br><span class="line">        where[u] = <span class="number">-2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> ei = head[u]; ei &gt; <span class="number">0</span>; ei = next1[ei]) &#123;</span><br><span class="line">            <span class="type">int</span> v = to[ei];</span><br><span class="line">            <span class="type">int</span> w = weight[ei];</span><br><span class="line">            <span class="keyword">if</span> (where[v] == <span class="number">-1</span>) &#123;</span><br><span class="line">                distance1[v] = w + distance1[u];</span><br><span class="line">                where[v] = sizeh;</span><br><span class="line">                heap[sizeh++] = v;</span><br><span class="line">                <span class="built_in">heapInsert</span>(where[v]);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (where[v] &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">                distance1[v] = <span class="built_in">min</span>(distance1[v], distance1[u] + w);</span><br><span class="line">                <span class="built_in">heapInsert</span>(where[v]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cout &lt;&lt; distance1[i];</span><br><span class="line">        <span class="keyword">if</span> (i != n) cout &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="æ±‚æœ€çŸ­å¥‡å¶è·¯å¾„"><a href="#æ±‚æœ€çŸ­å¥‡å¶è·¯å¾„" class="headerlink" title="æ±‚æœ€çŸ­å¥‡å¶è·¯å¾„"></a>æ±‚æœ€çŸ­å¥‡å¶è·¯å¾„</h5><p>è¯¥æ€æƒ³å¯æ‹“å±•ä¸ºæŸä¸€ä¸ªèŠ‚ç‚¹æœ‰nç§çŠ¶æ€ï¼Œæ•…æ¯æ¡è¾¹å¢åŠ ä¸€ä¸ªå˜é‡ä¸ºè·¯çš„æ•°é‡ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºt &#x3D; 1,è€Œè·‘DJç®—æ³•æ—¶ï¼Œå¯ä»¥åœ¨ä¼˜å…ˆé˜Ÿåˆ—åé¢å†åŠ ä¸€ä¸ªå±æ€§è¡¨ç¤ºçŠ¶æ€typeï¼Œtype &#x3D; (type + t) % nã€‚</p>
<p>å½“å†å¢åŠ ä¸€ä¸ªå±æ€§è¡¨ç¤ºèŠ‚ç‚¹çš„ç±»åˆ«ï¼Œç›¸åŒèŠ‚ç‚¹é—´å¯ä»¥ä»¥æŸä¸ªä»£ä»·ç›¸äº’ä¼ é€æ—¶ï¼Œåˆ™å¯ä»¥æŠ½è±¡ä¸ºæ–°å¢äº†ä¸€ä¸ªç¥–å…ˆèŠ‚ç‚¹ï¼Œè¯¥ç¥–å…ˆä¸æ‰€æœ‰è¯¥ç±»åˆ«çš„èŠ‚ç‚¹ç›¸äº’è”é€šï¼ŒèŠ‚ç‚¹åˆ°ç¥–å…ˆçš„t&#x3D;1ï¼Œç¥–å…ˆåˆ°èŠ‚ç‚¹çš„t&#x3D;0ã€‚</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾è¾¹æƒä¸º1,è‹¥ä¸ä¸º1åˆ™w+1å˜æˆw+weight[ei]</span></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–å¥‡æ•°å’Œå¶æ•°è·¯å¾„é•¿åº¦çš„è·ç¦»æ•°ç»„</span></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dis_o</span><span class="params">(n + <span class="number">1</span>, <span class="number">1e18</span>)</span>, <span class="title">dis_e</span><span class="params">(n + <span class="number">1</span>, <span class="number">1e18</span>)</span></span>; <span class="comment">// dis_o: æœ€çŸ­å¥‡æ•°è·¯å¾„ï¼Œdis_e: æœ€çŸ­å¶æ•°è·¯å¾„</span></span><br><span class="line">dis_e[<span class="number">1</span>] = <span class="number">0</span>; <span class="comment">// èµ·ç‚¹ï¼ˆèŠ‚ç‚¹1ï¼‰çš„å¶æ•°è·¯å¾„é•¿åº¦ä¸º0</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨æœ€å°å †ä¼˜å…ˆé˜Ÿåˆ—å­˜å‚¨ &#123;è·ç¦», èŠ‚ç‚¹&#125; å¯¹</span></span><br><span class="line">priority_queue&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;, vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt;, greater&lt;&gt;&gt; q1;</span><br><span class="line">q1.<span class="built_in">push</span>(&#123;<span class="number">0</span>, <span class="number">1</span>&#125;); <span class="comment">// ä»èŠ‚ç‚¹1å¼€å§‹ï¼Œè·ç¦»ä¸º0</span></span><br><span class="line"><span class="comment">// Dijkstraç®—æ³•</span></span><br><span class="line"><span class="keyword">while</span> (!q1.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">    <span class="keyword">auto</span> [w, u] = q1.<span class="built_in">top</span>(); <span class="comment">// w: å½“å‰è·ç¦»ï¼Œu: å½“å‰èŠ‚ç‚¹</span></span><br><span class="line">    q1.<span class="built_in">pop</span>();</span><br><span class="line">    <span class="comment">// éå†èŠ‚ç‚¹uçš„æ‰€æœ‰é‚»å±…</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> ei = head[u]; ei; ei = next[ei]) &#123;</span><br><span class="line">        <span class="type">int</span> v = to[ei]; <span class="comment">// é‚»å±…èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span> (w &amp; <span class="number">1</span>) &#123; <span class="comment">// å¦‚æœåˆ°uçš„è·¯å¾„é•¿åº¦ä¸ºå¥‡æ•°</span></span><br><span class="line">            <span class="keyword">if</span> (dis_e[v] &gt; w + <span class="number">1</span>) &#123; <span class="comment">// å°è¯•æ›´æ–°vçš„å¶æ•°è·¯å¾„</span></span><br><span class="line">                dis_e[v] = w + <span class="number">1</span>;</span><br><span class="line">                q1.<span class="built_in">push</span>(&#123;w + <span class="number">1</span>, v&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// å¦‚æœåˆ°uçš„è·¯å¾„é•¿åº¦ä¸ºå¶æ•°</span></span><br><span class="line">            <span class="keyword">if</span> (dis_o[v] &gt; w + <span class="number">1</span>) &#123; <span class="comment">// å°è¯•æ›´æ–°vçš„å¥‡æ•°è·¯å¾„</span></span><br><span class="line">                dis_o[v] = w + <span class="number">1</span>;</span><br><span class="line">                q1.<span class="built_in">push</span>(&#123;w + <span class="number">1</span>, v&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*è¿·å®«æœ‰nä¸ªæˆ¿é—´ï¼Œé€šè¿‡mæ¡å•å‘é“è·¯è¿æ¥ï¼Œè¿·å®«çš„èµ·ç‚¹æ˜¯1å·æˆ¿é—´ï¼Œç»ˆç‚¹æ˜¯nå·æˆ¿é—´ã€‚æ¯æ¡é“è·¯éƒ½æœ‰ä¸€ä¸ªå®ˆè·¯äººï¼Œéœ€è¦æ”¯ä»˜å¯¹åº”æ•°é‡çš„é‡‘å¸æ‰èƒ½é€šè¿‡ï¼Œè¿™ä¸ªè¿·å®«è¿˜å­˜åœ¨ç€ä¸¤ä¸ªç¥ç§˜çš„è§„åˆ™ï¼š</span></span><br><span class="line"><span class="comment">1.åªæœ‰å½“èµ°åˆ°ç»ˆç‚¹æ—¶ç»è¿‡çš„è·¯çš„æ•°é‡æ˜¯3çš„å€æ•°æ—¶å¥¹æ‰èƒ½é¡ºåˆ©é€ƒç¦»è¿·å®«ã€‚</span></span><br><span class="line"><span class="comment">2.æ¯ä¸ªæˆ¿é—´éƒ½æœ‰ä¸€ä¸ªç±»åˆ«å±æ€§ï¼Œå¥¹å¯ä»¥èŠ±è´¹xä¸ªé‡‘å¸åœ¨ç›¸åŒç±»åˆ«çš„å±æ€§ä¹‹é—´ç¬ç§»ï¼ˆæ³¨æ„æ¯æ¬¡ç¬ç§»ä¹Ÿç®—ä½œèµ°è¿‡äº†ä¸€æ¡è·¯ï¼‰ï¼Œç‰¹æ®Šåœ°å¥¹å¯ä»¥åœ¨åŒä¸ªæˆ¿é—´å†…è¿›è¡Œç¬ç§»</span></span><br><span class="line"><span class="comment">å¦‚æœæ€æ ·éƒ½ä¸èƒ½èµ°å‡ºè¿·å®«çš„è¯è¾“å‡ºâ€œ-1â€*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> inf = <span class="number">1e18</span>;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>)-&gt;ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span>(t --)&#123;</span><br><span class="line">		<span class="type">int</span> n, m, k;</span><br><span class="line">		cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">		<span class="function">vector <span class="title">adj</span><span class="params">(n &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, vector&lt;array&lt;<span class="type">int</span>, <span class="number">3</span>&gt;&gt;())</span></span>;</span><br><span class="line">		<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">sta</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">			cin &gt;&gt; sta[i];</span><br><span class="line">			adj[i].<span class="built_in">push_back</span>(&#123;sta[i] + n, k, <span class="number">1</span>&#125;);</span><br><span class="line">			adj[sta[i] + n].<span class="built_in">push_back</span>(&#123;i, <span class="number">0</span>, <span class="number">0</span>&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, u, v, w; i &lt;= m; i ++)&#123;</span><br><span class="line">			cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">			adj[u].<span class="built_in">push_back</span>(&#123;v, w, <span class="number">1</span>&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		vector&lt;array&lt;<span class="type">int</span>, 3&gt;&gt; <span class="built_in">dis</span>(n &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, &#123;inf, inf, inf&#125;);</span><br><span class="line">		priority_queue&lt;array&lt;<span class="type">int</span>, 3&gt;, vector&lt;array&lt;<span class="type">int</span>, 3&gt;&gt;, greater&lt;&gt;&gt; q1;</span><br><span class="line">		array&lt;<span class="type">int</span>, 3&gt; t1;</span><br><span class="line">		<span class="type">int</span> u, val, in, in1;</span><br><span class="line">		dis[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">		q1.<span class="built_in">push</span>(&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;);</span><br><span class="line">		<span class="keyword">while</span>(!q1.<span class="built_in">empty</span>())&#123;</span><br><span class="line">			t1 = q1.<span class="built_in">top</span>();</span><br><span class="line">			q1.<span class="built_in">pop</span>();</span><br><span class="line">			val = t1[<span class="number">0</span>], u = t1[<span class="number">1</span>], in = t1[<span class="number">2</span>];</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">auto</span> [v, w, gap] : adj[u])&#123;</span><br><span class="line">				in1 = (in + gap) % <span class="number">3</span>;</span><br><span class="line">				<span class="keyword">if</span>(dis[v][in1] &gt; val + w)&#123;</span><br><span class="line">					dis[v][in1] = val + w;</span><br><span class="line">					q1.<span class="built_in">push</span>(&#123;dis[v][in1], v, in1&#125;);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(dis[n][<span class="number">0</span>] == inf)&#123;</span><br><span class="line">			cout &lt;&lt; <span class="string">&quot;-1\n&quot;</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			cout &lt;&lt; dis[n][<span class="number">0</span>] &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Floydç®—æ³•"><a href="#Floydç®—æ³•" class="headerlink" title="Floydç®—æ³•"></a>Floydç®—æ³•</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> INF = numeric_limits&lt;<span class="type">int</span>&gt;::<span class="built_in">max</span>();</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">floydWarshallTemplate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–é‚»æ¥çŸ©é˜µï¼Œé»˜è®¤ä¸å¯è¾¾æ—¶æƒå€¼ä¸º INF</span></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dist</span>(n, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n, INF));</span><br><span class="line">    <span class="comment">// è‡ªå·±åˆ°è‡ªå·±è·ç¦»ä¸º 0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        dist[i][i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¯»å…¥è¾¹ï¼Œå‡è®¾è¾“å…¥ä¸ºæ— å‘å›¾ï¼Œè‹¥ä¸ºæœ‰å‘å›¾åˆ™åªæ›´æ–°ä¸€è¾¹</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v, w;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        u--; v--; <span class="comment">// è‹¥è¾“å…¥é¡¶ç‚¹ç¼–å·ä» 1 å¼€å§‹åˆ™è½¬æ¢ä¸ºä» 0 å¼€å§‹</span></span><br><span class="line">        <span class="comment">// å¯¹äºå¤šé‡è¾¹å–æƒå€¼æœ€å°çš„ä¸€æ¡</span></span><br><span class="line">        dist[u][v] = <span class="built_in">min</span>(dist[u][v], w);</span><br><span class="line">        dist[v][u] = <span class="built_in">min</span>(dist[v][u], w);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Floydâ€“Warshall ç®—æ³•ï¼šæšä¸¾ä¸­è½¬ç‚¹ kã€èµ·ç‚¹ i å’Œç»ˆç‚¹ j</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; n; k++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœ i-&gt;k ä¸å¯è¾¾åˆ™æ— éœ€æ›´æ–°</span></span><br><span class="line">            <span class="keyword">if</span> (dist[i][k] == INF) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="comment">// è‹¥è·¯å¾„ i-&gt;k å’Œ k-&gt;j å‡å¯è¾¾ï¼Œæ›´æ–° i-&gt;j çš„æœ€çŸ­è·¯å¾„</span></span><br><span class="line">                <span class="keyword">if</span> (dist[k][j] &lt; INF)</span><br><span class="line">                    dist[i][j] = <span class="built_in">min</span>(dist[i][j], dist[i][k] + dist[k][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è¾“å‡ºç»“æœï¼šè‹¥ä¸¤ç‚¹ä¸å¯è¾¾åˆ™è¾“å‡º 0ï¼Œå¦åˆ™è¾“å‡ºæœ€çŸ­è·¯å¾„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            cout &lt;&lt; (dist[i][j] == INF ? <span class="number">0</span> : dist[i][j]) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="SPFAï¼ˆShortest-Path-Faster-Algorithmï¼‰ç®—æ³•"><a href="#SPFAï¼ˆShortest-Path-Faster-Algorithmï¼‰ç®—æ³•" class="headerlink" title="SPFAï¼ˆShortest Path Faster Algorithmï¼‰ç®—æ³•"></a><code>SPFA</code>ï¼ˆShortest Path Faster Algorithmï¼‰ç®—æ³•</h4><p><code>SPFA</code> ç®—æ³•æ˜¯å¯¹ Bellman-Ford ç®—æ³•çš„ä¸€ç§æ”¹è¿›ï¼Œä¸»è¦ç”¨äºåœ¨å«æœ‰è´Ÿæƒè¾¹çš„å›¾ä¸­æ±‚æœ€çŸ­è·¯å¾„ã€‚å®ƒåˆ©ç”¨é˜Ÿåˆ—æ¥ç»´æŠ¤â€œå¾…æ›´æ–°â€çš„èŠ‚ç‚¹ï¼Œä»è€Œæé«˜æ›´æ–°æ•ˆç‡ã€‚</p>
<p>æ ¹æ®æœ€çŸ­è·¯å¾„ç†è®ºï¼Œåœ¨æ²¡æœ‰è´Ÿæƒå›è·¯çš„å›¾ä¸­ï¼Œä»èµ·ç‚¹åˆ°ä»»ä¸€èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„æœ€å¤šåªéœ€è¦ç»è¿‡ <code>n-1</code> æ¡è¾¹ã€‚æ‰€ä»¥è‹¥æŸèŠ‚ç‚¹çš„è·¯å¾„æ›´æ–°æ¬¡æ•°è¶…è¿‡ <code>n-1</code>ï¼Œå°±èƒ½ç¡®å®šæœ‰è´Ÿæƒå›è·¯å­˜åœ¨ã€‚</p>
<p><code>visited</code>ï¼šæ ‡è®°å½“å‰èŠ‚ç‚¹æ˜¯å¦åœ¨é˜Ÿåˆ—ä¸­ï¼Œé˜²æ­¢é‡å¤å…¥é˜Ÿ</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">6001</span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">head</span><span class="params">(M/<span class="number">2</span>)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">next1</span><span class="params">(M)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">to</span><span class="params">(M)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">weight</span><span class="params">(M)</span></span>;</span><br><span class="line"><span class="type">int</span> cnt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addedge</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y,<span class="type">int</span> w)</span></span>&#123;</span><br><span class="line">    next1[cnt] = head[x];</span><br><span class="line">    to[cnt] = y;</span><br><span class="line">    weight[cnt] = w;</span><br><span class="line">    head[x] = cnt++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(<span class="type">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    cnt=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">fill</span>(head.<span class="built_in">begin</span>(),head.<span class="built_in">end</span>(),<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>, x, y, w; i &lt; m; i++) &#123;</span><br><span class="line">        cin &gt;&gt; x &gt;&gt; y &gt;&gt; w;</span><br><span class="line">        <span class="built_in">addedge</span>(x,y,w);</span><br><span class="line">        <span class="keyword">if</span> (w &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">addedge</span>(y,x,w);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    queue&lt;<span class="type">int</span>&gt; heap;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">distance</span><span class="params">(n + <span class="number">1</span>, INT_MAX)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">upcnt</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">visited</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    heap.<span class="built_in">push</span>(<span class="number">1</span>);</span><br><span class="line">    distance[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    upcnt[<span class="number">1</span>]++;</span><br><span class="line">    visited[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (!heap.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="type">int</span> u = heap.<span class="built_in">front</span>();</span><br><span class="line">        heap.<span class="built_in">pop</span>();</span><br><span class="line">        visited[u] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> ei = head[u];ei &gt; <span class="number">0</span>;ei = next1[ei]) &#123;</span><br><span class="line">            <span class="type">int</span> v = to[ei];</span><br><span class="line">            <span class="type">int</span> w = weight[ei];</span><br><span class="line">            <span class="keyword">if</span> (w + distance[u] &lt; distance[v]) &#123;</span><br><span class="line">                distance[v] = w + distance[u];</span><br><span class="line">                <span class="keyword">if</span> (visited[v]==<span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> ((++upcnt[v])  &gt; n<span class="number">-1</span>) &#123;</span><br><span class="line">                        <span class="comment">//å­˜åœ¨è´Ÿæƒå›è·¯</span></span><br><span class="line">                        cout &lt;&lt; <span class="string">&quot;YES&quot;</span> &lt;&lt; endl;</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    visited[v] = <span class="number">1</span>;</span><br><span class="line">                    heap.<span class="built_in">push</span>(v);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;NO&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æœ€å°ç”Ÿæˆæ ‘"><a href="#æœ€å°ç”Ÿæˆæ ‘" class="headerlink" title="æœ€å°ç”Ÿæˆæ ‘"></a>æœ€å°ç”Ÿæˆæ ‘</h3><p>æ ‘ä¸Šçš„ä¸€æ¡æ— å›è·¯çš„è¿é€šæ‰€æœ‰èŠ‚ç‚¹çš„ä¸€æ¡æƒå€¼æœ€å°çš„è·¯å¾„</p>
<h4 id="Kruskalç®—æ³•"><a href="#Kruskalç®—æ³•" class="headerlink" title="Kruskalç®—æ³•"></a>Kruskalç®—æ³•</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Kruskal ç®—æ³•ï¼šåˆ©ç”¨å¹¶æŸ¥é›†æ±‚æœ€å°ç”Ÿæˆæ ‘</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">kruskal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    vector&lt;tuple&lt;<span class="type">int</span>,<span class="type">int</span>,<span class="type">int</span>&gt;&gt; edges; <span class="comment">// (æƒå€¼, ç‚¹u, ç‚¹v)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v, w;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        edges.<span class="built_in">push_back</span>(&#123;w, u, v&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(edges.<span class="built_in">begin</span>(), edges.<span class="built_in">end</span>());</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">parent</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) parent[i] = i;</span><br><span class="line">	<span class="keyword">auto</span> find = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> x) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(parent[x] != x)&#123;</span><br><span class="line">			parent[x] = <span class="built_in">f</span>(f,parent[x]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> parent[x];</span><br><span class="line">	&#125;;</span><br><span class="line">    <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> [w, u, v] : edges) &#123;</span><br><span class="line">        <span class="type">int</span> pu = <span class="built_in">find</span>(find, u), pv = <span class="built_in">find</span>(find, v);</span><br><span class="line">        <span class="keyword">if</span> (pu != pv) &#123;</span><br><span class="line">            parent[pu] = pv;</span><br><span class="line">            sum += w;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Primç®—æ³•"><a href="#Primç®—æ³•" class="headerlink" title="Primç®—æ³•"></a>Primç®—æ³•</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Prim ç®—æ³•</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">prim</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    vector&lt;vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt;&gt; <span class="built_in">graph</span>(n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v, w;</span><br><span class="line">        cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        graph[u].<span class="built_in">push_back</span>(&#123;v, w&#125;);</span><br><span class="line">        graph[v].<span class="built_in">push_back</span>(&#123;u, w&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">visited</span><span class="params">(n + <span class="number">1</span>, <span class="literal">false</span>)</span></span>;</span><br><span class="line">    <span class="comment">// ä¼˜å…ˆé˜Ÿåˆ—ï¼špair(æƒå€¼, èŠ‚ç‚¹)</span></span><br><span class="line">    priority_queue&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;, vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt;, greater&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt;&gt; pq;</span><br><span class="line">    visited[<span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> edge : graph[<span class="number">1</span>]) pq.<span class="built_in">push</span>(&#123;edge.second, edge.first&#125;);</span><br><span class="line">    <span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!pq.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">auto</span> [w, u] = pq.<span class="built_in">top</span>();</span><br><span class="line">        pq.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span> (visited[u]) <span class="keyword">continue</span>;</span><br><span class="line">        visited[u] = <span class="literal">true</span>;</span><br><span class="line">        sum += w;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> edge : graph[u])</span><br><span class="line">            <span class="keyword">if</span> (!visited[edge.first])</span><br><span class="line">                pq.<span class="built_in">push</span>(&#123;edge.second, edge.first&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="äºŒå‰æ ‘"><a href="#äºŒå‰æ ‘" class="headerlink" title="äºŒå‰æ ‘"></a>äºŒå‰æ ‘</h3><h4 id="äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–åŠå…ˆä¸­åºæ„é€ "><a href="#äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–åŠå…ˆä¸­åºæ„é€ " class="headerlink" title="äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–åŠå…ˆä¸­åºæ„é€ "></a>äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–åŠå…ˆä¸­åºæ„é€ </h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">TreeNode</span>&#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    TreeNode * left, * right;</span><br><span class="line">    <span class="built_in">TreeNode</span> (<span class="type">int</span> x)&#123;</span><br><span class="line">        val = x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//å…ˆåºçš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Codec</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">string <span class="title">serialize</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        string r;</span><br><span class="line">        <span class="built_in">serialize_h</span>(root,r);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">TreeNode* <span class="title">deserialize</span><span class="params">(string data)</span> </span>&#123;</span><br><span class="line">        vector&lt;string&gt; vals = <span class="built_in">split</span>(data,<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">        <span class="type">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">deserialize_h</span>(vals,cnt);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">serialize_h</span><span class="params">(TreeNode* root,string&amp; r)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">nullptr</span>)&#123;</span><br><span class="line">            r+=<span class="string">&quot;#,&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            r+=<span class="built_in">to_string</span>(root-&gt;val)+<span class="string">&quot;,&quot;</span>;</span><br><span class="line">            <span class="built_in">serialize_h</span>(root-&gt;left,r);</span><br><span class="line">            <span class="built_in">serialize_h</span>(root-&gt;right,r);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">TreeNode* <span class="title">deserialize_h</span><span class="params">(<span class="type">const</span> vector&lt;string&gt;&amp; vals,<span class="type">int</span>&amp; cnt)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(cnt &gt;= vals.<span class="built_in">size</span>() || vals[cnt]==<span class="string">&quot;#&quot;</span> )&#123;</span><br><span class="line">            cnt++;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        TreeNode* node = <span class="keyword">new</span> <span class="built_in">TreeNode</span>(<span class="built_in">stoi</span>(vals[cnt++]));</span><br><span class="line">        node-&gt;left=<span class="built_in">deserialize_h</span>(vals,cnt);</span><br><span class="line">        node-&gt;right=<span class="built_in">deserialize_h</span>(vals,cnt);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;string&gt; <span class="title">split</span><span class="params">(<span class="type">const</span> string&amp;s,<span class="type">char</span> delimiter)</span></span>&#123;</span><br><span class="line">        vector&lt;string&gt; tokens;</span><br><span class="line">        string token;</span><br><span class="line">        <span class="function">istringstream <span class="title">tokenStream</span><span class="params">(s)</span></span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="built_in">getline</span>(tokenStream,token,delimiter))&#123;</span><br><span class="line">            tokens.<span class="built_in">push_back</span>(token);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> tokens;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æŒ‰å±‚çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</span></span><br><span class="line">    <span class="function">string <span class="title">serialize1</span><span class="params">(TreeNode* root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        string result;</span><br><span class="line">        queue&lt;TreeNode*&gt; q;</span><br><span class="line">        q.<span class="built_in">push</span>(root);</span><br><span class="line">        <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            TreeNode* node = q.<span class="built_in">front</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">if</span>(node!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">                result += <span class="built_in">to_string</span>(node-&gt;val)+<span class="string">&quot;,&quot;</span>;</span><br><span class="line">                q.<span class="built_in">push</span>(node-&gt;left);</span><br><span class="line">                q.<span class="built_in">push</span>(node-&gt;right);</span><br><span class="line">            &#125;<span class="keyword">else</span> result+=<span class="string">&quot;#,&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">TreeNode* <span class="title">deserialize1</span><span class="params">(string data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(data.<span class="built_in">empty</span>()) <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="function">stringstream <span class="title">ss</span><span class="params">(data)</span></span>;</span><br><span class="line">        string item;</span><br><span class="line">        <span class="built_in">getline</span>(ss,item,<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">        TreeNode* root = <span class="keyword">new</span> <span class="built_in">TreeNode</span>(<span class="built_in">stoi</span>(item));</span><br><span class="line">        queue&lt;TreeNode*&gt; q;</span><br><span class="line">        q.<span class="built_in">push</span>(root);</span><br><span class="line">        <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">            TreeNode* node = q.<span class="built_in">front</span>();</span><br><span class="line">            q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">getline</span>(ss,item,<span class="string">&#x27;,&#x27;</span>))&#123;</span><br><span class="line">                <span class="keyword">if</span>(item==<span class="string">&quot;#&quot;</span>)&#123;</span><br><span class="line">                    node-&gt;left=<span class="literal">nullptr</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    node-&gt;left = <span class="keyword">new</span> <span class="built_in">TreeNode</span>(<span class="built_in">stoi</span>(item));</span><br><span class="line">                    q.<span class="built_in">push</span>(node-&gt;left);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">getline</span>(ss,item,<span class="string">&#x27;,&#x27;</span>))&#123;</span><br><span class="line">                <span class="keyword">if</span>(item==<span class="string">&quot;#&quot;</span>)&#123;</span><br><span class="line">                    node-&gt;right=<span class="literal">nullptr</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    node-&gt;right=<span class="keyword">new</span> <span class="built_in">TreeNode</span>(<span class="built_in">stoi</span>(item));</span><br><span class="line">                    q.<span class="built_in">push</span>(node-&gt;right);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ©ç”¨å…ˆåºå’Œä¸­åºæ„é€ äºŒå‰æ ‘"><a href="#åˆ©ç”¨å…ˆåºå’Œä¸­åºæ„é€ äºŒå‰æ ‘" class="headerlink" title="åˆ©ç”¨å…ˆåºå’Œä¸­åºæ„é€ äºŒå‰æ ‘"></a>åˆ©ç”¨å…ˆåºå’Œä¸­åºæ„é€ äºŒå‰æ ‘</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å…ˆåºå’Œä¸­åºæ„é€ äºŒå‰æ ‘</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">TreeNode* <span class="title">buildTree</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; preorder, vector&lt;<span class="type">int</span>&gt;&amp; inorder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(preorder.<span class="built_in">empty</span>() || inorder.<span class="built_in">empty</span>() || preorder.<span class="built_in">size</span>() != inorder.<span class="built_in">size</span>()) <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">        unordered_map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; map;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;inorder.<span class="built_in">size</span>();i++) map[inorder[i]]=i;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">build</span>(preorder,<span class="number">0</span>,inorder.<span class="built_in">size</span>()<span class="number">-1</span>,inorder,<span class="number">0</span>,inorder.<span class="built_in">size</span>()<span class="number">-1</span>,map);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="function">TreeNode* <span class="title">build</span><span class="params">(<span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp; preorder,<span class="type">int</span> l1,<span class="type">int</span> r1,<span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp; inorder,<span class="type">int</span> l2,<span class="type">int</span> r2,</span></span></span><br><span class="line"><span class="params"><span class="function">    unordered_map&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&amp; map)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(l1&gt;r1) <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">        TreeNode* root = <span class="keyword">new</span> <span class="built_in">TreeNode</span>(preorder[l1]);</span><br><span class="line">        <span class="keyword">if</span>(l1==r1) <span class="keyword">return</span> root;</span><br><span class="line">        <span class="type">int</span> k=map[preorder[l1]];</span><br><span class="line">        root-&gt;left = <span class="built_in">build</span>(preorder,l1+<span class="number">1</span>,l1+k-l2,inorder,l2,k<span class="number">-1</span>,map);</span><br><span class="line">        root-&gt;right = <span class="built_in">build</span>(preorder,l1+k-l2+<span class="number">1</span>,r1,inorder,k+<span class="number">1</span>,r2,map);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="äºŒå‰æ ‘ä¸­LCAç®—æ³•"><a href="#äºŒå‰æ ‘ä¸­LCAç®—æ³•" class="headerlink" title="äºŒå‰æ ‘ä¸­LCAç®—æ³•"></a>äºŒå‰æ ‘ä¸­LCAç®—æ³•</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//LCAé—®é¢˜</span></span><br><span class="line"><span class="comment">//æ±‚äºŒå‰æ ‘ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">TreeNode* <span class="title">lowestCommonAncestor</span><span class="params">(TreeNode* root, TreeNode* p, TreeNode* q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="literal">nullptr</span> || root==p || root==q)&#123;</span><br><span class="line">        	<span class="keyword">return</span> root;</span><br><span class="line">		&#125;</span><br><span class="line">        TreeNode* l = <span class="built_in">lowestCommonAncestor</span>(root-&gt;left,p,q);</span><br><span class="line">        TreeNode* r = <span class="built_in">lowestCommonAncestor</span>(root-&gt;right,p,q);</span><br><span class="line">        <span class="keyword">if</span>(l!=<span class="literal">nullptr</span> &amp;&amp; r!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        	<span class="comment">//å·¦å³ä¸¤è¾¹éƒ½å·²ç»æ‰¾åˆ°</span></span><br><span class="line">        	<span class="keyword">return</span> root;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(l==<span class="literal">nullptr</span> &amp;&amp; r==<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        	<span class="comment">//å·¦å³ä¸¤è¾¹éƒ½æ²¡æœ‰æ‰¾åˆ°</span></span><br><span class="line">        	<span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åªæœ‰ä¸€è¾¹æ‰¾åˆ°äº†ï¼Œè¿”å›æ‰¾åˆ°çš„ä¸€è¾¹</span></span><br><span class="line">        <span class="keyword">return</span> l==<span class="literal">nullptr</span>?r:l;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//æ±‚çº¿ç´¢äºŒå‰æ ‘ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">TreeNode* <span class="title">lowestCommonAncestor</span><span class="params">(TreeNode* root, TreeNode* p, TreeNode* q)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// rootä»ä¸Šåˆ°ä¸‹</span></span><br><span class="line">		<span class="comment">// å¦‚æœå…ˆé‡åˆ°äº†pï¼Œè¯´æ˜pæ˜¯ç­”æ¡ˆ</span></span><br><span class="line">		<span class="comment">// å¦‚æœå…ˆé‡åˆ°äº†qï¼Œè¯´æ˜qæ˜¯ç­”æ¡ˆ</span></span><br><span class="line">		<span class="comment">// å¦‚æœrootåœ¨p~qçš„å€¼ä¹‹é—´ï¼Œä¸ç”¨ç®¡på’Œqè°å¤§è°å°ï¼Œåªè¦rootåœ¨ä¸­é—´ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„rootå°±æ˜¯ç­”æ¡ˆ</span></span><br><span class="line">		<span class="comment">// å¦‚æœrootåœ¨p~qçš„å€¼çš„å·¦ä¾§ï¼Œé‚£ä¹ˆrootå¾€å³ç§»åŠ¨</span></span><br><span class="line">		<span class="comment">// å¦‚æœrootåœ¨p~qçš„å€¼çš„å³ä¾§ï¼Œé‚£ä¹ˆrootå¾€å·¦ç§»åŠ¨</span></span><br><span class="line">        <span class="keyword">while</span>(root-&gt;val!=p-&gt;val &amp;&amp; root-&gt;val!=q-&gt;val)&#123;</span><br><span class="line">            <span class="keyword">if</span>(root-&gt;val &lt; <span class="built_in">max</span>(p-&gt;val,q-&gt;val) &amp;&amp; root-&gt;val &gt; <span class="built_in">min</span>(p-&gt;val,q-&gt;val))&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            root = root-&gt;val &lt; <span class="built_in">min</span>(q-&gt;val,p-&gt;val)?root-&gt;right:root-&gt;left;</span><br><span class="line">        &#125;<span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="æ ‘çŠ¶æ•°ç»„"><a href="#æ ‘çŠ¶æ•°ç»„" class="headerlink" title="æ ‘çŠ¶æ•°ç»„"></a>æ ‘çŠ¶æ•°ç»„</h3><h4 id="ä¸€ç»´"><a href="#ä¸€ç»´" class="headerlink" title="ä¸€ç»´"></a>ä¸€ç»´</h4><h5 id="å•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢"><a href="#å•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢" class="headerlink" title="å•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢"></a>å•ç‚¹ä¿®æ”¹åŒºé—´æŸ¥è¯¢</h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">5e5</span> + <span class="number">1</span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(N)</span></span>;</span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">low</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= n)&#123;</span><br><span class="line">        v1[i] += x;</span><br><span class="line">        i += <span class="built_in">low</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i)&#123;</span><br><span class="line">        ans += v1[i];</span><br><span class="line">        i -= <span class="built_in">low</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">range</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">get</span>(j) - <span class="built_in">get</span>(i - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, x; i &lt;= n; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line">        <span class="built_in">add</span>(i, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, op, x, y; i &lt; m; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; op &gt;&gt; x &gt;&gt; y;</span><br><span class="line">        <span class="keyword">if</span>(op == <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="built_in">add</span>(x, y);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">range</span>(x, y) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="åŒºé—´ä¿®æ”¹å•ç‚¹æŸ¥è¯¢"><a href="#åŒºé—´ä¿®æ”¹å•ç‚¹æŸ¥è¯¢" class="headerlink" title="åŒºé—´ä¿®æ”¹å•ç‚¹æŸ¥è¯¢"></a>åŒºé—´ä¿®æ”¹å•ç‚¹æŸ¥è¯¢</h5><p>åœ¨å•ç‚¹åŸºç¡€ä¸Šï¼Œåˆ©ç”¨ä¸€ç»´å·®åˆ†ï¼Œæœ€åæ±‚ä»0åˆ°içš„ç´¯åŠ å’Œå³ä¸ºiç‚¹çš„å€¼</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">5e5</span> + <span class="number">1</span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">long</span> <span class="type">long</span>&gt; <span class="title">v1</span><span class="params">(N, <span class="number">0</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">low</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= n)&#123;</span><br><span class="line">        v1[i] += x;</span><br><span class="line">        i += <span class="built_in">low</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">get</span><span class="params">(<span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i)&#123;</span><br><span class="line">        ans += v1[i];</span><br><span class="line">        i -= <span class="built_in">low</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">range</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">get</span>(j) - <span class="built_in">get</span>(i - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, x; i &lt;= n; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line">        <span class="built_in">add</span>(i, x);</span><br><span class="line">        <span class="built_in">add</span>(i + <span class="number">1</span>, -x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, op, x, y, z; i &lt; m; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; op;</span><br><span class="line">        <span class="keyword">if</span>(op == <span class="number">1</span>)&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y &gt;&gt; z;</span><br><span class="line">            <span class="built_in">add</span>(x, z);</span><br><span class="line">            <span class="built_in">add</span>(y + <span class="number">1</span>, -z);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cin &gt;&gt; x;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">range</span>(<span class="number">1</span>, x) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="èŒƒå›´ä¿®æ”¹èŒƒå›´æŸ¥è¯¢"><a href="#èŒƒå›´ä¿®æ”¹èŒƒå›´æŸ¥è¯¢" class="headerlink" title="èŒƒå›´ä¿®æ”¹èŒƒå›´æŸ¥è¯¢"></a>èŒƒå›´ä¿®æ”¹èŒƒå›´æŸ¥è¯¢</h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">1</span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">long</span> <span class="type">long</span>&gt; <span class="title">v1</span><span class="params">(N)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">long</span> <span class="type">long</span>&gt; <span class="title">v2</span><span class="params">(N)</span></span>;</span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">low</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> x, vector&lt;<span class="type">long</span> <span class="type">long</span>&gt; &amp; v)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(i &lt;= n)&#123;</span><br><span class="line">        v[i] += x;</span><br><span class="line">        i += <span class="built_in">low</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">get</span><span class="params">(<span class="type">int</span> i, vector&lt;<span class="type">long</span> <span class="type">long</span>&gt; &amp; v)</span></span>&#123;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i)&#123;</span><br><span class="line">        ans += v[i];</span><br><span class="line">        i -= <span class="built_in">low</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">range</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> j * <span class="built_in">get</span>(j, v1) - <span class="built_in">get</span>(j, v2) - ((i - <span class="number">1</span>) * <span class="built_in">get</span>(i - <span class="number">1</span>, v1) - <span class="built_in">get</span>(i <span class="number">-1</span>, v2));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">long</span> <span class="type">long</span> w)</span></span>&#123;</span><br><span class="line">    <span class="built_in">add</span>(x, w, v1);</span><br><span class="line">    <span class="built_in">add</span>(y + <span class="number">1</span>, -w, v1);</span><br><span class="line">    <span class="built_in">add</span>(x, (x - <span class="number">1</span>) * w, v2);</span><br><span class="line">    <span class="built_in">add</span>(y + <span class="number">1</span>, - y * w, v2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, x; i &lt;= n; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line">        <span class="built_in">add</span>(i, i, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, op, x, y, z; i &lt; m; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; op;</span><br><span class="line">        <span class="keyword">if</span>(op == <span class="number">1</span>)&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y &gt;&gt; z;</span><br><span class="line">            <span class="built_in">add</span>(x, y, z);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">range</span>(x,  y) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="äºŒç»´"><a href="#äºŒç»´" class="headerlink" title="äºŒç»´"></a>äºŒç»´</h4><h5 id="å•ç‚¹ä¿®æ”¹èŒƒå›´æŸ¥è¯¢"><a href="#å•ç‚¹ä¿®æ”¹èŒƒå›´æŸ¥è¯¢" class="headerlink" title="å•ç‚¹ä¿®æ”¹èŒƒå›´æŸ¥è¯¢"></a>å•ç‚¹ä¿®æ”¹èŒƒå›´æŸ¥è¯¢</h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">low</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> i &amp; -i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; &amp; bit, <span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> w, <span class="type">int</span> n, <span class="type">int</span> m)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = x; i &lt;= n; i += <span class="built_in">low</span>(i)) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = y; j &lt;= m; j += <span class="built_in">low</span>(j)) &#123;</span><br><span class="line">            bit[i][j] += w;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; &amp;bit, <span class="type">int</span> x, <span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = x; i &gt; <span class="number">0</span>; i -= <span class="built_in">low</span>(i)) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = y; j &gt; <span class="number">0</span>; j -= <span class="built_in">low</span>(j)) &#123;</span><br><span class="line">            ans += bit[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; &amp;bit, <span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x1 &gt; x2 || y1 &gt; y2) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">query</span>(bit, x2, y2) - <span class="built_in">query</span>(bit, x1 - <span class="number">1</span>, y2) - <span class="built_in">query</span>(bit, x2, y1 - <span class="number">1</span>) + <span class="built_in">query</span>(bit, x1 - <span class="number">1</span>, y1 - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">v1</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m + <span class="number">1</span>, <span class="number">0</span>)); <span class="comment">// åŸå§‹æ•°ç»„</span></span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">bit</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m + <span class="number">1</span>, <span class="number">0</span>)); <span class="comment">// æ ‘çŠ¶æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j++) &#123;</span><br><span class="line">            cin &gt;&gt; v1[i][j];</span><br><span class="line">            <span class="built_in">add</span>(bit, i, j, v1[i][j], n, m);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> q;</span><br><span class="line">    cin &gt;&gt; q;</span><br><span class="line">    <span class="type">int</span> type;</span><br><span class="line">    <span class="type">int</span> x, y, w;</span><br><span class="line">    <span class="type">int</span> diff;</span><br><span class="line">    <span class="type">int</span> x1, y1, x2, y2;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        cin &gt;&gt; type;</span><br><span class="line">        <span class="keyword">if</span> (type == <span class="number">1</span>) &#123; </span><br><span class="line">            cin &gt;&gt; x &gt;&gt; y &gt;&gt; w;</span><br><span class="line">            diff = w - v1[x][y];</span><br><span class="line">            v1[x][y] = w;</span><br><span class="line">            <span class="built_in">add</span>(bit, x, y, diff, n, m);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type == <span class="number">2</span>) &#123;</span><br><span class="line">            cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">get</span>(bit, x1, y1, x2, y2) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// cin &gt;&gt; t;</span></span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="èŒƒå›´æŸ¥è¯¢èŒƒå›´ä¿®æ”¹"><a href="#èŒƒå›´æŸ¥è¯¢èŒƒå›´ä¿®æ”¹" class="headerlink" title="èŒƒå›´æŸ¥è¯¢èŒƒå›´ä¿®æ”¹"></a>èŒƒå›´æŸ¥è¯¢èŒƒå›´ä¿®æ”¹</h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2050</span>;</span><br><span class="line"><span class="type">int</span> bit1[N][N];</span><br><span class="line"><span class="type">int</span> bit2[N][N];</span><br><span class="line"><span class="type">int</span> bit3[N][N];</span><br><span class="line"><span class="type">int</span> bit4[N][N];</span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> a, b, c, d, w;</span><br><span class="line"><span class="type">int</span> v1, v2, v3, v4;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">low</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">    v1 = v;</span><br><span class="line">    v2 = x * v;</span><br><span class="line">    v3 = y * v;</span><br><span class="line">    v4 = x * y * v;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = x; i &lt;= n; i += <span class="built_in">low</span>(i))&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = y; j &lt;= m; j += <span class="built_in">low</span>(j))&#123;</span><br><span class="line">            bit1[i][j] += v1;</span><br><span class="line">            bit2[i][j] += v2;</span><br><span class="line">            bit3[i][j] += v3;</span><br><span class="line">            bit4[i][j] += v4;</span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = x; i; i -= <span class="built_in">low</span>(i))&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = y; j; j -= <span class="built_in">low</span>(j))&#123;</span><br><span class="line">            ans += (x + <span class="number">1</span>) * (y + <span class="number">1</span>) * bit1[i][j] - (y + <span class="number">1</span>) * bit2[i][j] - (x + <span class="number">1</span>) * bit3[i][j] + bit4[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2, <span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">    <span class="built_in">add</span>(x1, y1, v);</span><br><span class="line">    <span class="built_in">add</span>(x2 + <span class="number">1</span>, y2 + <span class="number">1</span>, v);</span><br><span class="line">    <span class="built_in">add</span>(x1, y2 + <span class="number">1</span>, - v);</span><br><span class="line">    <span class="built_in">add</span>(x2 + <span class="number">1</span>, y1, - v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">get</span>(x2, y2) + <span class="built_in">get</span>(x1 - <span class="number">1</span>, y1 - <span class="number">1</span>) - <span class="built_in">get</span>(x1 - <span class="number">1</span>, y2) - <span class="built_in">get</span>(x2, y1 - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(<span class="type">char</span> C)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(C == <span class="string">&#x27;L&#x27;</span>)&#123;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c &gt;&gt; d &gt;&gt; w;</span><br><span class="line">        <span class="built_in">add</span>(a, b, c, d, w);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(C != <span class="string">&#x27;X&#x27;</span>)&#123;</span><br><span class="line">        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c &gt;&gt; d;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">get</span>(a, b, c, d) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="type">char</span> C;</span><br><span class="line">    <span class="keyword">while</span> (cin &gt;&gt; C) &#123;</span><br><span class="line">        <span class="built_in">solve</span>(C);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="çº¿æ®µæ ‘"><a href="#çº¿æ®µæ ‘" class="headerlink" title="çº¿æ®µæ ‘"></a>çº¿æ®µæ ‘</h3><h4 id="èŒƒå›´å¢åŠ èŒƒå›´æŸ¥è¯¢ç´¯åŠ å’Œ"><a href="#èŒƒå›´å¢åŠ èŒƒå›´æŸ¥è¯¢ç´¯åŠ å’Œ" class="headerlink" title="èŒƒå›´å¢åŠ èŒƒå›´æŸ¥è¯¢ç´¯åŠ å’Œ"></a>èŒƒå›´å¢åŠ èŒƒå›´æŸ¥è¯¢ç´¯åŠ å’Œ</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// https://www.luogu.com.cn/problem/P3372</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>) -&gt; ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// cin &gt;&gt; t;</span></span><br><span class="line">    <span class="keyword">while</span> (t--)&#123;</span><br><span class="line">		<span class="type">int</span> n, q;</span><br><span class="line">		cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">		<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">sum</span><span class="params">((n &lt;&lt; <span class="number">2</span>) + <span class="number">1</span>)</span>, <span class="title">add</span><span class="params">((n &lt;&lt; <span class="number">2</span>) + <span class="number">1</span>)</span></span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">			cin &gt;&gt; v1[i];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">auto</span> build = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> i, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">void</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">				sum[i] = v1[l];</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">				<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span>, l, mid);</span><br><span class="line">				<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">				sum[i] = sum[i &lt;&lt; <span class="number">1</span>] + sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">			&#125;</span><br><span class="line">			add[i] = <span class="number">0</span>;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">auto</span> up = [&amp;](<span class="type">int</span> i)&#123;</span><br><span class="line">			sum[i] = sum[i &lt;&lt; <span class="number">1</span>] + sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">auto</span> lazy = [&amp;](<span class="type">int</span> i, <span class="type">int</span> val, <span class="type">int</span> len)&#123;</span><br><span class="line">			sum[i] += val * len;</span><br><span class="line">			add[i] += val;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">auto</span> down = [&amp;](<span class="type">int</span> i, <span class="type">int</span> lenl, <span class="type">int</span> lenr)&#123;</span><br><span class="line">			<span class="keyword">if</span>(add[i] == <span class="number">0</span>)&#123;</span><br><span class="line">				<span class="keyword">return</span> ;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">lazy</span>(i &lt;&lt; <span class="number">1</span>, add[i], lenl);</span><br><span class="line">			<span class="built_in">lazy</span>(i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, add[i], lenr);</span><br><span class="line">			add[i] = <span class="number">0</span>;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">auto</span> add1 = [&amp;](<span class="keyword">auto</span> &amp;&amp; f,<span class="type">int</span> i, <span class="type">int</span> val, <span class="type">int</span> basel, <span class="type">int</span> baser, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">void</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(basel &lt;= l &amp;&amp; baser &gt;= r)&#123;</span><br><span class="line">				<span class="built_in">lazy</span>(i, val, r - l + <span class="number">1</span>);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">				<span class="built_in">down</span>(i, mid - l + <span class="number">1</span>, r - mid);</span><br><span class="line">				<span class="keyword">if</span>(basel &lt;= mid)&#123;</span><br><span class="line">					<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span>, val, basel, baser, l, mid);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(baser &gt;= mid + <span class="number">1</span>)&#123;</span><br><span class="line">					<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, val, basel ,baser, mid + <span class="number">1</span>, r);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="built_in">up</span>(i);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="built_in">build</span>(build, <span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">		<span class="keyword">auto</span> query = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> i, <span class="type">int</span> basel, <span class="type">int</span> baser, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">			<span class="keyword">if</span>(basel &lt;= l &amp;&amp; baser &gt;= r)&#123;</span><br><span class="line">				<span class="keyword">return</span> sum[i];</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">				<span class="built_in">down</span>(i, mid - l + <span class="number">1</span>, r - mid);</span><br><span class="line">				<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">				<span class="keyword">if</span>(basel &lt;= mid)&#123;</span><br><span class="line">					ans += <span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span>, basel, baser, l, mid);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(baser &gt;= mid + <span class="number">1</span>)&#123;</span><br><span class="line">					ans += <span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, basel, baser, mid + <span class="number">1</span>, r);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> ans;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; q; i ++)&#123;</span><br><span class="line">			<span class="type">int</span> op;</span><br><span class="line">			cin &gt;&gt; op;</span><br><span class="line">			<span class="keyword">if</span>(op == <span class="number">1</span>)&#123;</span><br><span class="line">				<span class="type">int</span> l, r, val;</span><br><span class="line">				cin &gt;&gt; l &gt;&gt; r &gt;&gt; val;</span><br><span class="line">				<span class="built_in">add1</span>(add1, <span class="number">1</span>, val, l , r, <span class="number">1</span>, n);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="type">int</span> l, r;</span><br><span class="line">				cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">				cout &lt;&lt; <span class="built_in">query</span>(query, <span class="number">1</span>, l, r, <span class="number">1</span>, n) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æœ‰ä¼˜å…ˆçº§è°ƒæ•´çš„å¤šèŒƒå›´ä¿®æ”¹ä»»åŠ¡"><a href="#æœ‰ä¼˜å…ˆçº§è°ƒæ•´çš„å¤šèŒƒå›´ä¿®æ”¹ä»»åŠ¡" class="headerlink" title="æœ‰ä¼˜å…ˆçº§è°ƒæ•´çš„å¤šèŒƒå›´ä¿®æ”¹ä»»åŠ¡"></a>æœ‰ä¼˜å…ˆçº§è°ƒæ•´çš„å¤šèŒƒå›´ä¿®æ”¹ä»»åŠ¡</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// https://www.luogu.com.cn/problem/P1253</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>) -&gt; ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// cin &gt;&gt; t;</span></span><br><span class="line">    <span class="keyword">while</span> (t--)&#123;</span><br><span class="line">		 <span class="type">int</span> n, q;</span><br><span class="line">		 cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">		 <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">change</span><span class="params">((n &lt;&lt; <span class="number">2</span>))</span>, <span class="title">max1</span><span class="params">((n &lt;&lt; <span class="number">2</span>))</span>, <span class="title">add</span><span class="params">((n &lt;&lt; <span class="number">2</span>))</span></span>;</span><br><span class="line">		 <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">has</span><span class="params">((n &lt;&lt; <span class="number">2</span>))</span></span>;</span><br><span class="line">		 <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">		 	cin &gt;&gt; v1[i];</span><br><span class="line">		 &#125;</span><br><span class="line">		 <span class="keyword">auto</span> biuld = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> i, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">		 	<span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">			 	 max1[i] = v1[l];</span><br><span class="line">		 	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		 		<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">		 		<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span>, l, mid);</span><br><span class="line">		 		<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">		 		max1[i] = <span class="built_in">max</span>(max1[i &lt;&lt; <span class="number">1</span>], max1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]);</span><br><span class="line">		 	&#125;</span><br><span class="line">		 	has[i] = <span class="literal">false</span>;</span><br><span class="line">		 	add[i] = <span class="number">0</span>;</span><br><span class="line">		 &#125;;</span><br><span class="line">		 <span class="built_in">biuld</span>(biuld, <span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">		 <span class="keyword">auto</span> up = [&amp;](<span class="type">int</span> i) &#123;</span><br><span class="line">		 	max1[i] = <span class="built_in">max</span>(max1[i &lt;&lt; <span class="number">1</span>], max1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]);</span><br><span class="line">		 &#125;;</span><br><span class="line">		 <span class="keyword">auto</span> lazyadd = [&amp;](<span class="type">int</span> i, <span class="type">int</span> val) &#123;</span><br><span class="line">		 	max1[i] += val;</span><br><span class="line">		 	add[i] += val;</span><br><span class="line">		 &#125;;</span><br><span class="line">		 <span class="keyword">auto</span> lazyset = [&amp;](<span class="type">int</span> i, <span class="type">int</span> val) &#123;</span><br><span class="line">		 	max1[i] = val;</span><br><span class="line">		 	change[i] = val;</span><br><span class="line">		 	add[i] = <span class="number">0</span>;</span><br><span class="line">		 	has[i] = <span class="literal">true</span>;</span><br><span class="line">		 &#125;;</span><br><span class="line">		 <span class="keyword">auto</span> down = [&amp;](<span class="type">int</span> i) &#123;</span><br><span class="line">			<span class="keyword">if</span>(has[i])&#123;</span><br><span class="line">				<span class="built_in">lazyset</span>(i &lt;&lt; <span class="number">1</span>, change[i]);</span><br><span class="line">				<span class="built_in">lazyset</span>(i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, change[i]);</span><br><span class="line">				has[i] = <span class="literal">false</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(add[i])&#123;</span><br><span class="line">				<span class="built_in">lazyadd</span>(i &lt;&lt; <span class="number">1</span>, add[i]);</span><br><span class="line">				<span class="built_in">lazyadd</span>(i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, add[i]);</span><br><span class="line">				add[i] = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		 &#125;;</span><br><span class="line">		 <span class="keyword">auto</span> add1 = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> i, <span class="type">int</span> val, <span class="type">int</span> basel, <span class="type">int</span> baser, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">		 	<span class="keyword">if</span>(basel &lt;= l &amp;&amp; baser &gt;= r)&#123;</span><br><span class="line">		 		<span class="built_in">lazyadd</span>(i, val);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">				<span class="built_in">down</span>(i);</span><br><span class="line">				<span class="keyword">if</span>(basel &lt;= mid)&#123;</span><br><span class="line">					<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span>, val, basel, baser, l, mid);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(baser &gt; mid)&#123;</span><br><span class="line">					<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, val, basel, baser, mid + <span class="number">1</span>, r);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="built_in">up</span>(i);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">auto</span> set = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> i, <span class="type">int</span> val, <span class="type">int</span> basel, <span class="type">int</span> baser, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">			<span class="keyword">if</span>(basel &lt;= l &amp;&amp; baser &gt;= r)&#123;</span><br><span class="line">				<span class="built_in">lazyset</span>(i, val);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">				<span class="built_in">down</span>(i);</span><br><span class="line">				<span class="keyword">if</span>(basel &lt;= mid)&#123;</span><br><span class="line">					<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span>, val, basel, baser, l, mid);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(baser &gt; mid)&#123;</span><br><span class="line">					<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, val, basel, baser, mid + <span class="number">1</span>, r);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="built_in">up</span>(i);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">auto</span> query = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> i, <span class="type">int</span> basel, <span class="type">int</span> baser, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(basel &lt;= l &amp;&amp; baser &gt;= r)&#123;</span><br><span class="line">				<span class="keyword">return</span> max1[i];</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">				<span class="built_in">down</span>(i);</span><br><span class="line">				<span class="type">int</span> ans = <span class="number">-1e18</span>;</span><br><span class="line">				<span class="keyword">if</span>(basel &lt;= mid)&#123;</span><br><span class="line">					ans = <span class="built_in">max</span>(ans, <span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span>, basel, baser, l, mid));</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(baser &gt; mid)&#123;</span><br><span class="line">					ans = <span class="built_in">max</span>(ans, <span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, basel, baser, mid + <span class="number">1</span>, r));</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> ans;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; q; i ++)&#123;</span><br><span class="line">			<span class="type">int</span> op;</span><br><span class="line">			cin &gt;&gt; op;</span><br><span class="line">			<span class="type">int</span> l, r;</span><br><span class="line">			cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">			<span class="keyword">if</span>(op == <span class="number">2</span>)&#123;</span><br><span class="line">				<span class="type">int</span> x;</span><br><span class="line">				cin &gt;&gt; x;</span><br><span class="line">				<span class="built_in">add1</span>(add1, <span class="number">1</span>, x, l, r, <span class="number">1</span>, n);</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">1</span>)&#123;</span><br><span class="line">				<span class="type">int</span> x;</span><br><span class="line">				cin &gt;&gt; x;</span><br><span class="line">				<span class="built_in">set</span>(set, <span class="number">1</span>, x, l, r, <span class="number">1</span>, n);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				cout &lt;&lt; <span class="built_in">query</span>(query, <span class="number">1</span>, l, r, <span class="number">1</span>, n) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç¦»æ•£åŒ–"><a href="#ç¦»æ•£åŒ–" class="headerlink" title="ç¦»æ•£åŒ–"></a>ç¦»æ•£åŒ–</h4><p>ç¦»æ•£åŒ–ä¹‹åè¦æ³¨æ„é—´éš™ï¼Œå¦‚è¦†ç›–é—®é¢˜ï¼Œè¦åœ¨ç¦»æ•£åŒ–ä¹‹åçš„ä¸¤ä¸ªå·®å€¼ä¸ä¸ºä¸€içš„æ•°æ®ä¸­é—´æ·»åŠ ä¸€ä¸ªæ•°</p>
<h4 id="åŒºé—´æœ€å€¼å’Œå†å²æœ€å€¼"><a href="#åŒºé—´æœ€å€¼å’Œå†å²æœ€å€¼" class="headerlink" title="åŒºé—´æœ€å€¼å’Œå†å²æœ€å€¼"></a>åŒºé—´æœ€å€¼å’Œå†å²æœ€å€¼</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// https://www.luogu.com.cn/problem/P6242</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// cin &gt;&gt; t;</span></span><br><span class="line">    <span class="keyword">while</span>(t--)&#123;</span><br><span class="line">        <span class="type">int</span> n, m;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">max1</span><span class="params">(n&lt;&lt;<span class="number">2</span>)</span>,    <span class="comment">// åŒºé—´å½“å‰æœ€å¤§å€¼</span></span></span><br><span class="line"><span class="function">                    <span class="title">sec</span><span class="params">(n&lt;&lt;<span class="number">2</span>)</span>,     <span class="comment">// åŒºé—´ä¸¥æ ¼æ¬¡å¤§å€¼</span></span></span><br><span class="line"><span class="function">                    <span class="title">cnt</span><span class="params">(n&lt;&lt;<span class="number">2</span>)</span>,     <span class="comment">// åŒºé—´ç­‰äºæœ€å¤§å€¼çš„å…ƒç´ ä¸ªæ•°</span></span></span><br><span class="line"><span class="function">                    <span class="title">sum</span><span class="params">(n&lt;&lt;<span class="number">2</span>)</span>,     <span class="comment">// åŒºé—´å…ƒç´ å’Œ</span></span></span><br><span class="line"><span class="function">                    <span class="title">his</span><span class="params">(n&lt;&lt;<span class="number">2</span>)</span>,     <span class="comment">// åŒºé—´å†å²æœ€å¤§å€¼ï¼ˆæ›¾ç»å‡ºç°è¿‡çš„æœ€å¤§å€¼ï¼‰</span></span></span><br><span class="line"><span class="function">                    <span class="title">add1</span><span class="params">(n&lt;&lt;<span class="number">2</span>)</span>,    <span class="comment">// æ‡’æ ‡è®° Aï¼šå¯¹â€œå½“å‰æœ€å¤§å€¼å…ƒç´ â€åšåŠ æ³•</span></span></span><br><span class="line"><span class="function">                    <span class="title">add2</span><span class="params">(n&lt;&lt;<span class="number">2</span>)</span>,    <span class="comment">// æ‡’æ ‡è®° Bï¼šå¯¹â€œéæœ€å¤§å€¼å…ƒç´ â€åšåŠ æ³•</span></span></span><br><span class="line"><span class="function">                    <span class="title">adds1</span><span class="params">(n&lt;&lt;<span class="number">2</span>)</span>,   <span class="comment">// å†å²æœ€å¤§å€¼æ‡’æ ‡è®° A</span></span></span><br><span class="line"><span class="function">                    <span class="title">adds2</span><span class="params">(n&lt;&lt;<span class="number">2</span>)</span></span>;   <span class="comment">// å†å²æœ€å¤§å€¼æ‡’æ ‡è®° B</span></span><br><span class="line">        <span class="keyword">auto</span> up = [&amp;](<span class="type">int</span> i)&#123;</span><br><span class="line">            sum[i] = sum[i&lt;&lt;<span class="number">1</span>] + sum[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">            his[i] = <span class="built_in">max</span>(his[i&lt;&lt;<span class="number">1</span>], his[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">            max1[i] = <span class="built_in">max</span>(max1[i&lt;&lt;<span class="number">1</span>], max1[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">            <span class="comment">// åˆå¹¶ cnt ä¸ sec</span></span><br><span class="line">            <span class="keyword">if</span>(max1[i&lt;&lt;<span class="number">1</span>] == max1[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>])&#123;</span><br><span class="line">                cnt[i] = cnt[i&lt;&lt;<span class="number">1</span>] + cnt[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">                sec[i] = <span class="built_in">max</span>(sec[i&lt;&lt;<span class="number">1</span>], sec[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(max1[i&lt;&lt;<span class="number">1</span>] &gt; max1[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>])&#123;</span><br><span class="line">                cnt[i] = cnt[i&lt;&lt;<span class="number">1</span>];</span><br><span class="line">                sec[i] = <span class="built_in">max</span>(sec[i&lt;&lt;<span class="number">1</span>], max1[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                cnt[i] = cnt[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">                sec[i] = <span class="built_in">max</span>(sec[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>], max1[i&lt;&lt;<span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">auto</span> build = [&amp;](<span class="keyword">auto</span>&amp;&amp; self, <span class="type">int</span> i, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">                <span class="type">int</span> x;</span><br><span class="line">                cin &gt;&gt; x;</span><br><span class="line">                max1[i] = sum[i] = his[i] = x;  <span class="comment">// å½“å‰å€¼ã€åŒºé—´å’Œå€¼ã€å†å²æœ€å¤§å‡ä¸º x</span></span><br><span class="line">                cnt[i] = <span class="number">1</span>;                     <span class="comment">// åªæœ‰ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">                sec[i] = LLONG_MIN / <span class="number">2</span>;         <span class="comment">// æ¬¡å¤§å€¼è®¾ä¸º -INFï¼ˆç”¨å¾ˆå°çš„æ•°ï¼‰</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">self</span>(self, i&lt;&lt;<span class="number">1</span>, l, mid);</span><br><span class="line">                <span class="built_in">self</span>(self, i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, mid+<span class="number">1</span>, r);</span><br><span class="line">                <span class="built_in">up</span>(i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ‡’æ ‡è®°åˆå§‹ä¸º 0</span></span><br><span class="line">            add1[i] = add2[i] = adds1[i] = adds2[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">build</span>(build, <span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">        <span class="comment">// æ ¸å¿ƒæ‡’æ ‡è®°ä¸‹å‘å‡½æ•°</span></span><br><span class="line">        <span class="comment">// val1: åŠ åˆ°â€œå½“å‰æœ€å¤§å€¼å…ƒç´ â€ä¸Šçš„å¢é‡</span></span><br><span class="line">        <span class="comment">// val2: åŠ åˆ°â€œéæœ€å¤§å€¼å…ƒç´ â€ä¸Šçš„å¢é‡</span></span><br><span class="line">        <span class="comment">// val3/val4: ç”¨äºæ›´æ–°å†å²æœ€å¤§å€¼çš„å¢é‡</span></span><br><span class="line">        <span class="comment">// len: æœ¬åŒºé—´é•¿åº¦</span></span><br><span class="line">        <span class="keyword">auto</span> lazy = [&amp;](<span class="type">int</span> i, <span class="type">int</span> val1, <span class="type">int</span> val2, <span class="type">int</span> val3, <span class="type">int</span> val4, <span class="type">int</span> len)&#123;</span><br><span class="line">            <span class="comment">// æ›´æ–°å†å²æœ€å¤§å€¼</span></span><br><span class="line">            his[i] = <span class="built_in">max</span>(his[i], max1[i] + val3);</span><br><span class="line">            <span class="comment">// æ›´æ–°å­æ ‘çš„å†å²æ‡’æ ‡è®°</span></span><br><span class="line">            adds1[i] = <span class="built_in">max</span>(adds1[i], add1[i] + val3);</span><br><span class="line">            adds2[i] = <span class="built_in">max</span>(adds2[i], add2[i] + val4);</span><br><span class="line">            <span class="comment">// åŒºé—´å’Œæ›´æ–°</span></span><br><span class="line">            sum[i] += val1 * cnt[i] + val2 * (len - cnt[i]);</span><br><span class="line">            <span class="comment">// æ›´æ–°â€œå½“å‰æœ€å¤§å€¼â€ä¸â€œéæœ€å¤§å€¼â€æ‡’æ ‡è®°</span></span><br><span class="line">            add1[i] += val1;</span><br><span class="line">            add2[i] += val2;</span><br><span class="line">            <span class="comment">// æ›´æ–°å½“å‰æœ€å¤§å€¼</span></span><br><span class="line">            max1[i] += val1;</span><br><span class="line">            <span class="comment">// æ¬¡å¤§å€¼ä¹Ÿéœ€åŠ  val2ï¼ˆè‹¥ä¸å­˜åœ¨åˆ™ä¿æŒ -INFï¼‰</span></span><br><span class="line">            <span class="keyword">if</span>(sec[i] &gt; LLONG_MIN/<span class="number">2</span>) sec[i] += val2;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// ä¸‹æ¨å‡½æ•°ï¼šå°† i èŠ‚ç‚¹çš„æ‡’æ ‡è®°ä¼ é€’ç»™å·¦å³å­èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">auto</span> down = [&amp;](<span class="type">int</span> i, <span class="type">int</span> lenL, <span class="type">int</span> lenR)&#123;</span><br><span class="line">            <span class="comment">// å·¦å³å­èŠ‚ç‚¹æ–°çš„â€œå½“å‰æœ€å¤§â€å€¼</span></span><br><span class="line">            <span class="type">int</span> tL = max1[i&lt;&lt;<span class="number">1</span>], tR = max1[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>];</span><br><span class="line">            <span class="comment">// çˆ¶èŠ‚ç‚¹æœ€é«˜å€¼</span></span><br><span class="line">            <span class="type">int</span> mx = <span class="built_in">max</span>(max1[i&lt;&lt;<span class="number">1</span>], max1[i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">            <span class="comment">// å·¦å­æ ‘</span></span><br><span class="line">            <span class="keyword">if</span>(tL == mx)&#123;</span><br><span class="line">                <span class="comment">// å·¦å­æ ‘ä¸­æœ‰çˆ¶åŒºé—´æœ€å¤§å€¼å…ƒç´ </span></span><br><span class="line">                <span class="built_in">lazy</span>(i&lt;&lt;<span class="number">1</span>, add1[i], add2[i], adds1[i], adds2[i], lenL);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å·¦å­æ ‘ä¸­åªæœ‰â€œéæœ€å¤§å€¼â€å…ƒç´ </span></span><br><span class="line">                <span class="built_in">lazy</span>(i&lt;&lt;<span class="number">1</span>, add2[i], add2[i], adds2[i], adds2[i], lenL);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å³å­æ ‘ï¼ˆåŒç†ï¼‰</span></span><br><span class="line">            <span class="keyword">if</span>(tR == mx)&#123;</span><br><span class="line">                <span class="built_in">lazy</span>(i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, add1[i], add2[i], adds1[i], adds2[i], lenR);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">lazy</span>(i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, add2[i], add2[i], adds2[i], adds2[i], lenR);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ¸…ç©ºçˆ¶èŠ‚ç‚¹æ‡’æ ‡è®°</span></span><br><span class="line">            add1[i] = add2[i] = adds1[i] = adds2[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// åŒºé—´åŠ æ³• [bl,br] å…¨åŠ  val</span></span><br><span class="line">        <span class="keyword">auto</span> addRange = [&amp;](<span class="keyword">auto</span>&amp;&amp; self, <span class="type">int</span> i, <span class="type">int</span> bl, <span class="type">int</span> br, <span class="type">int</span> val, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(bl &lt;= l &amp;&amp; r &lt;= br)&#123;</span><br><span class="line">                <span class="comment">// ç»Ÿä¸€æ‰“æ‡’æ ‡è®°ï¼Œval1=val2=val3=val4=val</span></span><br><span class="line">                <span class="built_in">lazy</span>(i, val, val, val, val, r-l+<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">down</span>(i, mid-l+<span class="number">1</span>, r-mid);</span><br><span class="line">                <span class="keyword">if</span>(bl &lt;= mid)      <span class="built_in">self</span>(self, i&lt;&lt;<span class="number">1</span>, bl, br, val, l, mid);</span><br><span class="line">                <span class="keyword">if</span>(br &gt; mid)       <span class="built_in">self</span>(self, i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, bl, br, val, mid+<span class="number">1</span>, r);</span><br><span class="line">                <span class="built_in">up</span>(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// åŒºé—´ chminï¼šæŠŠåŒºé—´å†…æ‰€æœ‰å¤§äº val çš„å€¼é™åˆ° val</span></span><br><span class="line">        <span class="keyword">auto</span> chminRange = [&amp;](<span class="keyword">auto</span>&amp;&amp; self, <span class="type">int</span> i, <span class="type">int</span> bl, <span class="type">int</span> br, <span class="type">int</span> val, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(max1[i] &lt;= val) <span class="keyword">return</span>;  <span class="comment">// æœ¬åŒºé—´æœ€å¤§å€¼å·² â‰¤ valï¼Œæ— éœ€æ“ä½œ</span></span><br><span class="line">            <span class="keyword">if</span>(bl &lt;= l &amp;&amp; r &lt;= br &amp;&amp; sec[i] &lt; val)&#123;</span><br><span class="line">                <span class="comment">// å…¨åŒºé—´æœ€å¤§å€¼éƒ½å¤§äº valï¼Œä¸”æ¬¡å¤§å€¼ &lt; val</span></span><br><span class="line">                <span class="comment">// åªéœ€æŠŠâ€œæœ€å¤§å€¼å…ƒç´ â€é™åˆ° val</span></span><br><span class="line">                <span class="built_in">lazy</span>(i, val-max1[i], <span class="number">0</span>, val-max1[i], <span class="number">0</span>, r-l+<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">down</span>(i, mid-l+<span class="number">1</span>, r-mid);</span><br><span class="line">                <span class="keyword">if</span>(bl &lt;= mid)      <span class="built_in">self</span>(self, i&lt;&lt;<span class="number">1</span>, bl, br, val, l, mid);</span><br><span class="line">                <span class="keyword">if</span>(br &gt; mid)       <span class="built_in">self</span>(self, i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, bl, br, val, mid+<span class="number">1</span>, r);</span><br><span class="line">                <span class="built_in">up</span>(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// åŒºé—´æ±‚å’Œ</span></span><br><span class="line">        <span class="keyword">auto</span> querySum = [&amp;](<span class="keyword">auto</span>&amp;&amp; self, <span class="type">int</span> i, <span class="type">int</span> bl, <span class="type">int</span> br, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(bl &lt;= l &amp;&amp; r &lt;= br)&#123;</span><br><span class="line">                <span class="keyword">return</span> sum[i];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">down</span>(i, mid-l+<span class="number">1</span>, r-mid);</span><br><span class="line">                <span class="type">int</span> res = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span>(bl &lt;= mid)    res += <span class="built_in">self</span>(self, i&lt;&lt;<span class="number">1</span>, bl, br, l, mid);</span><br><span class="line">                <span class="keyword">if</span>(br &gt; mid)     res += <span class="built_in">self</span>(self, i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, bl, br, mid+<span class="number">1</span>, r);</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// åŒºé—´æœ€å¤§å€¼</span></span><br><span class="line">        <span class="keyword">auto</span> queryMax = [&amp;](<span class="keyword">auto</span>&amp;&amp; self, <span class="type">int</span> i, <span class="type">int</span> bl, <span class="type">int</span> br, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(bl &lt;= l &amp;&amp; r &lt;= br)&#123;</span><br><span class="line">                <span class="keyword">return</span> max1[i];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">down</span>(i, mid-l+<span class="number">1</span>, r-mid);</span><br><span class="line">                <span class="type">int</span> res = LLONG_MIN/<span class="number">2</span>;</span><br><span class="line">                <span class="keyword">if</span>(bl &lt;= mid)    res = <span class="built_in">max</span>(res, <span class="built_in">self</span>(self, i&lt;&lt;<span class="number">1</span>, bl, br, l, mid));</span><br><span class="line">                <span class="keyword">if</span>(br &gt; mid)     res = <span class="built_in">max</span>(res, <span class="built_in">self</span>(self, i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, bl, br, mid+<span class="number">1</span>, r));</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// åŒºé—´å†å²æœ€å¤§å€¼</span></span><br><span class="line">        <span class="keyword">auto</span> queryHis = [&amp;](<span class="keyword">auto</span>&amp;&amp; self, <span class="type">int</span> i, <span class="type">int</span> bl, <span class="type">int</span> br, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(bl &lt;= l &amp;&amp; r &lt;= br)&#123;</span><br><span class="line">                <span class="keyword">return</span> his[i];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">down</span>(i, mid-l+<span class="number">1</span>, r-mid);</span><br><span class="line">                <span class="type">int</span> res = LLONG_MIN/<span class="number">2</span>;</span><br><span class="line">                <span class="keyword">if</span>(bl &lt;= mid)    res = <span class="built_in">max</span>(res, <span class="built_in">self</span>(self, i&lt;&lt;<span class="number">1</span>, bl, br, l, mid));</span><br><span class="line">                <span class="keyword">if</span>(br &gt; mid)     res = <span class="built_in">max</span>(res, <span class="built_in">self</span>(self, i&lt;&lt;<span class="number">1</span>|<span class="number">1</span>, bl, br, mid+<span class="number">1</span>, r));</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// å¤„ç† m æ¬¡æ“ä½œ</span></span><br><span class="line">        <span class="keyword">while</span>(m--)&#123;</span><br><span class="line">            <span class="type">int</span> op, l, r;</span><br><span class="line">            cin &gt;&gt; op &gt;&gt; l &gt;&gt; r;</span><br><span class="line">            <span class="keyword">if</span>(op == <span class="number">1</span>)&#123;</span><br><span class="line">                <span class="type">int</span> x; cin &gt;&gt; x;</span><br><span class="line">                <span class="built_in">addRange</span>(addRange, <span class="number">1</span>, l, r, x, <span class="number">1</span>, n);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">2</span>)&#123;</span><br><span class="line">                <span class="type">int</span> x; cin &gt;&gt; x;</span><br><span class="line">                <span class="built_in">chminRange</span>(chminRange, <span class="number">1</span>, l, r, x, <span class="number">1</span>, n);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">3</span>)&#123;</span><br><span class="line">                cout &lt;&lt; <span class="built_in">querySum</span>(querySum, <span class="number">1</span>, l, r, <span class="number">1</span>, n) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">4</span>)&#123;</span><br><span class="line">                cout &lt;&lt; <span class="built_in">queryMax</span>(queryMax, <span class="number">1</span>, l, r, <span class="number">1</span>, n) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(op == <span class="number">5</span>)&#123;</span><br><span class="line">                cout &lt;&lt; <span class="built_in">queryHis</span>(queryHis, <span class="number">1</span>, l, r, <span class="number">1</span>, n) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç»“åˆæ‘©å°”æŠ•ç¥¨"><a href="#ç»“åˆæ‘©å°”æŠ•ç¥¨" class="headerlink" title="ç»“åˆæ‘©å°”æŠ•ç¥¨"></a>ç»“åˆæ‘©å°”æŠ•ç¥¨</h4><h5 id="ç»å…¸æ‘©å°”æŠ•ç¥¨ï¼Œæ±‚æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°å¤§äº-frac-n-2-d-æ•°"><a href="#ç»å…¸æ‘©å°”æŠ•ç¥¨ï¼Œæ±‚æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°å¤§äº-frac-n-2-d-æ•°" class="headerlink" title="ç»å…¸æ‘©å°”æŠ•ç¥¨ï¼Œæ±‚æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°å¤§äº$\frac{n}{2}$d æ•°"></a>ç»å…¸æ‘©å°”æŠ•ç¥¨ï¼Œæ±‚æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°å¤§äº$\frac{n}{2}$d æ•°</h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">majorityElement</span><span class="params">(vector&lt;<span class="type">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">  		<span class="type">int</span> now = <span class="number">-1</span>, cnt = <span class="number">0</span>;</span><br><span class="line">  		<span class="keyword">for</span>(<span class="keyword">auto</span> x : nums)&#123;</span><br><span class="line">  			<span class="keyword">if</span>(!cnt)&#123;</span><br><span class="line">  				now = x;</span><br><span class="line">  				cnt = <span class="number">1</span>;</span><br><span class="line">  			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  				<span class="keyword">if</span>(now == x)&#123;</span><br><span class="line">  					cnt ++;</span><br><span class="line">  				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  					cnt --;</span><br><span class="line">  				&#125;</span><br><span class="line">  			&#125;</span><br><span class="line">  		&#125;</span><br><span class="line">  		<span class="keyword">return</span> now;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="ç»“åˆçº¿æ®µæ ‘æ±‚åŒºé—´æµ·ç‹æ•°"><a href="#ç»“åˆçº¿æ®µæ ‘æ±‚åŒºé—´æµ·ç‹æ•°" class="headerlink" title="ç»“åˆçº¿æ®µæ ‘æ±‚åŒºé—´æµ·ç‹æ•°"></a>ç»“åˆçº¿æ®µæ ‘æ±‚åŒºé—´æµ·ç‹æ•°</h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// https://leetcode.cn/problems/online-majority-element-in-subarray/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MajorityChecker</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; val, cnt, v1;</span><br><span class="line">	vector&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&gt; v2;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">up</span><span class="params">(<span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(!cnt[i &lt;&lt; <span class="number">1</span>] &amp;&amp; !cnt[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>])&#123;</span><br><span class="line">			cnt[i] = <span class="number">0</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(!cnt[i &lt;&lt; <span class="number">1</span>])&#123;</span><br><span class="line">			cnt[i] = cnt[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">			val[i] = val[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(!cnt[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>])&#123;</span><br><span class="line">			cnt[i] = cnt[i &lt;&lt; <span class="number">1</span>];</span><br><span class="line">			val[i] = val[i &lt;&lt; <span class="number">1</span>];</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(val[i &lt;&lt; <span class="number">1</span>] == val[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>])&#123;</span><br><span class="line">				val[i] = val[i &lt;&lt; <span class="number">1</span>];</span><br><span class="line">				cnt[i] = cnt[i &lt;&lt; <span class="number">1</span>] + cnt[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="keyword">if</span>(cnt[i &lt;&lt; <span class="number">1</span>] &gt;= cnt[i &lt;&lt; <span class="number">1</span>| <span class="number">1</span>])&#123;</span><br><span class="line">					val[i] = val[i &lt;&lt; <span class="number">1</span>];</span><br><span class="line">					cnt[i] = cnt[i &lt;&lt; <span class="number">1</span>] - cnt[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					val[i] = val[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">					cnt[i] = cnt[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] - cnt[i &lt;&lt; <span class="number">1</span>];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> l, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">			cnt[i] = <span class="number">1</span>;</span><br><span class="line">			val[i] = v1[l];</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">			<span class="built_in">build</span>(i &lt;&lt; <span class="number">1</span>, l, mid);</span><br><span class="line">			<span class="built_in">build</span>(i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">			<span class="built_in">up</span>(i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function">pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; <span class="title">get</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> bl, <span class="type">int</span> br, <span class="type">int</span> l, <span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(bl &lt;= l &amp;&amp; br &gt;= r)&#123;</span><br><span class="line">			<span class="keyword">return</span> &#123;val[i], cnt[i]&#125;;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">			pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; left = &#123;<span class="number">0</span>, <span class="number">0</span>&#125;, right = &#123;<span class="number">0</span>, <span class="number">0</span>&#125;, ans;</span><br><span class="line">			<span class="keyword">if</span>(bl &lt;= mid)&#123;</span><br><span class="line">				left = <span class="built_in">get</span>(i &lt;&lt; <span class="number">1</span>, bl, br, l, mid);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(br &gt; mid)&#123;</span><br><span class="line">				right = <span class="built_in">get</span>(i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, bl, br, mid + <span class="number">1</span>, r);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(!left.sc &amp;&amp; !right.sc)&#123;</span><br><span class="line">				ans.sc = <span class="number">0</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(!left.sc)&#123;</span><br><span class="line">				ans.fr = right.fr;</span><br><span class="line">				ans.sc = right.sc;</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(!right.sc)&#123;</span><br><span class="line">				ans.fr = left.fr;</span><br><span class="line">				ans.sc = left.sc;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="keyword">if</span>(left.fr == right.fr)&#123;</span><br><span class="line">					ans.fr = left.fr;</span><br><span class="line">					ans.sc = left.sc + right.sc;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					<span class="keyword">if</span>(left.sc &gt;= right.sc)&#123;</span><br><span class="line">						ans.fr = left.fr;</span><br><span class="line">						ans.sc = left.sc - right.sc;</span><br><span class="line">					&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">						ans.fr = right.fr;</span><br><span class="line">						ans.sc = right.sc - left.sc;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> ans;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> in)</span> </span>&#123;</span><br><span class="line">		<span class="type">int</span> l = <span class="number">0</span>, r = n - <span class="number">1</span>;</span><br><span class="line">		<span class="type">int</span> mid, ans = <span class="number">-1</span>;</span><br><span class="line">		<span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">			mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">if</span>(v2[mid].fr &gt; x)&#123;</span><br><span class="line">				r = mid - <span class="number">1</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(v2[mid].fr &lt; x)&#123;</span><br><span class="line">				l = mid + <span class="number">1</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span>(v2[mid].sc &gt;= in)&#123;</span><br><span class="line">                    				ans = mid;</span><br><span class="line">					r = mid - <span class="number">1</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					l = mid + <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> ans;</span><br><span class="line">	&#125;;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">find2</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> in)</span> </span>&#123;</span><br><span class="line">		<span class="type">int</span> l = <span class="number">0</span>, r = n - <span class="number">1</span>;</span><br><span class="line">		<span class="type">int</span> mid, ans = <span class="number">-1</span>;</span><br><span class="line">		<span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">			mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">if</span>(v2[mid].fr &gt; x)&#123;</span><br><span class="line">				r = mid - <span class="number">1</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span> <span class="keyword">if</span>(v2[mid].fr &lt; x)&#123;</span><br><span class="line">				l = mid + <span class="number">1</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span>(v2[mid].sc &lt;= in)&#123;</span><br><span class="line">                    				ans = mid;</span><br><span class="line">					l = mid + <span class="number">1</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					r = mid - <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> ans;</span><br><span class="line">	&#125;;</span><br><span class="line">    <span class="built_in">MajorityChecker</span>(vector&lt;<span class="type">int</span>&gt;&amp; arr) &#123;</span><br><span class="line">    	v1.<span class="built_in">push_back</span>(<span class="number">0</span>);</span><br><span class="line">    	<span class="keyword">for</span>(<span class="keyword">auto</span> x : arr)&#123;</span><br><span class="line">    		v1.<span class="built_in">push_back</span>(x);</span><br><span class="line">    	&#125;</span><br><span class="line">     	n = arr.<span class="built_in">size</span>();</span><br><span class="line">     	val.<span class="built_in">resize</span>(n &lt;&lt; <span class="number">2</span>);</span><br><span class="line">     	cnt.<span class="built_in">resize</span>(n &lt;&lt; <span class="number">2</span>); </span><br><span class="line">     	<span class="built_in">build</span>(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">     	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">     		v2.<span class="built_in">push_back</span>(&#123;v1[i], i&#125;);</span><br><span class="line">     	&#125;</span><br><span class="line">     	<span class="built_in">sort</span>(v2.<span class="built_in">begin</span>(), v2.<span class="built_in">end</span>(), [](pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; a, pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; b)&#123;</span><br><span class="line">     		<span class="keyword">if</span>(a.fr == b.fr)&#123;</span><br><span class="line">     			<span class="keyword">return</span> a.sc &lt; b.sc;</span><br><span class="line">     		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">     			<span class="keyword">return</span> a.fr &lt; b.fr;</span><br><span class="line">     		&#125;</span><br><span class="line">     	&#125;);</span><br><span class="line">        <span class="comment">// for(int i = 0; i &lt; n; i ++)&#123;</span></span><br><span class="line">        <span class="comment">//     cout &lt;&lt; v2[i].fr &lt;&lt; &quot; &quot; &lt;&lt; v2[i].sc &lt;&lt; &quot;\n&quot;;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right, <span class="type">int</span> threshold)</span> </span>&#123;</span><br><span class="line">    	left ++, right ++;</span><br><span class="line">    	pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt; temp = <span class="built_in">get</span>(<span class="number">1</span>, left, right, <span class="number">1</span>, n);</span><br><span class="line">    	<span class="keyword">if</span>(temp.sc == <span class="number">0</span>)&#123;</span><br><span class="line">    		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; temp.fr &lt;&lt; &quot; &quot; &lt;&lt;  temp.sc &lt;&lt; &quot; &quot;;</span></span><br><span class="line">    	<span class="type">int</span> l = <span class="built_in">find</span>(temp.fr, left), r = <span class="built_in">find2</span>(temp.fr, right);</span><br><span class="line">        <span class="comment">// cout &lt;&lt; &quot;L; &quot; &lt;&lt;  left &lt;&lt; &quot; R: &quot; &lt;&lt; right &lt;&lt; &quot; l1: &quot; &lt;&lt; l &lt;&lt; &quot; r1: &quot; &lt;&lt; r &lt;&lt; &quot;\n&quot;; </span></span><br><span class="line">    	<span class="keyword">return</span> (r - l + <span class="number">1</span>) &gt;= threshold ? temp.fr : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="æ±‚ä¸€ä¸ªæ•°ç»„ä¸­æŸä¸€ä¸ªåŒºé—´å‡ºç°äº†æŸä¸ªæ•°çš„æ¬¡æ•°"><a href="#æ±‚ä¸€ä¸ªæ•°ç»„ä¸­æŸä¸€ä¸ªåŒºé—´å‡ºç°äº†æŸä¸ªæ•°çš„æ¬¡æ•°" class="headerlink" title="æ±‚ä¸€ä¸ªæ•°ç»„ä¸­æŸä¸€ä¸ªåŒºé—´å‡ºç°äº†æŸä¸ªæ•°çš„æ¬¡æ•°"></a>æ±‚ä¸€ä¸ªæ•°ç»„ä¸­æŸä¸€ä¸ªåŒºé—´å‡ºç°äº†æŸä¸ªæ•°çš„æ¬¡æ•°</h5><p>å‚è€ƒä¸Šé¢æ‘©å°”æŠ•ç¥¨ç»“åˆçº¿æ®µæ ‘çš„ä¾‹å­ï¼Œå°†ä¸€ä¸ªæ•°ç»„æŒ‰ç…§æ•°çš„å¤§å°å’Œå‡ºç°é¡ºåºå‡åºæ’åºï¼Œç„¶åç”¨ä¸åŒé€»è¾‘çš„äºŒåˆ†æŸ¥æ‰¾å¾—åˆ°ç›¸å¯¹ä½ç½®</p>
<h3 id="ç¨€ç–è¡¨ST"><a href="#ç¨€ç–è¡¨ST" class="headerlink" title="ç¨€ç–è¡¨ST"></a>ç¨€ç–è¡¨ST</h3><p>**Sparse Tableï¼ˆç¨€ç–è¡¨ï¼‰**æ˜¯ä¸€ç§é«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼Œä¸»è¦ç”¨äº <strong>é™æ€æ•°ç»„çš„åŒºé—´æœ€å€¼æŸ¥è¯¢ï¼ˆRMQï¼‰</strong>ã€‚</p>
<ul>
<li>é€‚ç”¨äºï¼š<strong>æŸ¥è¯¢é¢‘ç¹ï¼Œä¿®æ”¹ä¸éœ€è¦æˆ–å¾ˆå°‘</strong></li>
<li>æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ï¼š<strong>O(1)</strong></li>
<li>é¢„å¤„ç†æ—¶é—´å¤æ‚åº¦ï¼š<strong>O(n log n)</strong></li>
</ul>
<p>æ”¯æŒçš„è¿ç®—</p>
<p>Sparse Table æ”¯æŒ <strong>å¹‚ç­‰æ“ä½œï¼ˆidempotent operationsï¼‰</strong>ï¼š</p>
<ul>
<li><code>min()</code> âœ…</li>
<li><code>max()</code> âœ…</li>
<li><code>gcd()</code> âœ…</li>
<li><code>lcm()</code> âŒï¼ˆä¸æ»¡è¶³å¹‚ç­‰æ€§ï¼‰</li>
<li><code>sum()</code> âŒï¼ˆä¸æ»¡è¶³å¹‚ç­‰æ€§ï¼‰</li>
</ul>
<p>æ ¸å¿ƒæ„å»ºæµç¨‹ï¼ˆä»¥æœ€å¤§å€¼ä¸ºä¾‹ï¼‰</p>
<ol>
<li>å®šä¹‰</li>
</ol>
<ul>
<li><code>st[i][j]</code> è¡¨ç¤ºä» <strong>ä¸‹æ ‡ i å¼€å§‹ï¼Œé•¿åº¦ä¸º 2^j çš„åŒºé—´æœ€å¤§å€¼</strong></li>
</ul>
<ol start="2">
<li>åˆå§‹åŒ–</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    st[i][<span class="number">0</span>] = arr[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>çŠ¶æ€è½¬ç§»</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; (<span class="number">1</span> &lt;&lt; j) &lt;= n; j++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i + (<span class="number">1</span> &lt;&lt; j) - <span class="number">1</span> &lt;= n; i++) &#123;</span><br><span class="line">        st[i][j] = <span class="built_in">max</span>(st[i][j - <span class="number">1</span>], st[i + (<span class="number">1</span> &lt;&lt; (j - <span class="number">1</span>))][j - <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¢„å¤„ç† log2 è¡¨</p>
<p>ä¸ºä»€ä¹ˆè¦æå‰é¢„å¤„ç† <code>log2[]</code>ï¼Ÿ</p>
<p>æŸ¥è¯¢æ—¶éœ€è®¡ç®—åŒºé—´é•¿åº¦å¯¹åº”çš„ <code>log2(r - l + 1)</code>ï¼Œé¢„å¤„ç†å¯é¿å…æµ®ç‚¹è¯¯å·®å’Œæ—¶é—´æµªè´¹</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">log2[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    log2[i] = log2[i &gt;&gt; <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒºé—´æŸ¥è¯¢ï¼ˆä»¥æœ€å¤§å€¼ä¸ºä¾‹ï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> k = log2[r - l + <span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> res = <span class="built_in">max</span>(st[l][k], st[r - (<span class="number">1</span> &lt;&lt; k) + <span class="number">1</span>][k]);</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæŸ¥è¯¢æ–¹å¼çš„æ ¸å¿ƒæ˜¯ä½¿ç”¨<strong>ä¸¤ä¸ªé•¿åº¦ä¸º <code>2^k</code> çš„åŒºé—´è¦†ç›–æ•´ä¸ª <code>[l, r]</code> åŒºé—´</strong>ã€‚</p>
<p>Luogu P4155ï¼šç¯å½¢åŒºé—´è¦†ç›–è·³è·ƒä¼˜åŒ–</p>
<p>**ç›®æ ‡ï¼š**ç»™å®šä¸€ç³»åˆ—åŒºé—´ï¼Œåœ¨ç¯ä¸ŠæŸ¥æ‰¾è¦†ç›–é•¿åº¦ä¸º <code>m</code> æ‰€éœ€çš„æœ€å°‘è·³è·ƒæ¬¡æ•°ï¼ˆå€å¢æ€æƒ³ï¼‰</p>
<p><strong>å…³é”®ç”¨æ³•ï¼š</strong></p>
<ul>
<li><code>st[i][j]</code> è¡¨ç¤ºä»ç¬¬ <code>i</code> ä¸ªåŒºé—´å¼€å§‹ï¼Œè·³ <code>2^j</code> æ­¥å¯è¦†ç›–åˆ°çš„ä½ç½®</li>
</ul>
<p><strong>æ„å»ºï¼š</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">st[i][<span class="number">0</span>] = rightmost reachable from i</span><br><span class="line">st[i][j] = st[st[i][j - <span class="number">1</span>]][j - <span class="number">1</span>];</span><br></pre></td></tr></table></figure>

<p><strong>æŸ¥è¯¢ï¼š</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = logn; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">    <span class="keyword">if</span> (v1[st[cur][j]][<span class="number">2</span>] &lt; goal) &#123;</span><br><span class="line">        cur = st[cur][j];</span><br><span class="line">        ans += <span class="number">1</span> &lt;&lt; j;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ©ç”¨ Sparse Table è¿›è¡Œè·³è·ƒä¼˜åŒ–ï¼ˆå€å¢æ€æƒ³ï¼‰</p>
<p>æ¯æ¬¡è·³è·ƒä»£è¡¨ä¸€æ®µåŒºé—´ï¼Œç”¨äºè®¡ç®—è¦†ç›–é•¿åº¦æœ€å°‘çš„è·¯å¾„</p>
<p>æ¨¡æ¿å°è£…ï¼ˆæœ€å€¼æŸ¥è¯¢ï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">5</span>, LOG = <span class="number">20</span>;</span><br><span class="line"><span class="type">int</span> st[N][LOG], log2[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build_st</span><span class="params">(<span class="type">const</span> vector&lt;<span class="type">int</span>&gt;&amp; a)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n = a.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">    log2[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        st[i][<span class="number">0</span>] = a[i];</span><br><span class="line">        log2[i] = log2[i &gt;&gt; <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; (<span class="number">1</span> &lt;&lt; j) &lt;= n; j++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i + (<span class="number">1</span> &lt;&lt; j) - <span class="number">1</span> &lt;= n; i++) &#123;</span><br><span class="line">            st[i][j] = <span class="built_in">max</span>(st[i][j - <span class="number">1</span>], st[i + (<span class="number">1</span> &lt;&lt; (j - <span class="number">1</span>))][j - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query_max</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> k = log2[r - l + <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(st[l][k], st[r - (<span class="number">1</span> &lt;&lt; k) + <span class="number">1</span>][k]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="LCA"><a href="#LCA" class="headerlink" title="LCA"></a>LCA</h3><p>æœ€è¿‘ç¥–å…ˆé—®é¢˜ï¼Œç”¨äºå¿«é€ŸæŸ¥è¯¢æ ‘ä¸­ä¸¤ä¸ªèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚</p>
<h4 id="é‡‡ç”¨deepæ•°ç»„å’Œstè¡¨"><a href="#é‡‡ç”¨deepæ•°ç»„å’Œstè¡¨" class="headerlink" title="é‡‡ç”¨deepæ•°ç»„å’Œstè¡¨"></a>é‡‡ç”¨deepæ•°ç»„å’Œstè¡¨</h4><p>deepæ•°ç»„ç”¨äºè®°å½•æ·±åº¦ï¼Œstè¡¨ç”¨äºå¿«é€ŸæŸ¥è¯¢çˆ¶äº²åŠä»¥ä¸ŠèŠ‚ç‚¹</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// https://www.luogu.com.cn/problem/P3379</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>), cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">	<span class="comment">// cin &gt;&gt; t;</span></span><br><span class="line">	<span class="keyword">while</span>(t --)&#123;</span><br><span class="line">		<span class="type">int</span> n, m, root;</span><br><span class="line">		cin &gt;&gt; n &gt;&gt; m &gt;&gt; root;</span><br><span class="line">		<span class="function">vector <span class="title">adj</span><span class="params">(n + <span class="number">1</span>, vector&lt;<span class="type">int</span>&gt;())</span></span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;  i &lt; n; i ++)&#123;</span><br><span class="line">			<span class="type">int</span> u, v;</span><br><span class="line">			cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">			adj[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">			adj[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">		&#125;</span><br><span class="line">        <span class="comment">// æ„å»ºLCAç»“æ„</span></span><br><span class="line">		<span class="type">int</span> n1 = <span class="built_in">log2</span>(n);</span><br><span class="line">		<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">deep</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">		<span class="function">vector <span class="title">st</span><span class="params">(n + <span class="number">1</span>, vector&lt;<span class="type">int</span>&gt;(n1 + <span class="number">1</span>))</span></span>;</span><br><span class="line">		<span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> u, <span class="type">int</span> last, <span class="type">int</span> d) -&gt; <span class="type">void</span>&#123;</span><br><span class="line">			deep[u] = d;</span><br><span class="line">			st[u][<span class="number">0</span>] = last;</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n1; i ++)&#123;</span><br><span class="line">				st[u][i] = st[st[u][i - <span class="number">1</span>]][i - <span class="number">1</span>];</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">auto</span> v : adj[u])&#123;</span><br><span class="line">				<span class="keyword">if</span>(v != last)&#123;</span><br><span class="line">					<span class="built_in">f</span>(f, v, u, d + <span class="number">1</span>);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="built_in">dfs</span>(dfs, root, root, <span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i ++)&#123;</span><br><span class="line">			<span class="type">int</span> u, v;</span><br><span class="line">			cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">			<span class="comment">// æŸ¥è¯¢å…¬å…±ç¥–å…ˆéƒ¨åˆ†éƒ¨åˆ†</span></span><br><span class="line">            <span class="comment">// å…ˆç»Ÿä¸€é«˜åº¦</span></span><br><span class="line">			<span class="keyword">if</span>(deep[u] &lt; deep[v])&#123;</span><br><span class="line">				<span class="built_in">swap</span>(u, v);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> j = n1; j &gt;= <span class="number">0</span>; j --)&#123;</span><br><span class="line">				<span class="keyword">if</span>(deep[st[u][j]] &gt;= deep[v])&#123;</span><br><span class="line">					u = st[u][j];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">            <span class="comment">// ç‰¹åˆ¤</span></span><br><span class="line">			<span class="keyword">if</span>(u == v)&#123;</span><br><span class="line">				cout &lt;&lt; v &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="type">int</span> j = n1; j &gt;= <span class="number">0</span>; j --)&#123;</span><br><span class="line">					<span class="keyword">if</span>(st[u][j] != st[v][j])&#123;</span><br><span class="line">						u = st[u][j];</span><br><span class="line">						v = st[v][j];</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				cout &lt;&lt; st[u][<span class="number">0</span>] &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">            <span class="comment">//</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Tarjan"><a href="#Tarjan" class="headerlink" title="Tarjan"></a>Tarjan</h4><p>åˆ©ç”¨å¹¶æŸ¥é›†æ¥ä¸€æ¬¡dfså°±æ„å»ºå¥½lcaä¿¡æ¯</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// https://www.luogu.com.cn/problem/P3379</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>), cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">	<span class="comment">// cin &gt;&gt; t;</span></span><br><span class="line">	<span class="keyword">while</span>(t --)&#123;</span><br><span class="line">		<span class="type">int</span> n, m, root;</span><br><span class="line">		cin &gt;&gt; n &gt;&gt; m &gt;&gt; root;</span><br><span class="line">		<span class="function">vector <span class="title">adj</span><span class="params">(n + <span class="number">1</span>, vector&lt;<span class="type">int</span>&gt;())</span></span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, u, v; i &lt; n; i ++)&#123;</span><br><span class="line">			cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">			adj[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">			adj[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function">vector <span class="title">adj2</span><span class="params">(m + <span class="number">1</span>, vector&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt;())</span></span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, u, v; i &lt;= m; i ++)&#123;</span><br><span class="line">			cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">			adj2[u].<span class="built_in">push_back</span>(&#123;v, i&#125;);</span><br><span class="line">			adj2[v].<span class="built_in">push_back</span>(&#123;u, i&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">fa</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">ans</span><span class="params">(m + <span class="number">1</span>)</span></span>;</span><br><span class="line">		<span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">vi</span><span class="params">(n + <span class="number">1</span>, <span class="literal">false</span>)</span></span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">			fa[i] = i;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">auto</span> find = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> x) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">			<span class="keyword">if</span>(x != fa[x])&#123;</span><br><span class="line">				fa[x] = <span class="built_in">f</span>(f, fa[x]);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> fa[x];</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">auto</span> tarjin = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> u, <span class="type">int</span> last) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">			vi[u] = <span class="literal">true</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">auto</span> v : adj[u])&#123;</span><br><span class="line">				<span class="keyword">if</span>(v != last)&#123;</span><br><span class="line">					<span class="built_in">f</span>(f, v, u);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">auto</span> [v, n1] : adj2[u])&#123;</span><br><span class="line">				<span class="keyword">if</span>(vi[v])&#123;</span><br><span class="line">					ans[n1] = <span class="built_in">find</span>(find, v);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			fa[u] = last;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="built_in">tarjin</span>(tarjin, root, <span class="number">-1</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123;</span><br><span class="line">			cout &lt;&lt; ans[i] &lt;&lt; <span class="string">&quot; \n&quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://www.luogu.com.cn/problem/P3379">ç»ƒä¹ é¢˜</a></p>
<h3 id="æ ‘çš„é‡å¿ƒ"><a href="#æ ‘çš„é‡å¿ƒ" class="headerlink" title="æ ‘çš„é‡å¿ƒ"></a>æ ‘çš„é‡å¿ƒ</h3><p>å¦‚æœåœ¨æ ‘ä¸­é€‰æ‹©æŸä¸ªèŠ‚ç‚¹å¹¶åˆ é™¤ï¼Œè¿™æ£µæ ‘å°†åˆ†ä¸ºè‹¥å¹²æ£µå­æ ‘ï¼Œä½¿æ‰€æœ‰å­æ ‘æœ€å¤§å€¼æœ€å°çš„èŠ‚ç‚¹è¢«ç§°ä¸ºæ•´ä¸ªæ ‘çš„é‡å¿ƒã€‚</p>
<p>æ€§è´¨ï¼š</p>
<ul>
<li>æ ‘çš„é‡å¿ƒå¦‚æœä¸å”¯ä¸€ï¼Œåˆ™è‡³å¤šæœ‰ä¸¤ä¸ªï¼Œä¸”è¿™ä¸¤ä¸ªé‡å¿ƒç›¸é‚»ã€‚</li>
<li>ä»¥æ ‘çš„é‡å¿ƒä¸ºæ ¹æ—¶ï¼Œæ‰€æœ‰å­æ ‘çš„å¤§å°éƒ½ä¸è¶…è¿‡æ•´æ£µæ ‘å¤§å°çš„ä¸€åŠã€‚</li>
<li>æ ‘ä¸­æ‰€æœ‰ç‚¹åˆ°æŸä¸ªç‚¹çš„è·ç¦»å’Œä¸­ï¼Œåˆ°é‡å¿ƒçš„è·ç¦»å’Œæ˜¯æœ€å°çš„ï¼›å¦‚æœæœ‰ä¸¤ä¸ªé‡å¿ƒï¼Œé‚£ä¹ˆåˆ°å®ƒä»¬çš„è·ç¦»å’Œä¸€æ ·ã€‚</li>
<li>æŠŠä¸¤æ£µæ ‘é€šè¿‡ä¸€æ¡è¾¹ç›¸è¿å¾—åˆ°ä¸€æ£µæ–°çš„æ ‘ï¼Œé‚£ä¹ˆæ–°çš„æ ‘çš„é‡å¿ƒåœ¨è¿æ¥åŸæ¥ä¸¤æ£µæ ‘çš„é‡å¿ƒçš„è·¯å¾„ä¸Šã€‚</li>
<li>åœ¨ä¸€æ£µæ ‘ä¸Šæ·»åŠ æˆ–åˆ é™¤ä¸€ä¸ªå¶å­ï¼Œé‚£ä¹ˆå®ƒçš„é‡å¿ƒæœ€å¤šåªç§»åŠ¨ä¸€æ¡è¾¹çš„è·ç¦»ã€‚</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">5e4</span> + <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> head[N] ,next1[N &lt;&lt; <span class="number">1</span>], to[N &lt;&lt; <span class="number">1</span>];</span><br><span class="line"><span class="type">int</span> size1[N], max1[N];</span><br><span class="line"><span class="type">int</span> cnt1 = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span> <span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">	next1[cnt1] = head[u];</span><br><span class="line">	to[cnt1] = v;</span><br><span class="line">	head[u] = cnt1 ++;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> last)</span></span>&#123;</span><br><span class="line">	size1[u] = <span class="number">1</span>;</span><br><span class="line">	max1[u] = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> ei = head[u], v; ei; ei = next1[ei])&#123;</span><br><span class="line">		v = to[ei];</span><br><span class="line">		<span class="keyword">if</span>(v != last)&#123;</span><br><span class="line">			<span class="built_in">dfs</span>(v, u);</span><br><span class="line">			max1[u] = <span class="built_in">max</span>(max1[u], size1[v]);</span><br><span class="line">			size1[u] += size1[v];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	max1[u] = <span class="built_in">max</span>(max1[u], n - size1[u]);;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">	<span class="comment">// cin &gt;&gt; t;</span></span><br><span class="line">	<span class="keyword">while</span>(t --)&#123;</span><br><span class="line">		cin &gt;&gt; n;</span><br><span class="line">		<span class="built_in">fill</span>(head, head + <span class="number">1</span> + n, <span class="number">0</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i ++)&#123;</span><br><span class="line">			<span class="type">int</span> u, v;</span><br><span class="line">			cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">			<span class="built_in">add</span>(u, v);</span><br><span class="line">			<span class="built_in">add</span>(v, u);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">-1</span>);</span><br><span class="line">		<span class="type">int</span> ans[<span class="number">2</span>];</span><br><span class="line">		<span class="type">int</span> m = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">            <span class="comment">// ä¾ç…§æ ‘çš„é‡å¿ƒçš„å®šä¹‰</span></span><br><span class="line">			<span class="keyword">if</span>(max1[i] &lt;= n &gt;&gt; <span class="number">1</span>)&#123;</span><br><span class="line">				ans[m ++] = i;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i ++)&#123;</span><br><span class="line">			cout &lt;&lt; ans[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“èŠ‚ç‚¹æœ‰å€¼æ—¶ï¼Œé‡å¿ƒçš„ä¾æ®æ˜¯èŠ‚ç‚¹æƒè€Œä¸æ˜¯è¾¹æƒã€‚</p>
<h3 id="æ ‘çš„ç›´å¾„"><a href="#æ ‘çš„ç›´å¾„" class="headerlink" title="æ ‘çš„ç›´å¾„"></a>æ ‘çš„ç›´å¾„</h3><p>æ ‘ä¸Šä»»æ„ä¸¤ç‚¹ä¹‹é—´æœ€å¸¸çš„ç®€å•è·¯å¾„ä¸ºæ ‘çš„ç›´å¾„ï¼Œä¸€æ£µæ ‘å¯ä»¥æœ‰å¤šæ¡ç›´å¾„ï¼Œé•¿åº¦ç›¸ç­‰</p>
<h4 id="ä¸¤æ¬¡DFS"><a href="#ä¸¤æ¬¡DFS" class="headerlink" title="ä¸¤æ¬¡DFS"></a>ä¸¤æ¬¡DFS</h4><p>é€‚ç”¨ä¸æ— è´Ÿè¾¹æ ‘</p>
<p>é¦–å…ˆä»ä»»æ„èŠ‚ç‚¹ y å¼€å§‹è¿›è¡Œç¬¬ä¸€æ¬¡ DFSï¼Œåˆ°è¾¾è·ç¦»å…¶æœ€è¿œçš„èŠ‚ç‚¹ï¼Œè®°ä¸º zï¼Œç„¶åå†ä»z å¼€å§‹åšç¬¬äºŒæ¬¡ DFSï¼Œåˆ°è¾¾è·ç¦»zæœ€è¿œçš„èŠ‚ç‚¹ï¼Œè®°ä¸ºzâ€™ï¼Œåˆ™ $\delta(z,zâ€™)$ å³ä¸ºæ ‘çš„ç›´å¾„ã€‚</p>
<p>æ˜¾ç„¶ï¼Œå¦‚æœç¬¬ä¸€æ¬¡ DFS åˆ°è¾¾çš„èŠ‚ç‚¹zæ˜¯ç›´å¾„çš„ä¸€ç«¯ï¼Œé‚£ä¹ˆç¬¬äºŒæ¬¡ DFS åˆ°è¾¾çš„èŠ‚ç‚¹zâ€™ä¸€å®šæ˜¯ç›´å¾„çš„ä¸€ç«¯ã€‚æˆ‘ä»¬åªéœ€è¯æ˜åœ¨ä»»æ„æƒ…å†µä¸‹ï¼Œzå¿…ä¸ºç›´å¾„çš„ä¸€ç«¯ã€‚</p>
<p>å®šç†ï¼šåœ¨ä¸€æ£µæ ‘ä¸Šï¼Œä»ä»»æ„èŠ‚ç‚¹yå¼€å§‹è¿›è¡Œä¸€æ¬¡ DFSï¼Œåˆ°è¾¾çš„è·ç¦»å…¶æœ€è¿œçš„èŠ‚ç‚¹zå¿…ä¸ºç›´å¾„çš„ä¸€ç«¯ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> n;</span><br><span class="line">cin &gt;&gt; n;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">head</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span>, <span class="title">next</span><span class="params">(n &lt;&lt; <span class="number">1</span> | <span class="number">1</span>)</span>, <span class="title">to</span><span class="params">(n &lt;&lt; <span class="number">1</span> | <span class="number">1</span>)</span>, <span class="title">weight</span><span class="params">(n &lt;&lt; <span class="number">1</span> | <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> cnt1 = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// ä¸¤æ¬¡DFS</span></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dis</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span>, <span class="title">fa</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">len</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> st, en;</span><br><span class="line"><span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> u, <span class="type">int</span> last, <span class="type">int</span> val) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">    dis[u] = val;</span><br><span class="line">    fa[u] = last;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> ei = head[u], v, w; ei; ei = next[ei])&#123;</span><br><span class="line">        v = to[ei];</span><br><span class="line">        w = weight[ei];</span><br><span class="line">        <span class="keyword">if</span>(v != last)&#123;</span><br><span class="line">            len[v] = w;</span><br><span class="line">            <span class="built_in">f</span>(f, v, u, val + w);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">dfs</span>(dfs, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, max1 = <span class="number">0</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(max1 &lt; dis[i])&#123;</span><br><span class="line">        max1 = dis[i];</span><br><span class="line">        dis[i] = len[i] = <span class="number">0</span>;</span><br><span class="line">        st = i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">dfs</span>(dfs, st, <span class="number">-1</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, max1 = <span class="number">0</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(max1 &lt; dis[i])&#123;</span><br><span class="line">        max1 = dis[i];</span><br><span class="line">        en = i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> sum1 = dis[en]; <span class="comment">// ç›´å¾„</span></span><br></pre></td></tr></table></figure>

<h4 id="æ ‘å½¢DP"><a href="#æ ‘å½¢DP" class="headerlink" title="æ ‘å½¢DP"></a>æ ‘å½¢DP</h4><p>å¯ç”¨äºæœ‰è´Ÿè¾¹æ ‘</p>
<p>æˆ‘ä»¬è®°å½•å½“1ä¸ºæ ‘çš„æ ¹æ—¶ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä½œä¸ºå­æ ‘çš„æ ¹å‘ä¸‹ï¼Œæ‰€èƒ½å»¶ä¼¸çš„æœ€é•¿è·¯å¾„é•¿åº¦$d_{1}$ä¸æ¬¡é•¿è·¯å¾„ï¼ˆä¸æœ€é•¿è·¯å¾„æ— å…¬å…±è¾¹ï¼‰$d_{2}$ï¼Œé‚£ä¹ˆç›´å¾„å°±æ˜¯å¯¹äºæ¯ä¸€ä¸ªç‚¹ï¼Œè¯¥ç‚¹çš„$d_{1}+d_{2}$èƒ½å–åˆ°çš„æœ€å¤§å€¼</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">head1</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span>, <span class="title">next1</span><span class="params">(n &lt;&lt; <span class="number">1</span> | <span class="number">1</span>)</span>, <span class="title">to1</span><span class="params">(n &lt;&lt; <span class="number">1</span> | <span class="number">1</span>)</span>, <span class="title">weight</span><span class="params">(n &lt;&lt; <span class="number">1</span> | <span class="number">1</span>)</span></span>;</span><br><span class="line">cnt1 = <span class="number">1</span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">ans</span><span class="params">(n + <span class="number">1</span>)</span>ï¼Œ<span class="title">v1</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="keyword">auto</span> dfs3 = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> u, <span class="type">int</span> last) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">    ans[u] = <span class="number">0</span>, v1[u] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> ei = head1[u], v, w; ei; ei = next1[ei])&#123;</span><br><span class="line">        v = to1[ei], w = weight[ei];</span><br><span class="line">        <span class="keyword">if</span>(v != last)&#123;</span><br><span class="line">            <span class="built_in">f</span>(f, v, u);</span><br><span class="line">            ans[u] = <span class="built_in">max</span>(ans[u], v1[u] + v1[v] + w);</span><br><span class="line">            v1[u] = <span class="built_in">max</span>(v1[u], v1[v] + w);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">dfs3</span>(dfs3, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"><span class="type">int</span> max2 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">    max2 = <span class="built_in">max</span>(max2, ans[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¹¶æŸ¥é›†"><a href="#å¹¶æŸ¥é›†" class="headerlink" title="å¹¶æŸ¥é›†"></a>å¹¶æŸ¥é›†</h3><p>å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€’å½’æ‰¾ç¥–å…ˆ</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x != fa[x]) fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">    <span class="keyword">return</span> fa[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">U</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">    fa[<span class="built_in">find</span>(x)] = <span class="built_in">find</span>(y);</span><br><span class="line">    <span class="built_in">find</span>(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åä½¿ç”¨å‰è®°å¾—ç»Ÿä¸€æ ¹ï¼Œå³ä¾¿åˆ©ä¸€éæ—¶æ“ä½œfind</p>
<h3 id="å¸¸è§äºŒåˆ†"><a href="#å¸¸è§äºŒåˆ†" class="headerlink" title="å¸¸è§äºŒåˆ†"></a>å¸¸è§äºŒåˆ†</h3><p>åŠ é€ŸæŸ¥è¯¢</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1 = &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> ,<span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="comment">// æœ€å°å¤§äºç­‰äº</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F1</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> r = v1.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> ans, mid;</span><br><span class="line">    <span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">        mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(x &gt;= v1[mid])&#123;</span><br><span class="line">            ans = mid;</span><br><span class="line">            l = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æœ€å°å¤§äº</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F2</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> r = v1.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> ans, mid;</span><br><span class="line">    <span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">        mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(x &gt; v1[mid])&#123;</span><br><span class="line">            ans = mid;</span><br><span class="line">            l = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> r = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æœ€é•¿é€’å¢å­åºåˆ—</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F1</span><span class="params">(<span class="type">int</span> x, vector&lt;<span class="type">int</span>&gt; &amp; v)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> r = v1.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> mid;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">        mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(x &gt; v[mid]) l = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">            ans = mid;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æœ€é•¿é€’å‡å­åºåˆ—</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F2</span><span class="params">(<span class="type">int</span> x, vector&lt;<span class="type">int</span>&gt; &amp; v)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> r = v1.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> mid;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">        mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(x &lt; v[mid]) l = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">            ans = mid;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸‰åˆ†"><a href="#ä¸‰åˆ†" class="headerlink" title="ä¸‰åˆ†"></a>ä¸‰åˆ†</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Fè§†å…·ä½“æƒ…å†µ</span></span><br><span class="line"><span class="function">ll <span class="title">ternary_search</span><span class="params">(ll l, ll r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (r - l &gt; <span class="number">3</span>) &#123;</span><br><span class="line">        ll m1 = l + (r - l) / <span class="number">3</span>;</span><br><span class="line">        ll m2 = r - (r - l) / <span class="number">3</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">F</span>(m1) &lt;= <span class="built_in">F</span>(m2)) &#123;</span><br><span class="line">            r = m2;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            l = m1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ll best = <span class="number">1e9</span>;</span><br><span class="line">    <span class="comment">// æœ€åæš´åŠ›æ±‚è§£</span></span><br><span class="line">    <span class="keyword">for</span> (ll i = l; i &lt;= r; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">F</span>(i) &lt; <span class="built_in">F</span>(best)) &#123;</span><br><span class="line">            best = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> best;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åšå¼ˆè®ºï¼ˆSGå®šç†ï¼‰"><a href="#åšå¼ˆè®ºï¼ˆSGå®šç†ï¼‰" class="headerlink" title="åšå¼ˆè®ºï¼ˆSGå®šç†ï¼‰"></a>åšå¼ˆè®ºï¼ˆ<code>SG</code>å®šç†ï¼‰</h3><p>æ‰€æœ‰ç›¸åŒå­æ¸¸æˆæœ€ç»ˆ<code>sg</code>å¼‚æˆ–ç»“æœä¸º0åˆ™å…ˆæ‰‹å¿…è´¥ï¼Œä¸ä¸ºé›¶åˆ™å…ˆæ‰‹å¿…èƒœï¼Œ<code>sg</code>ä¸ºä»æŸä¸€èŠ‚ç‚¹å¼€å§‹ï¼Œåˆ°æœ€å¤§é™åº¦å¾€å‰ä¾¿åˆ©åçš„ç¬¬ä¸€ä¸ªæ²¡æœ‰å‡ºç°çš„è‡ªç„¶æ•°ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// è®¡ç®—é›†åˆä¸­ç¼ºå¤±çš„æœ€å°éè´Ÿæ•´æ•°ï¼ˆmexå‡½æ•°ï¼‰</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">mex</span><span class="params">(<span class="type">const</span> set&lt;<span class="type">int</span>&gt;&amp; s)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> m = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (s.<span class="built_in">count</span>(m)) m++;</span><br><span class="line">    <span class="keyword">return</span> m;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è¯·è¾“å…¥çŸ³å­å †çš„çŸ³å­æ•°é‡ï¼š&quot;</span>;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="comment">// å…è®¸çš„æ“ä½œï¼šæ¯æ¬¡å¯ä»¥å– 1ã€2 æˆ– 3 ä¸ªçŸ³å­</span></span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; moves = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">    <span class="comment">// åŠ¨æ€è§„åˆ’æ•°ç»„ï¼Œsg[i] è¡¨ç¤ºå½“å‰çŸ³å­æ•°é‡ä¸º i æ—¶çš„ SG å€¼</span></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">sg</span><span class="params">(n+<span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    sg[<span class="number">0</span>] = <span class="number">0</span>; <span class="comment">// æ²¡æœ‰çŸ³å­æ—¶ï¼ŒSGå€¼ä¸º0</span></span><br><span class="line">    <span class="comment">// è®¡ç®—æ¯ä¸ªçŠ¶æ€çš„ SG å€¼</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        set&lt;<span class="type">int</span>&gt; nextSG;</span><br><span class="line">        <span class="comment">// å¯¹æ¯ä¸€ç§å…è®¸çš„èµ°æ³•ï¼Œè®¡ç®—ä¸‹ä¸€çŠ¶æ€çš„ SG å€¼</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> move : moves) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i - move &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                nextSG.<span class="built_in">insert</span>(sg[i - move]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        sg[i] = <span class="built_in">mex</span>(nextSG);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;çŠ¶æ€ &quot;</span> &lt;&lt; n &lt;&lt; <span class="string">&quot; çš„ SG å€¼ä¸ºï¼š&quot;</span> &lt;&lt; sg[n] &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span>(sg[n] != <span class="number">0</span>)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;å…ˆæ‰‹å¿…èƒœ\n&quot;</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;åæ‰‹å¿…èƒœ\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¹˜ç§¯æœ€å¤§å­æ•°ç»„"><a href="#ä¹˜ç§¯æœ€å¤§å­æ•°ç»„" class="headerlink" title="ä¹˜ç§¯æœ€å¤§å­æ•°ç»„"></a>ä¹˜ç§¯æœ€å¤§å­æ•°ç»„</h3><p>ä¿ç•™ä¹˜ç§¯æœ€å°çš„ç»“æœä»¥å‡†å¤‡è§¦åº•åå¼¹</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line"><span class="type">int</span> min1 = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> max1 = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> ans1 = INT_MIN;</span><br><span class="line"><span class="type">int</span> pre1 = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> pre2 = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; v1.<span class="built_in">size</span>(); i ++)&#123;</span><br><span class="line">    max1 = <span class="built_in">max</span>(&#123;v1[i], pre1 * v1[i], pre2 * v1[i]&#125;);</span><br><span class="line">    min1 = <span class="built_in">min</span>(&#123;v1[i], pre1 * v1[i], pre2 * v1[i]&#125;);</span><br><span class="line">    pre1 = max1;</span><br><span class="line">    pre2 = min1;</span><br><span class="line">    ans1 = <span class="built_in">max</span>(ans1, max1);</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; ans1 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h3><h4 id="å•è°ƒæ ˆ"><a href="#å•è°ƒæ ˆ" class="headerlink" title="å•è°ƒæ ˆ"></a>å•è°ƒæ ˆ</h4><p>æ±‚æŸä¸€ä¾§ç¬¬ä¸€ä¸ª å¤§äºæˆ–è€…å°äºå…¶çš„æ•°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="comment">// æ±‚å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å…¶å¤§çš„æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp; v1, <span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">ans</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> size=v1.<span class="built_in">size</span>();</span><br><span class="line">    stack&lt;<span class="type">int</span>&gt; s1;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;size;i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(!s1.<span class="built_in">empty</span>() &amp;&amp; v1[i] &gt; v1[s1.<span class="built_in">top</span>()])&#123;</span><br><span class="line">            ans[s1.<span class="built_in">top</span>()] = i+<span class="number">1</span>;</span><br><span class="line">            s1.<span class="built_in">pop</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        s1.<span class="built_in">push</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;size;i++)&#123;</span><br><span class="line">        cout&lt;&lt;ans[i]&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    &#125;cout&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        cin&gt;&gt;v1[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">solve</span>(v1, n);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æœ€å¤§é¢‘ç‡æ ˆ"><a href="#æœ€å¤§é¢‘ç‡æ ˆ" class="headerlink" title="æœ€å¤§é¢‘ç‡æ ˆ"></a>æœ€å¤§é¢‘ç‡æ ˆ</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FreqStack</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>,vector&lt;<span class="type">int</span>&gt;&gt; s1;</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>,<span class="type">int</span>&gt; t1;</span><br><span class="line">    <span class="type">int</span> max1;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">FreqStack</span>() &#123;</span><br><span class="line">        max1=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">push</span><span class="params">(<span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">        t1[val]++;</span><br><span class="line">        s1[t1[val]].<span class="built_in">push_back</span>(val);</span><br><span class="line">        max1=t1[val]&gt;max1?t1[val]:max1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    int pop() åˆ é™¤å¹¶è¿”å›å †æ ˆä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ã€‚</span></span><br><span class="line"><span class="comment">	å¦‚æœå‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ä¸åªä¸€ä¸ªï¼Œåˆ™ç§»é™¤å¹¶è¿”å›æœ€æ¥è¿‘æ ˆé¡¶çš„å…ƒç´ ã€‚</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> ans=s1[max1].<span class="built_in">back</span>();</span><br><span class="line">        s1[t1[ans]--].<span class="built_in">pop_back</span>();</span><br><span class="line">        <span class="keyword">if</span>(t1[ans]==<span class="number">0</span>)&#123;</span><br><span class="line">            t1.<span class="built_in">erase</span>(ans);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s1[max1].<span class="built_in">empty</span>())&#123;</span><br><span class="line">            max1--;</span><br><span class="line">            s1.<span class="built_in">erase</span>(max1+<span class="number">1</span>);</span><br><span class="line">        &#125;<span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h3><h4 id="åŠ¨æ€å †å¯»æ‰¾ä¸­ä½æ•°"><a href="#åŠ¨æ€å †å¯»æ‰¾ä¸­ä½æ•°" class="headerlink" title="åŠ¨æ€å †å¯»æ‰¾ä¸­ä½æ•°"></a>åŠ¨æ€å †å¯»æ‰¾ä¸­ä½æ•°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">1e5</span>;</span><br><span class="line"><span class="type">int</span> n;               <span class="comment">// æ“ä½œæ¬¡æ•°</span></span><br><span class="line">string op;            <span class="comment">// è¾“å…¥çš„æ“ä½œå‘½ä»¤</span></span><br><span class="line"><span class="type">int</span> size1 = <span class="number">0</span>;        <span class="comment">// å½“å‰æ ˆçš„å¤§å°</span></span><br><span class="line"><span class="type">int</span> minsize = <span class="number">0</span>;      <span class="comment">// å°æ ¹å †ä¸­å…ƒç´ çš„æ•°é‡</span></span><br><span class="line"><span class="type">int</span> maxsize = <span class="number">0</span>;      <span class="comment">// å¤§æ ¹å †ä¸­å…ƒç´ çš„æ•°é‡</span></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">stack1</span><span class="params">(N)</span></span>;    <span class="comment">// ç”¨äºæ¨¡æ‹Ÿæ ˆï¼Œå­˜å‚¨æ‰€æœ‰æ’å…¥çš„æ•°å­—</span></span><br><span class="line">priority_queue&lt;<span class="type">int</span>, vector&lt;<span class="type">int</span>&gt;, greater&lt;<span class="type">int</span>&gt;&gt; minheap;  <span class="comment">// å°æ ¹å †ï¼Œç”¨äºå­˜å‚¨å¤§äºç­‰äºä¸­ä½æ•°çš„æ•°</span></span><br><span class="line">priority_queue&lt;<span class="type">int</span>&gt; maxheap;  <span class="comment">// å¤§æ ¹å †ï¼Œç”¨äºå­˜å‚¨å°äºç­‰äºä¸­ä½æ•°çš„æ•°</span></span><br><span class="line"><span class="comment">// ç”¨äºå»¶è¿Ÿåˆ é™¤çš„æ˜ å°„ï¼šè®°å½•éœ€è¦ä»å †ä¸­åˆ é™¤ä½†è¿˜æœªå®é™…åˆ é™¤çš„æ•°å­—åŠå…¶æ¬¡æ•°</span></span><br><span class="line">unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; delayed;  </span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">prune</span><span class="params">(T &amp;heap)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å½“å †ä¸ä¸ºç©ºæ—¶ï¼Œæ£€æŸ¥å †é¡¶å…ƒç´ æ˜¯å¦åœ¨å»¶è¿Ÿåˆ é™¤æ˜ å°„ä¸­</span></span><br><span class="line">    <span class="keyword">while</span> (!heap.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="type">int</span> num = heap.<span class="built_in">top</span>();</span><br><span class="line">        <span class="keyword">if</span> (delayed.<span class="built_in">count</span>(num)) &#123;  <span class="comment">// å¦‚æœå †é¡¶å…ƒç´ éœ€è¦è¢«åˆ é™¤</span></span><br><span class="line">            delayed[num]--;        <span class="comment">// å»¶è¿Ÿåˆ é™¤è®¡æ•°å‡ä¸€</span></span><br><span class="line">            <span class="keyword">if</span> (delayed[num] == <span class="number">0</span>)</span><br><span class="line">                delayed.<span class="built_in">erase</span>(num);  <span class="comment">// å¦‚æœæ¬¡æ•°ä¸º0åˆ™ä»æ˜ å°„ä¸­åˆ é™¤</span></span><br><span class="line">            heap.<span class="built_in">pop</span>();              <span class="comment">// å¼¹å‡ºå †é¡¶å…ƒç´ </span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>; <span class="comment">// å †é¡¶å…ƒç´ æœªè¢«å»¶è¿Ÿåˆ é™¤ï¼Œé€€å‡ºå¾ªç¯</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">balance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœå¤§æ ¹å †çš„å…ƒç´ æ¯”å°æ ¹å †å¤šè¶…è¿‡1ä¸ªï¼Œåˆ™å°†å¤§æ ¹å †çš„å †é¡¶ç§»åŠ¨åˆ°å°æ ¹å †ä¸­</span></span><br><span class="line">    <span class="keyword">if</span> (maxsize &gt; minsize + <span class="number">1</span>) &#123;</span><br><span class="line">        minheap.<span class="built_in">push</span>(maxheap.<span class="built_in">top</span>());</span><br><span class="line">        maxheap.<span class="built_in">pop</span>();</span><br><span class="line">        minsize++;</span><br><span class="line">        maxsize--;</span><br><span class="line">        <span class="built_in">prune</span>(maxheap);  <span class="comment">// æ¸…ç†å¤§æ ¹å †å †é¡¶å¯èƒ½å­˜åœ¨çš„å»¶è¿Ÿåˆ é™¤å…ƒç´ </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœå¤§æ ¹å †çš„å…ƒç´ æ•°ç›®å°äºå°æ ¹å †ï¼Œåˆ™å°†å°æ ¹å †çš„å †é¡¶ç§»åŠ¨åˆ°å¤§æ ¹å †ä¸­</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (maxsize &lt; minsize) &#123;</span><br><span class="line">        maxheap.<span class="built_in">push</span>(minheap.<span class="built_in">top</span>());</span><br><span class="line">        minheap.<span class="built_in">pop</span>();</span><br><span class="line">        maxsize++;</span><br><span class="line">        minsize--;</span><br><span class="line">        <span class="built_in">prune</span>(minheap);  <span class="comment">// æ¸…ç†å°æ ¹å †å †é¡¶å¯èƒ½å­˜åœ¨çš„å»¶è¿Ÿåˆ é™¤å…ƒç´ </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">erase</span><span class="params">(<span class="type">int</span> num)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ ‡è®°è¯¥æ•°å­—éœ€è¦å»¶è¿Ÿåˆ é™¤</span></span><br><span class="line">    delayed[num]++;</span><br><span class="line">    <span class="keyword">if</span> (num &lt;= maxheap.<span class="built_in">top</span>()) &#123;</span><br><span class="line">        maxsize--;</span><br><span class="line">        <span class="comment">// å¦‚æœå¾…åˆ é™¤æ•°å­—æ°å¥½æ˜¯å¤§æ ¹å †å †é¡¶ï¼Œåˆ™ç«‹å³æ¸…ç†</span></span><br><span class="line">        <span class="keyword">if</span> (num == maxheap.<span class="built_in">top</span>()) &#123;</span><br><span class="line">            <span class="built_in">prune</span>(maxheap);</span><br><span class="line">        &#125;   </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        minsize--;</span><br><span class="line">        <span class="comment">// å¦‚æœå¾…åˆ é™¤æ•°å­—æ°å¥½æ˜¯å°æ ¹å †å †é¡¶ï¼Œåˆ™ç«‹å³æ¸…ç†</span></span><br><span class="line">        <span class="keyword">if</span> (num == minheap.<span class="built_in">top</span>())</span><br><span class="line">            <span class="built_in">prune</span>(minheap);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">balance</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(<span class="type">void</span>)</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; op;</span><br><span class="line">        <span class="comment">// peek</span></span><br><span class="line">        <span class="keyword">if</span> (op[<span class="number">1</span>] == <span class="string">&#x27;e&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (size1 == <span class="number">0</span>)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;Invalid&quot;</span> &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="comment">// ä¸­ä½æ•°ä¸ºå¤§æ ¹å †çš„å †é¡¶</span></span><br><span class="line">                cout &lt;&lt; maxheap.<span class="built_in">top</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="comment">// pop</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (op[<span class="number">1</span>] == <span class="string">&#x27;o&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (size1 == <span class="number">0</span>)</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;Invalid&quot;</span> &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// è¾“å‡ºæ ˆé¡¶å…ƒç´ </span></span><br><span class="line">                cout &lt;&lt; stack1[size1 - <span class="number">1</span>] &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">                <span class="comment">// åˆ é™¤æ ˆé¡¶å…ƒç´ ï¼Œå¹¶åœ¨å †ä¸­å»¶è¿Ÿåˆ é™¤å¯¹åº”æ•°å­—</span></span><br><span class="line">                <span class="built_in">erase</span>(stack1[--size1]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="comment">// push</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            cin &gt;&gt; stack1[size1++];</span><br><span class="line">            <span class="comment">// å¦‚æœå¤§æ ¹å †ä¸ºç©ºï¼Œåˆ™ç›´æ¥æ’å…¥åˆ°å¤§æ ¹å †ä¸­</span></span><br><span class="line">            <span class="keyword">if</span> (maxsize == <span class="number">0</span>) &#123;</span><br><span class="line">                maxheap.<span class="built_in">push</span>(stack1[size1 - <span class="number">1</span>]);</span><br><span class="line">                maxsize++;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ ¹æ®æ–°æ’å…¥æ•°å­—ä¸å½“å‰ä¸­ä½æ•°æ¯”è¾ƒï¼Œå†³å®šæ”¾å…¥å“ªä¸ªå †</span></span><br><span class="line">            <span class="keyword">if</span> (stack1[size1 - <span class="number">1</span>] &gt; maxheap.<span class="built_in">top</span>()) &#123;</span><br><span class="line">                minheap.<span class="built_in">push</span>(stack1[size1 - <span class="number">1</span>]);</span><br><span class="line">                minsize++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                maxheap.<span class="built_in">push</span>(stack1[size1 - <span class="number">1</span>]);</span><br><span class="line">                maxsize++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¿æŒä¸¤ä¸ªå †çš„å¹³è¡¡</span></span><br><span class="line">            <span class="built_in">balance</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>) -&gt; ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> t; </span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å¤§å°æ ¹å †"><a href="#å¤§å°æ ¹å †" class="headerlink" title="å¤§å°æ ¹å †"></a>å¤§å°æ ¹å †</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// å‘å †ä¸­æ’å…¥æ–°å…ƒç´ ï¼Œä½¿å…¶æ»¡è¶³å¤§é¡¶å †æ€§è´¨</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">heapInsert</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(arr[i] &gt; arr[(i<span class="number">-1</span>)/<span class="number">2</span>]) &#123;</span><br><span class="line">        <span class="built_in">swap</span>(arr[i], arr[(i<span class="number">-1</span>)/<span class="number">2</span>]);</span><br><span class="line">        i = (i<span class="number">-1</span>)/<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å †åŒ–ï¼šä»ä¸‹æ ‡ i å¼€å§‹å‘ä¸‹è°ƒæ•´ï¼Œä½¿å­æ ‘æ»¡è¶³å¤§é¡¶å †æ€§è´¨ï¼Œsize ä¸ºå †çš„å¤§å°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">heapify</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> i, <span class="type">int</span> size)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> l = i * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> maxIdx;  <span class="comment">// ä¿å­˜å·¦å³å­©å­ä¸­è¾ƒå¤§å€¼çš„ä¸‹æ ‡</span></span><br><span class="line">    <span class="type">int</span> idx;     <span class="comment">// ä¿å­˜çˆ¶èŠ‚ç‚¹ä¸è¾ƒå¤§å­©å­ä¸­è¾ƒå¤§è€…çš„ä¸‹æ ‡</span></span><br><span class="line">    <span class="keyword">while</span>(l &lt; size) &#123;</span><br><span class="line">        <span class="comment">// åœ¨å·¦å³å­©å­ä¸­é€‰æ‹©è¾ƒå¤§è€…</span></span><br><span class="line">        maxIdx = (l + <span class="number">1</span> &lt; size &amp;&amp; arr[l+<span class="number">1</span>] &gt; arr[l]) ? l + <span class="number">1</span> : l;</span><br><span class="line">        <span class="comment">// é€‰æ‹©çˆ¶èŠ‚ç‚¹ä¸è¾ƒå¤§å­©å­ä¸­è¾ƒå¤§è€…</span></span><br><span class="line">        idx = (arr[i] &gt; arr[maxIdx]) ? i : maxIdx;</span><br><span class="line">        <span class="keyword">if</span>(idx == i) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">swap</span>(arr[i], arr[idx]);</span><br><span class="line">            i = idx;</span><br><span class="line">            l = i * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">heapPop</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> &amp;size)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(size &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> top = arr[<span class="number">0</span>];             <span class="comment">// ä¿å­˜å †é¡¶å…ƒç´ </span></span><br><span class="line">    <span class="built_in">swap</span>(arr[<span class="number">0</span>], arr[size - <span class="number">1</span>]);    <span class="comment">// å°†å †é¡¶ä¸æœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢</span></span><br><span class="line">    size--;                       <span class="comment">// åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="built_in">heapify</span>(arr, <span class="number">0</span>, size);        <span class="comment">// ä»é¡¶ç«¯é‡æ–°è°ƒæ•´å †</span></span><br><span class="line">    <span class="keyword">return</span> top;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ‰«æçº¿"><a href="#æ‰«æçº¿" class="headerlink" title="æ‰«æçº¿"></a>æ‰«æçº¿</h3><p>åˆ©ç”¨æ‰«ææ€æƒ³å¹³ç§»æŸä¸€ä¸ªè½´æ—¶ï¼ŒåŠ å·¥å¦ä¸€ä¸ªè½´çš„ä¿¡æ¯æ¥ä¸€è¾¹æ‰«è¿‡å»å°±èƒ½è§£å†³é—®é¢˜</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// https://www.luogu.com.cn/problem/P5490</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>) -&gt; ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">	<span class="comment">// cin &gt;&gt; t;</span></span><br><span class="line">	<span class="keyword">while</span>(t --)&#123;</span><br><span class="line">		<span class="type">int</span> n;</span><br><span class="line">		cin &gt;&gt; n;</span><br><span class="line">		vector&lt;<span class="type">int</span>&gt; v2 = &#123;<span class="number">-2</span>&#125;;</span><br><span class="line">		vector&lt;array&lt;<span class="type">int</span>, 4&gt;&gt; v1;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i ++)&#123;</span><br><span class="line">			<span class="type">int</span> x1, y1, x2, y2;</span><br><span class="line">			cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2;</span><br><span class="line">			v2.<span class="built_in">push_back</span>(y1);</span><br><span class="line">			v2.<span class="built_in">push_back</span>(y2);</span><br><span class="line">			v1.<span class="built_in">push_back</span>(&#123;x1, y1, y2, <span class="number">1</span>&#125;);</span><br><span class="line">			v1.<span class="built_in">push_back</span>(&#123;x2, y1, y2, <span class="number">-1</span>&#125;);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">sort</span>(v2.<span class="built_in">begin</span>() + <span class="number">1</span>, v2.<span class="built_in">end</span>());</span><br><span class="line">		<span class="type">int</span> m = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt; v2.<span class="built_in">size</span>(); i ++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(v2[i] != v2[m])&#123;</span><br><span class="line">				v2[++ m] = v2[i];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		v2.<span class="built_in">push_back</span>(v2[m]);</span><br><span class="line">		<span class="keyword">auto</span> find = [&amp;](<span class="type">int</span> x) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">			<span class="type">int</span> l = <span class="number">1</span>, r = m;</span><br><span class="line">			<span class="type">int</span> mid, ans = <span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">				mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">if</span>(v2[mid] &gt;= x)&#123;</span><br><span class="line">					ans = mid;</span><br><span class="line">					r = mid - <span class="number">1</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					l = mid + <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> ans;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">sum1</span><span class="params">(m &lt;&lt; <span class="number">4</span>)</span>, <span class="title">cnt1</span><span class="params">(m &lt;&lt; <span class="number">4</span>)</span>, <span class="title">cover</span><span class="params">(m &lt;&lt; <span class="number">4</span>)</span></span>;</span><br><span class="line">		<span class="keyword">auto</span> build = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> i, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">			<span class="keyword">if</span>(l &lt; r)&#123;</span><br><span class="line">				<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">				<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span>, l, mid);</span><br><span class="line">				<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">			&#125;</span><br><span class="line">			cover[i] = v2[r + <span class="number">1</span>] - v2[l];</span><br><span class="line">			sum1[i] = cnt1[i] = <span class="number">0</span>;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="built_in">build</span>(build, <span class="number">1</span>, <span class="number">1</span>, m);</span><br><span class="line">		<span class="keyword">auto</span> up = [&amp;](<span class="type">int</span> i) &#123;</span><br><span class="line">			<span class="keyword">if</span>(cnt1[i] &gt; <span class="number">0</span>)&#123;</span><br><span class="line">				sum1[i] = cover[i]; </span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				sum1[i] = sum1[i &lt;&lt; <span class="number">1</span>] + sum1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">auto</span> set = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> i, <span class="type">int</span> bl, <span class="type">int</span> br, <span class="type">int</span> val, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">void</span> &#123;</span><br><span class="line">			<span class="keyword">if</span>(bl &lt;= l &amp;&amp; br &gt;= r)&#123;</span><br><span class="line">				cnt1[i] += val;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">if</span>(bl &lt;= mid)&#123;</span><br><span class="line">					<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span>, bl, br, val, l, mid);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(br &gt; mid)&#123;</span><br><span class="line">					<span class="built_in">f</span>(f, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, bl, br, val, mid + <span class="number">1</span>, r);</span><br><span class="line">				&#125;     </span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">up</span>(i);</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="built_in">sort</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>());</span><br><span class="line">		<span class="type">int</span> last = <span class="number">0</span>, ans = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n &lt;&lt; <span class="number">1</span>; i ++)&#123;</span><br><span class="line">			<span class="type">int</span> now = v1[i][<span class="number">0</span>];</span><br><span class="line">			ans += sum1[<span class="number">1</span>] * (now - last);</span><br><span class="line">			<span class="comment">// cout &lt;&lt; sum1[1] &lt;&lt; &quot; &quot; &lt;&lt; now &lt;&lt; &quot; &quot; &lt;&lt; last &lt;&lt; &quot;\n&quot;;</span></span><br><span class="line">			last = now;</span><br><span class="line">			<span class="built_in">set</span>(set, <span class="number">1</span>, <span class="built_in">find</span>(v1[i][<span class="number">1</span>]), <span class="built_in">find</span>(v1[i][<span class="number">2</span>]) - <span class="number">1</span>, v1[i][<span class="number">3</span>], <span class="number">1</span>, m);</span><br><span class="line">		&#125;</span><br><span class="line">		cout &lt;&lt; ans &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><h4 id="å½’å¹¶åˆ†æ²»"><a href="#å½’å¹¶åˆ†æ²»" class="headerlink" title="å½’å¹¶åˆ†æ²»"></a>å½’å¹¶åˆ†æ²»</h4><p>åˆ†è€Œæ²»ä¹‹</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> M 500</span></span><br><span class="line"><span class="type">int</span> a1[M];</span><br><span class="line"><span class="type">int</span> temp[M];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> m,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> i=l;</span><br><span class="line">    <span class="type">int</span> j=m+<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> mark=l;</span><br><span class="line">    <span class="keyword">while</span>(i&lt;=m &amp;&amp; j&lt;=r) a1[mark++]=temp[i]&lt;temp[j]?temp[i++]:temp[j++];</span><br><span class="line">    <span class="keyword">while</span>(i&lt;=m) a1[mark++]=temp[i++];</span><br><span class="line">    <span class="keyword">while</span>(j&lt;=r) a1[mark++]=temp[j++];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> k=l;k&lt;=r;k++) temp[k]=a1[k];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">guibing</span><span class="params">(<span class="type">int</span> l,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(l&gt;=r) <span class="keyword">return</span> ;</span><br><span class="line">	<span class="type">int</span> m=(l+r)/<span class="number">2</span>;</span><br><span class="line">	<span class="built_in">guibing</span>(l,m);</span><br><span class="line">	<span class="built_in">guibing</span>(m+<span class="number">1</span>,r);</span><br><span class="line">	<span class="built_in">merge</span>(l,m,r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        cin&gt;&gt;a1[i];</span><br><span class="line">        temp[i]=a1[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">guibing</span>(<span class="number">0</span>,n<span class="number">-1</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++) cout&lt;&lt;a1[i]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="éšæœºå¿«æ’-é€‰æ‹©ç¬¬-k-å°-å¤§-çš„æ•°"><a href="#éšæœºå¿«æ’-é€‰æ‹©ç¬¬-k-å°-å¤§-çš„æ•°" class="headerlink" title="éšæœºå¿«æ’ &amp; é€‰æ‹©ç¬¬ k å°&#x2F;å¤§ çš„æ•°"></a>éšæœºå¿«æ’ &amp; é€‰æ‹©ç¬¬ k å°&#x2F;å¤§ çš„æ•°</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> M 500</span></span><br><span class="line"><span class="comment">// ç»å…¸</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">partition1</span><span class="params">(<span class="type">int</span> a1[],<span class="type">int</span> l,<span class="type">int</span> mid,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> i=l;</span><br><span class="line">    <span class="type">int</span> j=r;</span><br><span class="line">    <span class="type">int</span> temp=a1[mid];</span><br><span class="line">    <span class="built_in">swap</span>(a1[mid],a1[l]);</span><br><span class="line">    <span class="keyword">while</span>(i&lt;j)&#123;</span><br><span class="line">        <span class="keyword">while</span>(j&gt;i &amp;&amp; a1[j]&gt;temp)&#123;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        a1[i]=a1[j];</span><br><span class="line">        <span class="keyword">while</span>(i&lt;j &amp;&amp; a1[i]&lt;=temp)&#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        a1[j]=a1[i];</span><br><span class="line">    &#125;</span><br><span class="line">    a1[i]=temp;</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">qs1</span><span class="params">(<span class="type">int</span> a1[],<span class="type">int</span> l,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l&gt;=r) <span class="keyword">return</span> ;</span><br><span class="line">    <span class="type">int</span> x=l+(<span class="built_in">rand</span>()%(r-l+<span class="number">1</span>));</span><br><span class="line">    <span class="type">int</span> mid=<span class="built_in">partition1</span>(a1,l,x,r);</span><br><span class="line">    <span class="built_in">qs1</span>(a1,l,mid<span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">qs1</span>(a1,mid+<span class="number">1</span>,r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¼˜åŒ–</span></span><br><span class="line"><span class="type">int</span> first;</span><br><span class="line"><span class="type">int</span> second;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">partition2</span><span class="params">(<span class="type">int</span> a1[],<span class="type">int</span> l,<span class="type">int</span> mid,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    first=l;</span><br><span class="line">    second=r;</span><br><span class="line">    <span class="type">int</span> temp=a1[mid];</span><br><span class="line">    <span class="type">int</span> i=l;</span><br><span class="line">    <span class="keyword">while</span>(i&lt;=second)&#123;</span><br><span class="line">        <span class="keyword">if</span>(a1[i]==temp)&#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(a1[i]&lt;temp)&#123;</span><br><span class="line">            <span class="built_in">swap</span>(a1[first++],a1[i++]);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">swap</span>(a1[i],a1[second--]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">qs2</span><span class="params">(<span class="type">int</span> a1[],<span class="type">int</span> l,<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(l&gt;=r) <span class="keyword">return</span> ;</span><br><span class="line">    <span class="type">int</span> x=l+(<span class="built_in">rand</span>()%(r-l+<span class="number">1</span>));</span><br><span class="line">    <span class="built_in">partition2</span>(a1,l,x,r);</span><br><span class="line">    <span class="type">int</span> left=first;</span><br><span class="line">    <span class="type">int</span> right=second;</span><br><span class="line">    <span class="built_in">qs2</span>(a1,l,left<span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">qs2</span>(a1,right+<span class="number">1</span>,r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// éšæœºé€‰æ‹©ç¬¬ tar å°çš„å…ƒç´ ï¼ˆ0-basedï¼‰</span></span><br><span class="line"><span class="comment">// è¦æ±‚ç¬¬kå¤§çš„å…ƒç´ ç­‰åŒäºæ±‚n - kå°çš„å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">randomizedSelect</span><span class="params">(<span class="type">int</span> a1[], <span class="type">int</span> k, <span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">0</span>, r = n - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        <span class="type">int</span> x = l + <span class="built_in">rand</span>() % (r - l + <span class="number">1</span>); <span class="comment">// éšæœºé€‰å–æ¢çº½å€¼</span></span><br><span class="line">        <span class="built_in">partition2</span>(a1, l, x, r); <span class="comment">// ä¸‰è·¯åˆ’åˆ†ï¼Œç»“æœé€šè¿‡ first å’Œ second è¡¨ç¤º</span></span><br><span class="line">        <span class="keyword">if</span> (k &lt; first) &#123;</span><br><span class="line">            r = first - <span class="number">1</span>; <span class="comment">// ç›®æ ‡åœ¨å·¦ä¾§</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (k &gt; second) &#123;</span><br><span class="line">            l = second + <span class="number">1</span>; <span class="comment">// ç›®æ ‡åœ¨å³ä¾§</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> a1[k]; <span class="comment">// å‘½ä¸­ï¼štar ä½äºç­‰äºåŒºåŸŸå†…</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è‹¥æœªæ‰¾åˆ°ï¼ˆç†è®ºä¸Šä¸ä¼šå‡ºç°ï¼‰ï¼Œè¿”å› -1 è¡¨ç¤ºé”™è¯¯</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é˜¶ä¹˜ä¸é€†å…ƒ"><a href="#é˜¶ä¹˜ä¸é€†å…ƒ" class="headerlink" title="é˜¶ä¹˜ä¸é€†å…ƒ"></a>é˜¶ä¹˜ä¸é€†å…ƒ</h3><p>ä¹˜ä»¥é€†å…ƒç­‰äºé™¤ä»¥æŸä¸€ä¸ªæ•°å†å–æ¨¡</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="keyword">auto</span> power = [&amp;](<span class="type">int</span> x, <span class="type">int</span> n) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n)&#123;</span><br><span class="line">        <span class="keyword">if</span>(n &amp; <span class="number">1</span>)&#123;</span><br><span class="line">            ans = ans * x % mod;</span><br><span class="line">        &#125;</span><br><span class="line">        x = x * x % mod;</span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">fac</span><span class="params">(n + <span class="number">1</span>)</span></span>; <span class="comment">// é˜¶ä¹˜</span></span><br><span class="line">fac[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">    fac[i] = fac[i - <span class="number">1</span>] * i % mod; </span><br><span class="line">&#125;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">inv</span><span class="params">(n + <span class="number">1</span>)</span></span>; <span class="comment">// é€†å…ƒ</span></span><br><span class="line">inv[n] = <span class="built_in">power</span>(fac[n], mod - <span class="number">2</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i --)&#123;</span><br><span class="line">    inv[i] = inv[i + <span class="number">1</span>] * (i + <span class="number">1</span>) % mod;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">auto</span> C = [&amp;](<span class="type">int</span> n, <span class="type">int</span> m) -&gt; <span class="type">int</span> &#123; <span class="comment">// ç»„åˆæ•°</span></span><br><span class="line">    <span class="keyword">if</span>(m &gt; n)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fac[n] * inv[m] % mod * inv[n - m] % mod;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="çº¿æ€§é€’æ¨é€†å…ƒ"><a href="#çº¿æ€§é€’æ¨é€†å…ƒ" class="headerlink" title="çº¿æ€§é€’æ¨é€†å…ƒ"></a>çº¿æ€§é€’æ¨é€†å…ƒ</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// p å¿…é¡»ä¸ºè´¨æ•°</span></span><br><span class="line">inv2[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">	inv2[i] = (p - p / i) * inv2[p % i] % p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="çŸ©é˜µå¿«é€Ÿå¹‚"><a href="#çŸ©é˜µå¿«é€Ÿå¹‚" class="headerlink" title="çŸ©é˜µå¿«é€Ÿå¹‚"></a>çŸ©é˜µå¿«é€Ÿå¹‚</h3><p>åŠ é€ŸçŸ©é˜µè®¡ç®—</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;vector&lt;<span class="type">long</span> <span class="type">long</span>&gt;&gt; <span class="built_in">multiply</span>(<span class="type">const</span> vector&lt;vector&lt;<span class="type">long</span> <span class="type">long</span>&gt;&gt; &amp;a,<span class="type">const</span> vector&lt;vector&lt;<span class="type">long</span> <span class="type">long</span>&gt;&gt; &amp;b) &#123;</span><br><span class="line">		<span class="type">int</span> n = a.<span class="built_in">size</span>(), p = a[<span class="number">0</span>].<span class="built_in">size</span>(), m = b[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">		<span class="function">vector <span class="title">ans</span><span class="params">(n, vector&lt;<span class="type">long</span> <span class="type">long</span>&gt;(m, <span class="number">0</span>))</span></span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; p; k++) &#123;</span><br><span class="line">					ans[i][j] += a[i][k] * b[k][j];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">	vector&lt;vector&lt;<span class="type">long</span> <span class="type">long</span>&gt;&gt; <span class="built_in">power</span>(vector&lt;vector&lt;<span class="type">long</span> <span class="type">long</span>&gt;&gt; v, <span class="type">int</span> cnt) &#123;</span><br><span class="line">		<span class="type">int</span> n = v.<span class="built_in">size</span>();</span><br><span class="line">		vector&lt;vector&lt;<span class="type">long</span> <span class="type">long</span>&gt;&gt; <span class="built_in">ans</span>(n, <span class="built_in">vector</span>&lt;<span class="type">long</span> <span class="type">long</span>&gt;(n, <span class="number">0</span>));</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">			ans[i][i] = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">while</span> (cnt) &#123;</span><br><span class="line">			<span class="keyword">if</span> (cnt &amp; <span class="number">1</span>) &#123;</span><br><span class="line">				ans = <span class="built_in">multiply</span>(ans, v);</span><br><span class="line">			&#125;</span><br><span class="line">			v = <span class="built_in">multiply</span>(v, v);</span><br><span class="line">			cnt &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> ans;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">tribonacci</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">1</span> || n == <span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">long</span> <span class="type">long</span>&gt;&gt; start = &#123;&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">long</span> <span class="type">long</span>&gt;&gt; base = &#123;&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">multiply</span>(start, <span class="built_in">power</span>(base, n - <span class="number">2</span>))[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•"><a href="#æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•" class="headerlink" title="æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•"></a>æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•</h3><p>å¾—åˆ°æŸä¸€ä¸ªax + by &#x3D; dçš„å„ç§å‚æ•°ï¼Œdä¸ºæœ€å¤§å…¬çº¦æ•°ï¼Œxå’Œyä¸ºè´ç¥–ç³»æ•°ï¼ˆè£´èœ€å®šç†çš„ç®—æ³•å®ç°ï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> x, y, px, py;</span><br><span class="line"><span class="type">int</span> d;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">gcd1</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!b)&#123;</span><br><span class="line">        x = <span class="number">1</span>;</span><br><span class="line">        y = <span class="number">0</span>;</span><br><span class="line">        d = a;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">gcd1</span>(b, a % b);</span><br><span class="line">        px = x;</span><br><span class="line">        py = y;</span><br><span class="line">        x = py;</span><br><span class="line">        y = px - py * (a / b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>); cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="type">int</span> a, b;</span><br><span class="line">    cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">    <span class="built_in">gcd1</span>(a, b);</span><br><span class="line">    cout &lt;&lt; (x % b + b) % b &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Stein-GCDç®—æ³•"><a href="#Stein-GCDç®—æ³•" class="headerlink" title="Stein GCDç®—æ³•"></a>Stein GCDç®—æ³•</h3><p>Steinç®—æ³•æ˜¯ä¸€ç§è®¡ç®—ä¸¤ä¸ªéè´Ÿæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°çš„ç®—æ³•ã€‚å®ƒæ¯”ä¼ ç»Ÿçš„æ¬§å‡ é‡Œå¾—ç®—æ³•åœ¨æŸäº›æƒ…å†µä¸‹æ›´é«˜æ•ˆï¼Œ<br>å› ä¸ºå®ƒé¿å…äº†ä½¿ç”¨é™¤æ³•æ“ä½œã€‚è¯¥ç®—æ³•åˆ©ç”¨äº†ä»¥ä¸‹å‡ æ¡è§„åˆ™ï¼š<br>GCD(0, b) &#x3D; bï¼šå¦‚æœä¸€ä¸ªæ•°æ˜¯0ï¼Œå¦ä¸€ä¸ªæ•°å°±æ˜¯æœ€å¤§å…¬çº¦æ•°ã€‚<br>GCD(a, 0) &#x3D; aï¼šåŒä¸Šï¼Œå¦‚æœä¸€ä¸ªæ•°æ˜¯0ï¼Œå¦ä¸€ä¸ªæ•°å°±æ˜¯æœ€å¤§å…¬çº¦æ•°ã€‚<br>å¦‚æœaå’Œbéƒ½æ˜¯å¶æ•°ï¼Œé‚£ä¹ˆGCD(a, b) &#x3D; 2 * GCD(a&#x2F;2, b&#x2F;2)ã€‚<br>å¦‚æœaæ˜¯å¶æ•°ä¸”bæ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆGCD(a, b) &#x3D; GCD(a&#x2F;2, b)ã€‚<br>å¦‚æœaæ˜¯å¥‡æ•°ä¸”bæ˜¯å¶æ•°ï¼Œé‚£ä¹ˆGCD(a, b) &#x3D; GCD(a, b&#x2F;2)ã€‚<br>å¦‚æœaå’Œbéƒ½æ˜¯å¥‡æ•°ï¼Œå¹¶ä¸”a &gt;&#x3D; bï¼Œé‚£ä¹ˆGCD(a, b) &#x3D; GCD((a - b)&#x2F;2, b)ã€‚<br>å¦‚æœaå’Œbéƒ½æ˜¯å¥‡æ•°ï¼Œå¹¶ä¸”a &lt; bï¼Œé‚£ä¹ˆGCD(a, b) &#x3D; GCD((b - a)&#x2F;2, a)ã€‚<br>é€šè¿‡ä¸æ–­åº”ç”¨è¿™äº›è§„åˆ™ï¼Œæœ€ç»ˆå¯ä»¥å°†ä¸¤ä¸ªæ•°å˜ä¸º0ï¼Œä»è€Œæ‰¾åˆ°å®ƒä»¬çš„æœ€å¤§å…¬çº¦æ•°ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">int</span> <span class="title">steinGCD</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> a, <span class="type">unsigned</span> <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a == <span class="number">0</span>) <span class="keyword">return</span> b;</span><br><span class="line">    <span class="keyword">if</span> (b == <span class="number">0</span>) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°aå’Œbçš„å…±åŒå› å­2çš„æ•°é‡</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> shift = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (((a | b) &amp; <span class="number">1</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">        a &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        shift++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ä½¿aæˆä¸ºå¥‡æ•°</span></span><br><span class="line">    <span class="keyword">while</span> ((a &amp; <span class="number">1</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">        a &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="comment">// ä½¿bæˆä¸ºå¥‡æ•°</span></span><br><span class="line">        <span class="keyword">while</span> ((b &amp; <span class="number">1</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">            b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¿è¯a &lt;= b</span></span><br><span class="line">        <span class="keyword">if</span> (a &gt; b) &#123;</span><br><span class="line">            <span class="built_in">swap</span>(a, b);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// b - aæ˜¯å¶æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»§ç»­å³ç§»</span></span><br><span class="line">        b = (b - a);</span><br><span class="line">    &#125; <span class="keyword">while</span> (b != <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// æ¢å¤å…±åŒå› å­2çš„æ•°é‡</span></span><br><span class="line">    <span class="keyword">return</span> a &lt;&lt; shift;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Least-Recently-Used-LRU-ç®—æ³•"><a href="#Least-Recently-Used-LRU-ç®—æ³•" class="headerlink" title="Least Recently Used (LRU)ç®—æ³•"></a>Least Recently Used (LRU)ç®—æ³•</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> M 1010</span></span><br><span class="line"><span class="comment">// Least Recently Used (LRU) ç¼“å­˜å®ç°</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LRU</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// å®šä¹‰åŒå‘é“¾è¡¨èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">DoubleNode</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="type">int</span> key;    <span class="comment">// èŠ‚ç‚¹å¯¹åº”çš„ key</span></span><br><span class="line">        <span class="type">int</span> val;    <span class="comment">// èŠ‚ç‚¹å¯¹åº”çš„ value</span></span><br><span class="line">        DoubleNode* next; <span class="comment">// åç»§èŠ‚ç‚¹æŒ‡é’ˆ</span></span><br><span class="line">        DoubleNode* last; <span class="comment">// å‰é©±èŠ‚ç‚¹æŒ‡é’ˆ</span></span><br><span class="line">        <span class="built_in">DoubleNode</span>(<span class="type">int</span> k, <span class="type">int</span> v): <span class="built_in">key</span>(k), <span class="built_in">val</span>(v), <span class="built_in">last</span>(<span class="literal">nullptr</span>), <span class="built_in">next</span>(<span class="literal">nullptr</span>) &#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// å®šä¹‰åŒå‘é“¾è¡¨ï¼Œç”¨äºç»´æŠ¤è®¿é—®é¡ºåº</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">DoubleList</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        DoubleNode* head; <span class="comment">// é“¾è¡¨å¤´éƒ¨ï¼ˆæœ€ä¹…æœªä½¿ç”¨ï¼‰</span></span><br><span class="line">        DoubleNode* tail; <span class="comment">// é“¾è¡¨å°¾éƒ¨ï¼ˆæœ€è¿‘ä½¿ç”¨ï¼‰</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">DoubleList</span>(): <span class="built_in">head</span>(<span class="literal">nullptr</span>), <span class="built_in">tail</span>(<span class="literal">nullptr</span>) &#123;&#125;</span><br><span class="line">        <span class="comment">// åœ¨é“¾è¡¨å°¾éƒ¨æ·»åŠ æ–°èŠ‚ç‚¹ï¼ˆæœ€æ–°ä½¿ç”¨çš„èŠ‚ç‚¹ï¼‰</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">addNode</span><span class="params">(DoubleNode* newNode)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (!newNode) <span class="keyword">return</span>;</span><br><span class="line">            <span class="keyword">if</span> (!head) &#123;</span><br><span class="line">                head = tail = newNode;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                tail-&gt;next = newNode;</span><br><span class="line">                newNode-&gt;last = tail;</span><br><span class="line">                tail = newNode;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°†å·²æœ‰èŠ‚ç‚¹ç§»åŠ¨åˆ°é“¾è¡¨å°¾éƒ¨ï¼ˆè¡¨ç¤ºæœ€è¿‘ä½¿ç”¨ï¼‰</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">moveNodeToTail</span><span class="params">(DoubleNode* node)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (tail == node) <span class="keyword">return</span>;  <span class="comment">// èŠ‚ç‚¹å·²åœ¨å°¾éƒ¨ï¼Œæ— éœ€ç§»åŠ¨</span></span><br><span class="line">            <span class="keyword">if</span> (head == node) &#123;        <span class="comment">// èŠ‚ç‚¹ä½äºå¤´éƒ¨</span></span><br><span class="line">                head = node-&gt;next;</span><br><span class="line">                <span class="keyword">if</span> (head) head-&gt;last = <span class="literal">nullptr</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;                   <span class="comment">// èŠ‚ç‚¹åœ¨ä¸­é—´</span></span><br><span class="line">                node-&gt;last-&gt;next = node-&gt;next;</span><br><span class="line">                <span class="keyword">if</span> (node-&gt;next)</span><br><span class="line">                    node-&gt;next-&gt;last = node-&gt;last;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å°†èŠ‚ç‚¹ç§»åŠ¨åˆ°å°¾éƒ¨</span></span><br><span class="line">            node-&gt;last = tail;</span><br><span class="line">            node-&gt;next = <span class="literal">nullptr</span>;</span><br><span class="line">            <span class="keyword">if</span> (tail) tail-&gt;next = node;</span><br><span class="line">            tail = node;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç§»é™¤é“¾è¡¨å¤´éƒ¨èŠ‚ç‚¹ï¼ˆæœ€ä¹…æœªä½¿ç”¨çš„èŠ‚ç‚¹ï¼‰å¹¶è¿”å›è¯¥èŠ‚ç‚¹</span></span><br><span class="line">        <span class="function">DoubleNode* <span class="title">removeHead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (!head) <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">            DoubleNode* ans = head;</span><br><span class="line">            <span class="keyword">if</span> (head == tail) &#123;</span><br><span class="line">                head = tail = <span class="literal">nullptr</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                head = head-&gt;next;</span><br><span class="line">                <span class="keyword">if</span> (head) head-&gt;last = <span class="literal">nullptr</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ans;</span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="comment">// è¾…åŠ©å‡½æ•°ï¼šæ¸…ç©ºé“¾è¡¨ï¼Œé‡Šæ”¾æ‰€æœ‰èŠ‚ç‚¹</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">clear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            DoubleNode* cur = head;</span><br><span class="line">            <span class="keyword">while</span>(cur) &#123;</span><br><span class="line">                DoubleNode* next = cur-&gt;next;</span><br><span class="line">                <span class="keyword">delete</span> cur;</span><br><span class="line">                cur = next;</span><br><span class="line">            &#125;</span><br><span class="line">            head = tail = <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;    </span><br><span class="line">        <span class="comment">// æä¾›é“¾è¡¨å¤´éƒ¨è®¿é—®ï¼Œç”¨äºææ„æ—¶éå†</span></span><br><span class="line">        <span class="function">DoubleNode* <span class="title">getHead</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    unordered_map&lt;<span class="type">int</span>, DoubleNode*&gt; keyNodeMap; <span class="comment">// å¿«é€Ÿå®šä½ key å¯¹åº”çš„èŠ‚ç‚¹</span></span><br><span class="line">    DoubleList nodeList;                        <span class="comment">// ç»´æŠ¤èŠ‚ç‚¹é¡ºåºçš„åŒå‘é“¾è¡¨</span></span><br><span class="line">    <span class="type">int</span> cap;                                    <span class="comment">// ç¼“å­˜å®¹é‡</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="built_in">LRU</span>(<span class="type">int</span> c): <span class="built_in">cap</span>(c) &#123;&#125;</span><br><span class="line">    <span class="comment">// ææ„å‡½æ•°ï¼Œé‡Šæ”¾æ‰€æœ‰ç”³è¯·çš„å†…å­˜</span></span><br><span class="line">    ~<span class="built_in">LRU</span>() &#123;</span><br><span class="line">        <span class="comment">// éå†åŒå‘é“¾è¡¨é‡Šæ”¾èŠ‚ç‚¹</span></span><br><span class="line">        DoubleNode* cur = nodeList.<span class="built_in">getHead</span>();</span><br><span class="line">        <span class="keyword">while</span>(cur) &#123;</span><br><span class="line">            DoubleNode* next = cur-&gt;next;</span><br><span class="line">            <span class="keyword">delete</span> cur;</span><br><span class="line">            cur = next;</span><br><span class="line">        &#125;</span><br><span class="line">        keyNodeMap.<span class="built_in">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * @brief è·å– key å¯¹åº”çš„å€¼ï¼Œå¹¶å°†è¯¥èŠ‚ç‚¹ç§»åˆ°å°¾éƒ¨è¡¨ç¤ºæœ€è¿‘ä½¿ç”¨</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * @param key ç¼“å­˜ä¸­çš„é”®</span></span><br><span class="line"><span class="comment">     * @return int è‹¥ key å­˜åœ¨åˆ™è¿”å›å¯¹åº”å€¼ï¼Œå¦åˆ™è¿”å› -1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">get</span><span class="params">(<span class="type">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (keyNodeMap.<span class="built_in">count</span>(key)) &#123;</span><br><span class="line">            DoubleNode* ans = keyNodeMap[key];</span><br><span class="line">            nodeList.<span class="built_in">moveNodeToTail</span>(ans);  <span class="comment">// æ›´æ–°æœ€è¿‘ä½¿ç”¨</span></span><br><span class="line">            <span class="keyword">return</span> ans-&gt;val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * @brief å‘ç¼“å­˜ä¸­æ’å…¥æˆ–æ›´æ–°ä¸€ä¸ª key-value å¯¹</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * è‹¥ key å­˜åœ¨ï¼Œåˆ™æ›´æ–°å…¶å€¼å¹¶å°†èŠ‚ç‚¹ç§»åˆ°å°¾éƒ¨ï¼›</span></span><br><span class="line"><span class="comment">     * è‹¥ key ä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥æ–°èŠ‚ç‚¹ï¼Œè‹¥ç¼“å­˜å·²æ»¡ï¼Œåˆ™ç§»é™¤æœ€ä¹…æœªä½¿ç”¨çš„èŠ‚ç‚¹ã€‚</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * @param key ç¼“å­˜ä¸­çš„é”®</span></span><br><span class="line"><span class="comment">     * @param val1 ç¼“å­˜ä¸­çš„å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">put</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> val1)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (keyNodeMap.<span class="built_in">count</span>(key)) &#123;</span><br><span class="line">            <span class="comment">// key å­˜åœ¨ï¼Œæ›´æ–°å€¼å¹¶ç§»åˆ°å°¾éƒ¨</span></span><br><span class="line">            DoubleNode* node = keyNodeMap[key];</span><br><span class="line">            node-&gt;val = val1;</span><br><span class="line">            nodeList.<span class="built_in">moveNodeToTail</span>(node);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœç¼“å­˜å·²æ»¡ï¼Œåˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">if</span> (keyNodeMap.<span class="built_in">size</span>() == cap) &#123;</span><br><span class="line">                DoubleNode* removed = nodeList.<span class="built_in">removeHead</span>();</span><br><span class="line">                <span class="keyword">if</span>(removed) &#123;</span><br><span class="line">                    keyNodeMap.<span class="built_in">erase</span>(removed-&gt;key);</span><br><span class="line">                    <span class="keyword">delete</span> removed;  <span class="comment">// é‡Šæ”¾å†…å­˜</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ’å…¥æ–°èŠ‚ç‚¹</span></span><br><span class="line">            DoubleNode* newNode = <span class="keyword">new</span> <span class="built_in">DoubleNode</span>(key, val1);</span><br><span class="line">            keyNodeMap[key] = newNode;</span><br><span class="line">            nodeList.<span class="built_in">addNode</span>(newNode);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// æµ‹è¯•ç”¨ä¾‹ï¼šåˆ›å»ºå®¹é‡ä¸º3çš„LRUç¼“å­˜</span></span><br><span class="line">    <span class="function">LRU <span class="title">cache</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">    <span class="comment">// æ’å…¥æ•°æ®</span></span><br><span class="line">    cache.<span class="built_in">put</span>(<span class="number">1</span>, <span class="number">100</span>);</span><br><span class="line">    cache.<span class="built_in">put</span>(<span class="number">2</span>, <span class="number">200</span>);</span><br><span class="line">    cache.<span class="built_in">put</span>(<span class="number">3</span>, <span class="number">300</span>);</span><br><span class="line">    <span class="comment">// è®¿é—® key 1ï¼Œå°†å…¶æ›´æ–°ä¸ºæœ€è¿‘ä½¿ç”¨</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;get(1): &quot;</span> &lt;&lt; cache.<span class="built_in">get</span>(<span class="number">1</span>) &lt;&lt; <span class="string">&quot;\n&quot;</span>; <span class="comment">// è¾“å‡º 100</span></span><br><span class="line">    <span class="comment">// æ’å…¥æ–°æ•°æ®ï¼Œå½“ç¼“å­˜æ»¡æ—¶ä¼šæ·˜æ±°æœ€ä¹…æœªä½¿ç”¨çš„ keyï¼ˆæ­¤æ—¶ key 2 è¢«æ·˜æ±°ï¼‰</span></span><br><span class="line">    cache.<span class="built_in">put</span>(<span class="number">4</span>, <span class="number">400</span>);</span><br><span class="line">    <span class="comment">// å°è¯•è·å–è¢«æ·˜æ±°çš„ key 2</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;get(2): &quot;</span> &lt;&lt; cache.<span class="built_in">get</span>(<span class="number">2</span>) &lt;&lt; <span class="string">&quot;\n&quot;</span>; <span class="comment">// è¾“å‡º -1ï¼Œè¡¨ç¤ºä¸å­˜åœ¨</span></span><br><span class="line">    <span class="comment">// ç»§ç»­è·å–å…¶ä»– key çš„å€¼</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;get(3): &quot;</span> &lt;&lt; cache.<span class="built_in">get</span>(<span class="number">3</span>) &lt;&lt; <span class="string">&quot;\n&quot;</span>; <span class="comment">// è¾“å‡º 300</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;get(4): &quot;</span> &lt;&lt; cache.<span class="built_in">get</span>(<span class="number">4</span>) &lt;&lt; <span class="string">&quot;\n&quot;</span>; <span class="comment">// è¾“å‡º 400</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="äºŒè¿›åˆ¶ä½"><a href="#äºŒè¿›åˆ¶ä½" class="headerlink" title="äºŒè¿›åˆ¶ä½"></a>äºŒè¿›åˆ¶ä½</h3><h4 id="ä½å›¾"><a href="#ä½å›¾" class="headerlink" title="ä½å›¾"></a>ä½å›¾</h4><p>åˆ¤æ–­æŸä¸€ä¸ªæ•°æ˜¯å¦å­˜åœ¨</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> arr[],<span class="type">int</span> num)</span></span>&#123;</span><br><span class="line">	arr[num/<span class="number">32</span>] |= <span class="number">1</span>&lt;&lt;(num%<span class="number">32</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">remove</span><span class="params">(<span class="type">int</span> arr[],<span class="type">int</span> num)</span></span>&#123;</span><br><span class="line">	arr[num/<span class="number">32</span>] &amp;= ~(<span class="number">1</span>&lt;&lt;(num%<span class="number">32</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reverse</span><span class="params">(<span class="type">int</span> arr[],<span class="type">int</span> num)</span></span>&#123;</span><br><span class="line">	arr[num/<span class="number">32</span>] ^= <span class="number">1</span>&lt;&lt;(num%<span class="number">32</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">contains</span><span class="params">(<span class="type">int</span> arr[],<span class="type">int</span> num)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> arr[num/<span class="number">32</span>] &amp; (<span class="number">1</span>&lt;&lt;(num%<span class="number">32</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	cin&gt;&gt;n;</span><br><span class="line">	<span class="type">int</span> set[(n + <span class="number">32</span> - <span class="number">1</span>) / <span class="number">32</span>]; <span class="comment">// è¡¨ç¤ºå­˜å‚¨nä¸ªæ•°éœ€è¦çš„å¤§å°</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä½è¿ç®—å®ç°å››åˆ™è¿ç®—"><a href="#ä½è¿ç®—å®ç°å››åˆ™è¿ç®—" class="headerlink" title="ä½è¿ç®—å®ç°å››åˆ™è¿ç®—"></a>ä½è¿ç®—å®ç°å››åˆ™è¿ç®—</h4><p>åŠ é€Ÿè¿ç®—</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> ans = n;</span><br><span class="line">    <span class="keyword">while</span>(m != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// æ— è¿›ä½ç›¸åŠ </span></span><br><span class="line">        ans = n ^ m;</span><br><span class="line">        <span class="comment">// è®¡ç®—è¿›ä½ï¼Œæ³¨æ„è¿›ä½è¦å·¦ç§»ä¸€ä½</span></span><br><span class="line">        m = (n &amp; m) &lt;&lt; <span class="number">1</span>;</span><br><span class="line">        n = ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">neg</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å¯¹ n å–åååŠ  1 å¾—åˆ° -n</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">add</span>(~n, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">minus1</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">add</span>(n, <span class="built_in">neg</span>(m));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">mul</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(m != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>((m &amp; <span class="number">1</span>) == <span class="number">1</span>) &#123;</span><br><span class="line">            ans = <span class="built_in">add</span>(ans, n);</span><br><span class="line">        &#125;</span><br><span class="line">        n &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">        m &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">div1</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> m)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è½¬ä¸ºæ­£æ•°å¤„ç†ï¼Œä¿å­˜ç¬¦å·ä¿¡æ¯</span></span><br><span class="line">    <span class="type">int</span> a = n &lt; <span class="number">0</span> ? <span class="built_in">neg</span>(n) : n;</span><br><span class="line">    <span class="type">int</span> b = m &lt; <span class="number">0</span> ? <span class="built_in">neg</span>(m) : m;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// ä»æœ€é«˜ä½å¼€å§‹éå†</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">30</span>; i &gt;= <span class="number">0</span>; i = <span class="built_in">minus1</span>(i, <span class="number">1</span>)) &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­ a å³ç§» i ä½åæ˜¯å¦å¤§äºç­‰äº b</span></span><br><span class="line">        <span class="keyword">if</span>((a &gt;&gt; i) &gt;= b) &#123;</span><br><span class="line">            <span class="comment">// å‡å» b å·¦ç§» i ä½</span></span><br><span class="line">            a = <span class="built_in">minus1</span>(a, (b &lt;&lt; i));</span><br><span class="line">            <span class="comment">// å°†ç»“æœå¯¹åº”ä½è®¾ä¸º1</span></span><br><span class="line">            ans |= (<span class="number">1</span> &lt;&lt; i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœ n ä¸ m ç¬¦å·ä¸åŒï¼Œåˆ™ç»“æœå–è´Ÿ</span></span><br><span class="line">    <span class="keyword">return</span> (n &lt; <span class="number">0</span>) ^ (m &lt; <span class="number">0</span>) ? <span class="built_in">neg</span>(ans) : ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®Œæ•´ç‰ˆ</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">div2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a == INT_MIN &amp;&amp; b == INT_MIN) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(a != INT_MIN &amp;&amp; b != INT_MIN) <span class="keyword">return</span> <span class="built_in">div1</span>(a, b);</span><br><span class="line">    <span class="keyword">if</span>(b == INT_MIN) <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">// é™¤æ•°ä¸º INT_MINï¼Œå…¶å®ƒæ•°é™¤ä»¥å®ƒçš„å•†ä¸º0</span></span><br><span class="line">    <span class="keyword">if</span>(b == <span class="built_in">neg</span>(<span class="number">1</span>)) <span class="keyword">return</span> INT_MAX;  <span class="comment">// é˜²æ­¢ INT_MIN / -1 æº¢å‡º</span></span><br><span class="line">    <span class="comment">// è¿‘ä¼¼å¤„ç†ï¼šè°ƒæ•´ a çš„å€¼</span></span><br><span class="line">    a = <span class="built_in">add</span>(a, b &gt; <span class="number">0</span> ? b : <span class="built_in">neg</span>(b));</span><br><span class="line">    <span class="type">int</span> ans = <span class="built_in">div1</span>(a, b);</span><br><span class="line">    <span class="comment">// æ ¹æ®é™¤æ•°çš„æ­£è´Ÿå†³å®šåç§»</span></span><br><span class="line">    <span class="type">int</span> offset = b &gt; <span class="number">0</span> ? <span class="built_in">neg</span>(<span class="number">1</span>) : <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">add</span>(ans, offset);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä½è¿ç®—éªšæ“ä½œ"><a href="#ä½è¿ç®—éªšæ“ä½œ" class="headerlink" title="ä½è¿ç®—éªšæ“ä½œ"></a>ä½è¿ç®—éªšæ“ä½œ</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯2çš„å¹‚</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">jurge1</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> n&gt;<span class="number">0</span> &amp;&amp; n == (n&amp;(-n));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯3çš„å¹‚</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> M 1162261467</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">jurge2</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> n&gt;<span class="number">0</span> &amp;&amp; M%n==<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ±‚å¤§äºç­‰äºnçš„æœ€å°2æ¬¡å¹‚</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F1</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(n&lt;=<span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	n--;</span><br><span class="line">	n |= n&gt;&gt;<span class="number">1</span>;</span><br><span class="line">	n |= n&gt;&gt;<span class="number">2</span>;</span><br><span class="line">	n |= n&gt;&gt;<span class="number">4</span>;</span><br><span class="line">	n |= n&gt;&gt;<span class="number">8</span>;</span><br><span class="line">	n |= n&gt;&gt;<span class="number">16</span>;;</span><br><span class="line">	<span class="keyword">return</span> n+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€†åºäºŒè¿›åˆ¶çŠ¶æ€</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F2</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">	n= ((n&amp;<span class="number">0xaaaaaaaa</span>)&gt;&gt;<span class="number">1</span>) | ((n&amp;<span class="number">0x55555555</span>)&lt;&lt;<span class="number">1</span>);</span><br><span class="line">	n= ((n&amp;<span class="number">0xcccccccc</span>)&gt;&gt;<span class="number">2</span>) | ((n&amp;<span class="number">0x33333333</span>)&lt;&lt;<span class="number">2</span>);</span><br><span class="line">	n= ((n&amp;<span class="number">0xf0f0f0f0</span>)&gt;&gt;<span class="number">4</span>) | ((n&amp;<span class="number">0x0f0f0f0f</span>)&lt;&lt;<span class="number">4</span>);</span><br><span class="line">	n= ((n&amp;<span class="number">0xff00ff00</span>)&gt;&gt;<span class="number">8</span>) | ((n&amp;<span class="number">0x00ff00ff</span>)&lt;&lt;<span class="number">8</span>);</span><br><span class="line">	n = (n&gt;&gt;<span class="number">16</span>) | (n&lt;&lt;<span class="number">16</span>);</span><br><span class="line">	<span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿”å›nçš„äºŒè¿›åˆ¶ä¸­æœ‰å‡ ä¸ª1</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F3</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">	n = (n&amp;<span class="number">0x55555555</span>)+((n&gt;&gt;<span class="number">1</span>)&amp;<span class="number">0x55555555</span>);</span><br><span class="line">	n = (n&amp;<span class="number">0x33333333</span>)+((n&gt;&gt;<span class="number">2</span>)&amp;<span class="number">0x33333333</span>);</span><br><span class="line">	n = (n&amp;<span class="number">0x0f0f0f0f</span>)+((n&gt;&gt;<span class="number">4</span>)&amp;<span class="number">0x0f0f0f0f</span>);</span><br><span class="line">	n = (n&amp;<span class="number">0x00ff00ff</span>)+((n&gt;&gt;<span class="number">8</span>)&amp;<span class="number">0x00ff00ff</span>);</span><br><span class="line">	n = (n&amp;<span class="number">0x0000ffff</span>)+((n&gt;&gt;<span class="number">18</span>)&amp;<span class="number">0x0000ffff</span>);</span><br><span class="line">	<span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ±‚xåˆ°yçš„æ‰€æœ‰æ•°&amp;çš„ç»“æœ</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F4</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(y&gt;x)&#123;</span><br><span class="line">		y -= y &amp;(-y);</span><br><span class="line">	&#125;<span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Brain-Kernighanç®—æ³•"><a href="#Brain-Kernighanç®—æ³•" class="headerlink" title="Brain Kernighanç®—æ³•"></a>Brain Kernighanç®—æ³•</h3><p>å¼‚æˆ–æŠ€å·§</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> M 500</span></span><br><span class="line"><span class="type">int</span> a1[M];</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="comment">// ä»¥ä¸‹ä¸¤ä¸ªå…¨å±€å˜é‡ç”¨äºåŠŸèƒ½1ï¼šä¸¤ä¸ªå‡ºç°æ¬¡æ•°ä¸ºå¥‡æ•°æ¬¡çš„æ•°å­—</span></span><br><span class="line"><span class="type">int</span> ero1 = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> ero2 = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(<span class="type">int</span> a[], <span class="type">int</span> size)</span> </span>&#123;</span><br><span class="line">    ero1 = <span class="number">0</span>;</span><br><span class="line">    ero2 = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// è®¡ç®—æ‰€æœ‰æ•°å­—çš„å¼‚æˆ–ç»“æœ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">        ero1 ^= a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ‰¾åˆ°æœ€å³ä¾§çš„1</span></span><br><span class="line">    <span class="type">int</span> rightone = ero1 &amp; (-ero1);</span><br><span class="line">    <span class="comment">// æ ¹æ®è¯¥ä½æ˜¯å¦ä¸º1å°†æ•°å­—åˆ†ç»„ï¼Œå¹¶å¯¹å…¶ä¸­ä¸€ç»„å¼‚æˆ–</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((a[i] &amp; rightone) == <span class="number">0</span>) &#123;</span><br><span class="line">            ero2 ^= a[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦ä¸€ä¸ªå¥‡æ•°æ¬¡æ•°å­—</span></span><br><span class="line">    ero1 = ero1 ^ ero2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä»¥ä¸‹å…¨å±€å˜é‡ç”¨äºåŠŸèƒ½2ï¼šæ±‚æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°å°‘äº cnt æ¬¡çš„æ•°å­—</span></span><br><span class="line"><span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> bits[<span class="number">32</span>];  <span class="comment">// ç”¨äºç»Ÿè®¡å„äºŒè¿›åˆ¶ä½1çš„ä¸ªæ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve2</span><span class="params">(<span class="type">int</span> size, <span class="type">int</span> cnt, <span class="type">int</span> a[])</span> </span>&#123;</span><br><span class="line">    ans = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(bits, <span class="number">0</span>, <span class="built_in">sizeof</span>(bits));</span><br><span class="line">    <span class="comment">// ç»Ÿè®¡æ¯ä¸€ä½çš„1çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">32</span>; j++) &#123;</span><br><span class="line">            <span class="comment">// ç­‰ä»·äºï¼šif(a[i] &amp; (1 &lt;&lt; j)) bits[j]++;</span></span><br><span class="line">            bits[j] += (a[i] &gt;&gt; j) &amp; <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¯¹æ¯ä¸€ä½åˆ¤æ–­æ˜¯å¦ä¸ºç›®æ ‡æ•°å­—çš„1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">32</span>; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bits[j] % cnt) &#123;</span><br><span class="line">            ans |= (<span class="number">1</span> &lt;&lt; j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é“¾è¡¨åŸºæœ¬æ“ä½œ"><a href="#é“¾è¡¨åŸºæœ¬æ“ä½œ" class="headerlink" title="é“¾è¡¨åŸºæœ¬æ“ä½œ"></a>é“¾è¡¨åŸºæœ¬æ“ä½œ</h3><h4 id="è¿”å›ä¸¤ä¸ªæ— ç¯é“¾è¡¨ç›¸äº¤çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹"><a href="#è¿”å›ä¸¤ä¸ªæ— ç¯é“¾è¡¨ç›¸äº¤çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹" class="headerlink" title="è¿”å›ä¸¤ä¸ªæ— ç¯é“¾è¡¨ç›¸äº¤çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹"></a>è¿”å›ä¸¤ä¸ªæ— ç¯é“¾è¡¨ç›¸äº¤çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">LinkNode</span>&#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    LinkNode *next;</span><br><span class="line">    <span class="built_in">LinkNode</span>(<span class="type">int</span> _val) : <span class="built_in">val</span>(_val), <span class="built_in">next</span>(<span class="literal">nullptr</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//è¿”å›ä¸¤ä¸ªæ— ç¯é“¾è¡¨ç›¸äº¤çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"><span class="function">LinkNode *<span class="title">converge</span><span class="params">(LinkNode *&amp;L1,LinkNode *&amp;L2)</span></span>&#123;</span><br><span class="line">    LinkNode *p1=L1-&gt;next;</span><br><span class="line">    LinkNode *p2=L2-&gt;next;</span><br><span class="line">    <span class="type">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(L1==<span class="literal">nullptr</span> || L2==<span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">while</span>(p1!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        cnt++;</span><br><span class="line">        p1=p1-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(p2!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        cnt--;</span><br><span class="line">        p2=p2-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    p1=L1;</span><br><span class="line">    p2=L2;</span><br><span class="line">    <span class="keyword">if</span>(cnt&gt;=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">while</span>(cnt--) p1=p1-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        cnt=<span class="built_in">abs</span>(cnt);</span><br><span class="line">        <span class="keyword">while</span>(cnt--) p2=p2-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(p1!=p2 &amp;&amp; p1!=<span class="literal">nullptr</span> &amp;&amp; p2!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        p1=p1-&gt;next;</span><br><span class="line">        p2=p2-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ¯kä¸ªèŠ‚ç‚¹ä¸€ç»„ç¿»è½¬é“¾è¡¨"><a href="#æ¯kä¸ªèŠ‚ç‚¹ä¸€ç»„ç¿»è½¬é“¾è¡¨" class="headerlink" title="æ¯kä¸ªèŠ‚ç‚¹ä¸€ç»„ç¿»è½¬é“¾è¡¨"></a>æ¯kä¸ªèŠ‚ç‚¹ä¸€ç»„ç¿»è½¬é“¾è¡¨</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ¯kä¸ªèŠ‚ç‚¹ä¸€ç»„ç¿»è½¬é“¾è¡¨</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reverse</span><span class="params">(<span class="type">int</span> k, LinkNode *&amp;L)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(k&lt;=<span class="number">1</span> || L==<span class="literal">nullptr</span> || L-&gt;next==<span class="literal">nullptr</span>) <span class="keyword">return</span>;</span><br><span class="line">    LinkNode *p1=L-&gt;next;</span><br><span class="line">    <span class="type">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(p1!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        cnt++;</span><br><span class="line">        p1=p1-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt&lt;k) <span class="keyword">return</span>;</span><br><span class="line">    p1=L;</span><br><span class="line">    LinkNode *pre;</span><br><span class="line">    LinkNode *p;</span><br><span class="line">    LinkNode *pp;</span><br><span class="line">    LinkNode *p0=L;</span><br><span class="line">    LinkNode *last=p0-&gt;next;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;k;i++) p1=p1-&gt;next;</span><br><span class="line">    p=p0-&gt;next;</span><br><span class="line">    pp=p-&gt;next;</span><br><span class="line">    p-&gt;next=p1-&gt;next;</span><br><span class="line">    pre=p;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;k;i++)&#123;</span><br><span class="line">        p=pp;</span><br><span class="line">        pp=p-&gt;next;</span><br><span class="line">        p-&gt;next=pre;</span><br><span class="line">        pre=p;</span><br><span class="line">    &#125;</span><br><span class="line">    p0-&gt;next=p1;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> j=cnt-k;j&gt;=k;j-=k)&#123;</span><br><span class="line">        p0=last;</span><br><span class="line">        p1=last;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;k;i++) p1=p1-&gt;next;</span><br><span class="line">        p=p0-&gt;next;</span><br><span class="line">        last=p;</span><br><span class="line">        pp=p-&gt;next;</span><br><span class="line">        p-&gt;next=p1-&gt;next;</span><br><span class="line">        pre=p;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;k;i++)&#123;</span><br><span class="line">            p=pp;</span><br><span class="line">            pp=p-&gt;next;</span><br><span class="line">            p-&gt;next=pre;</span><br><span class="line">            pre=p;</span><br><span class="line">        &#125;</span><br><span class="line">        p0-&gt;next=p1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨"><a href="#å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨" class="headerlink" title="å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨"></a>å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NodeR</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    NodeR *next;</span><br><span class="line">    NodeR *random;</span><br><span class="line">    <span class="built_in">NodeR</span>(<span class="type">int</span> x)&#123;</span><br><span class="line">        val=x;</span><br><span class="line">        next=<span class="literal">nullptr</span>;</span><br><span class="line">        random=<span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">NodeR * <span class="title">copy</span><span class="params">(NodeR *&amp;L1)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L1==<span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    NodeR* cur=L1-&gt;next;</span><br><span class="line">    <span class="comment">//å¤åˆ¶èŠ‚ç‚¹å¹¶æ’å…¥åŸèŠ‚ç‚¹ä¹‹å</span></span><br><span class="line">    <span class="keyword">while</span>(cur!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        NodeR* next=<span class="keyword">new</span> <span class="built_in">NodeR</span>(cur-&gt;val);</span><br><span class="line">        next-&gt;next=cur-&gt;next;</span><br><span class="line">        cur-&gt;next=next;</span><br><span class="line">        cur=next-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ›´æ–°èŠ‚ç‚¹çš„éšæœºæŒ‡é’ˆ</span></span><br><span class="line">    cur=L1-&gt;next;</span><br><span class="line">    <span class="keyword">while</span>(cur!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(cur-&gt;random!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">            cur-&gt;next-&gt;random=cur-&gt;random;</span><br><span class="line">        &#125;</span><br><span class="line">        cur=cur-&gt;next-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ†ç¦»é“¾è¡¨</span></span><br><span class="line">    cur=L1-&gt;next;</span><br><span class="line">    NodeR* L2=<span class="keyword">new</span> <span class="built_in">NodeR</span>(<span class="number">0</span>);</span><br><span class="line">    NodeR* temp=L2;</span><br><span class="line">    <span class="keyword">while</span>(cur!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        temp-&gt;next=cur-&gt;next;</span><br><span class="line">        cur-&gt;next=cur-&gt;next-&gt;next;</span><br><span class="line">        cur=cur-&gt;next;</span><br><span class="line">        temp=temp-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> L2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ¤æ–­æ˜¯å¦æ˜¯å›æ–‡ç»“æ„ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰"><a href="#åˆ¤æ–­æ˜¯å¦æ˜¯å›æ–‡ç»“æ„ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰" class="headerlink" title="åˆ¤æ–­æ˜¯å¦æ˜¯å›æ–‡ç»“æ„ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰"></a>åˆ¤æ–­æ˜¯å¦æ˜¯å›æ–‡ç»“æ„ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ¤æ–­é“¾è¡¨æ˜¯å¦æ˜¯å›æ–‡ç»“æ„ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">judge_HuiWen</span><span class="params">(LinkNode *L)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(L==<span class="literal">nullptr</span> || L-&gt;next==<span class="literal">nullptr</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//å¿«æ…¢æŒ‡é’ˆæ‰¾ä¸­ç‚¹</span></span><br><span class="line">    LinkNode* f=L;</span><br><span class="line">    LinkNode* s=L;</span><br><span class="line">    <span class="keyword">while</span>(f!=<span class="literal">nullptr</span> &amp;&amp; f-&gt;next!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        f=f-&gt;next-&gt;next;</span><br><span class="line">        s=s-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç¿»è½¬</span></span><br><span class="line">    LinkNode* pre=s;</span><br><span class="line">    LinkNode* cur=s-&gt;next;</span><br><span class="line">    LinkNode* next=<span class="literal">nullptr</span>;</span><br><span class="line">    pre-&gt;next=<span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">while</span>(cur!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        next=cur-&gt;next;</span><br><span class="line">        cur-&gt;next=pre;</span><br><span class="line">        pre=cur;</span><br><span class="line">        cur=next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­å›æ–‡</span></span><br><span class="line">    <span class="type">bool</span> ans=<span class="literal">true</span>;</span><br><span class="line">    LinkNode* sta1=L-&gt;next;</span><br><span class="line">    LinkNode* sta2=pre;</span><br><span class="line">    <span class="keyword">while</span>(sta1!=<span class="literal">nullptr</span> &amp;&amp; sta2!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(sta1-&gt;val!=sta2-&gt;val)&#123;</span><br><span class="line">            ans=<span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        sta1=sta1-&gt;next;</span><br><span class="line">        sta2=sta2-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¿˜åŸ</span></span><br><span class="line">    cur=pre-&gt;next;</span><br><span class="line">    pre-&gt;next=<span class="literal">nullptr</span>;</span><br><span class="line">    next=<span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">while</span>(cur!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        next=cur-&gt;next;</span><br><span class="line">        cur-&gt;next=pre;</span><br><span class="line">        pre=cur;</span><br><span class="line">        cur=next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="è¿”å›ç¬¬ä¸€ä¸ªå…¥ç¯èŠ‚ç‚¹"><a href="#è¿”å›ç¬¬ä¸€ä¸ªå…¥ç¯èŠ‚ç‚¹" class="headerlink" title="è¿”å›ç¬¬ä¸€ä¸ªå…¥ç¯èŠ‚ç‚¹"></a>è¿”å›ç¬¬ä¸€ä¸ªå…¥ç¯èŠ‚ç‚¹</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿”å›é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¥ç¯èŠ‚ç‚¹</span></span><br><span class="line"><span class="function">LinkNode* <span class="title">cycle</span><span class="params">(LinkNode *L)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (L == <span class="literal">nullptr</span> || L-&gt;next == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    LinkNode* f=L;</span><br><span class="line">    LinkNode* s=L;</span><br><span class="line">    <span class="keyword">while</span>(f!=<span class="literal">nullptr</span> &amp;&amp; f-&gt;next!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        s=s-&gt;next;</span><br><span class="line">        f=f-&gt;next-&gt;next;</span><br><span class="line">        <span class="keyword">if</span>(s==f)&#123;</span><br><span class="line">            f=L;</span><br><span class="line">            <span class="keyword">while</span>(f!=s)&#123;</span><br><span class="line">                f=f-&gt;next;</span><br><span class="line">                s=s-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> f;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç¨³å®šæ’åº"><a href="#ç¨³å®šæ’åº" class="headerlink" title="ç¨³å®šæ’åº"></a>ç¨³å®šæ’åº</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åœ¨é“¾è¡¨ä¸Šæ’åºï¼Œæ—¶é—´å¤æ‚åº¦Oï¼ˆn*lognï¼‰ï¼Œé¢å¤–ç©ºé—´å¤æ‚åº¦ï¼ˆ1ï¼‰ï¼Œæ’åºæœ‰ç¨³å®šæ€§</span></span><br><span class="line"><span class="function">LinkNode* <span class="title">createNode</span><span class="params">(<span class="type">int</span> data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">LinkNode</span>(data);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åœ¨é“¾è¡¨å°¾éƒ¨æ·»åŠ èŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">appendNode</span><span class="params">(LinkNode*&amp; head, <span class="type">int</span> data)</span> </span>&#123;</span><br><span class="line">    LinkNode* newNode = <span class="built_in">createNode</span>(data);</span><br><span class="line">    LinkNode* temp = head;</span><br><span class="line">    <span class="keyword">while</span> (temp-&gt;next) &#123;</span><br><span class="line">        temp = temp-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    temp-&gt;next = newNode;</span><br><span class="line">&#125;</span><br><span class="line">LinkNode* start;</span><br><span class="line">LinkNode* end1;</span><br><span class="line"><span class="function">LinkNode* <span class="title">FindEnd</span><span class="params">(LinkNode* l,<span class="type">int</span> len)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(l-&gt;next!=<span class="literal">nullptr</span> &amp;&amp; --len!=<span class="number">0</span>)&#123;</span><br><span class="line">        l=l-&gt;next;</span><br><span class="line">    &#125;<span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(LinkNode* l1, LinkNode* r1, LinkNode* l2, LinkNode* r2)</span> </span>&#123;</span><br><span class="line">    LinkNode* pre;</span><br><span class="line">    <span class="keyword">if</span> (l1-&gt;val &lt;= l2-&gt;val) &#123;</span><br><span class="line">        start = l1;</span><br><span class="line">        pre = l1;</span><br><span class="line">        l1 = l1-&gt;next;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        start = l2;</span><br><span class="line">        pre = l2;</span><br><span class="line">        l2 = l2-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (l1 != <span class="literal">nullptr</span> &amp;&amp; l2 != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (l1-&gt;val &lt;= l2-&gt;val) &#123;</span><br><span class="line">            pre-&gt;next = l1;</span><br><span class="line">            pre = l1;</span><br><span class="line">            l1 = l1-&gt;next;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            pre-&gt;next = l2;</span><br><span class="line">            pre = l2;</span><br><span class="line">            l2 = l2-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (l1 != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        pre-&gt;next = l1;</span><br><span class="line">        end1 = r1;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        pre-&gt;next = l2;</span><br><span class="line">        end1 = r2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sort</span><span class="params">(LinkNode*&amp; L)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (L == <span class="literal">nullptr</span> || L-&gt;next == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> len=<span class="number">0</span>;</span><br><span class="line">    LinkNode* temp=L;</span><br><span class="line">    <span class="keyword">while</span>(temp!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        len++;</span><br><span class="line">        temp=temp-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    LinkNode* l1;</span><br><span class="line">    LinkNode* r1;</span><br><span class="line">    LinkNode* l2;</span><br><span class="line">    LinkNode* r2;</span><br><span class="line">    LinkNode* lastTeamend;</span><br><span class="line">    LinkNode* next;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;len;i&lt;&lt;=<span class="number">1</span>)&#123;</span><br><span class="line">        l1=L;</span><br><span class="line">        r1=<span class="built_in">FindEnd</span>(l1,i);</span><br><span class="line">        l2=r1-&gt;next;</span><br><span class="line">        r2=<span class="built_in">FindEnd</span>(l2,i);</span><br><span class="line">        next = r2-&gt;next;</span><br><span class="line">        r1-&gt;next = <span class="literal">nullptr</span>;</span><br><span class="line">        r2-&gt;next = <span class="literal">nullptr</span>;</span><br><span class="line">        <span class="built_in">merge</span>(l1,r1,l2,r2);</span><br><span class="line">        L=start;</span><br><span class="line">        lastTeamend=end1;</span><br><span class="line">        <span class="keyword">while</span>(next!=<span class="literal">nullptr</span>)&#123;</span><br><span class="line">            l1=next;</span><br><span class="line">            r1=<span class="built_in">FindEnd</span>(l1,i);</span><br><span class="line">        	l2 = r1-&gt;next;</span><br><span class="line">        	<span class="keyword">if</span>(l2==<span class="literal">nullptr</span>)&#123;</span><br><span class="line">        		lastTeamend-&gt;next = l1;</span><br><span class="line">        		<span class="keyword">break</span>;</span><br><span class="line">        	&#125;</span><br><span class="line">            r2 = <span class="built_in">FindEnd</span>(l2, i);</span><br><span class="line">            next = r2-&gt;next;</span><br><span class="line">            r1-&gt;next = <span class="literal">nullptr</span>;</span><br><span class="line">            r2-&gt;next = <span class="literal">nullptr</span>;</span><br><span class="line">            <span class="built_in">merge</span>(l1,r1,l2,r2);</span><br><span class="line">            lastTeamend-&gt;next=start;</span><br><span class="line">            lastTeamend=end1;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="åˆå¹¶nä¸ªæœ‰åºé“¾è¡¨"><a href="#åˆå¹¶nä¸ªæœ‰åºé“¾è¡¨" class="headerlink" title="åˆå¹¶nä¸ªæœ‰åºé“¾è¡¨"></a>åˆå¹¶nä¸ªæœ‰åºé“¾è¡¨</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> M 500</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ListNode</span>&#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    ListNode * next;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Create</span><span class="params">(ListNode *&amp;q)</span></span>&#123;</span><br><span class="line">    q=(ListNode *)<span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(ListNode));</span><br><span class="line">    q-&gt;next=<span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">cmp</span>&#123;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(ListNode* a,ListNode* b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a-&gt;val &gt; b-&gt;val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">ListNode *<span class="title">merge</span><span class="params">(vector&lt;ListNode*&gt;&amp; v1)</span></span>&#123;</span><br><span class="line">    priority_queue&lt;ListNode*,vector&lt;ListNode*&gt;,cmp&gt; pq1;</span><br><span class="line">    <span class="keyword">for</span>(ListNode* it : v1) <span class="keyword">if</span>(it) pq1.<span class="built_in">push</span>(it);</span><br><span class="line">    ListNode* ans;</span><br><span class="line">    <span class="built_in">Create</span>(ans);</span><br><span class="line">    ListNode* temp;</span><br><span class="line">    ListNode* pre=ans;</span><br><span class="line">    <span class="keyword">while</span>(!pq1.<span class="built_in">empty</span>())&#123;</span><br><span class="line">        temp=pq1.<span class="built_in">top</span>();</span><br><span class="line">        pq1.<span class="built_in">pop</span>();</span><br><span class="line">        pre-&gt;next=temp;</span><br><span class="line">        pre=temp;</span><br><span class="line">        <span class="keyword">if</span>(temp-&gt;next) pq1.<span class="built_in">push</span>(temp-&gt;next);</span><br><span class="line">    &#125;pre-&gt;next=<span class="literal">nullptr</span>;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin&gt;&gt;n;</span><br><span class="line">    <span class="type">int</span> cnt;</span><br><span class="line">    ListNode* pre;</span><br><span class="line">    <span class="type">int</span> temp1;</span><br><span class="line">    vector&lt;ListNode*&gt; v1;</span><br><span class="line">    <span class="keyword">while</span>(n--)&#123;</span><br><span class="line">        cin&gt;&gt;cnt;</span><br><span class="line">        ListNode * l=(ListNode*)<span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(ListNode));</span><br><span class="line">        l-&gt;next=<span class="literal">nullptr</span>;</span><br><span class="line">        pre=l;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;cnt;i++)&#123;</span><br><span class="line">            cin&gt;&gt;temp1;</span><br><span class="line">            ListNode *temp=(ListNode*)<span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(ListNode));</span><br><span class="line">            temp-&gt;val=temp1;</span><br><span class="line">            temp-&gt;next=pre-&gt;next;</span><br><span class="line">            pre-&gt;next=temp;</span><br><span class="line">            pre=temp;</span><br><span class="line">        &#125;v1.<span class="built_in">push_back</span>(l-&gt;next);</span><br><span class="line">    &#125;</span><br><span class="line">    ListNode * <span class="keyword">final</span>;</span><br><span class="line">    <span class="built_in">Create</span>(<span class="keyword">final</span>);</span><br><span class="line">    <span class="keyword">final</span>=<span class="built_in">merge</span>(v1);</span><br><span class="line">    pre=<span class="keyword">final</span>-&gt;next;</span><br><span class="line">    <span class="keyword">while</span>(pre)&#123;</span><br><span class="line">        cout&lt;&lt;pre-&gt;val&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">        pre=pre-&gt;next;</span><br><span class="line">    &#125;cout&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è«é˜Ÿç®—æ³•"><a href="#è«é˜Ÿç®—æ³•" class="headerlink" title="è«é˜Ÿç®—æ³•"></a>è«é˜Ÿç®—æ³•</h3><p>ç¦»çº¿åŠ é€Ÿå¤„ç†æŸ¥è¯¢</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Query</span> &#123;</span><br><span class="line">    <span class="type">int</span> l, r, id, blk;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="type">int</span> n, q;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">original</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">ans</span><span class="params">(q)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">    	cin &gt;&gt; original[i];</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// ç¦»æ•£åŒ–</span></span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; temp = original;</span><br><span class="line">    <span class="built_in">sort</span>(temp.<span class="built_in">begin</span>()+<span class="number">1</span>, temp.<span class="built_in">end</span>());</span><br><span class="line">    <span class="type">int</span> m = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">    	<span class="keyword">if</span>(temp[m] != temp[i])&#123;</span><br><span class="line">    		temp[++ m] = temp[i];</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">auto</span> find = [&amp;](<span class="type">int</span> x) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">    	<span class="type">int</span> l = <span class="number">1</span>, r = m;</span><br><span class="line">    	<span class="type">int</span> mid, ans;</span><br><span class="line">    	<span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">    		mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    		<span class="keyword">if</span>(temp[mid] &lt;= x)&#123;</span><br><span class="line">    			ans = mid;</span><br><span class="line">    			l = mid + <span class="number">1</span>;</span><br><span class="line">    		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    			r = mid - <span class="number">1</span>;</span><br><span class="line">    		&#125;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">return</span> ans;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// è«é˜Ÿå‡½æ•°</span></span><br><span class="line">    <span class="type">int</span> now_ans = <span class="number">0</span>;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">fre</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">auto</span> add = [&amp;](<span class="type">int</span> x) &#123;</span><br><span class="line">    	<span class="type">int</span> &amp; f = fre[<span class="built_in">find</span>(x)];</span><br><span class="line">    	<span class="keyword">if</span> (f == <span class="number">1</span>) &#123;</span><br><span class="line">	        now_ans++;</span><br><span class="line">	    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (f == <span class="number">2</span>) &#123;</span><br><span class="line">	        now_ans--;</span><br><span class="line">	    &#125;</span><br><span class="line">        f++;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">auto</span> remove = [&amp;](<span class="type">int</span> x) &#123;</span><br><span class="line">    	<span class="type">int</span> &amp;f = fre[<span class="built_in">find</span>(x)];</span><br><span class="line">	    <span class="keyword">if</span> (f == <span class="number">2</span>) &#123;</span><br><span class="line">	        now_ans--;</span><br><span class="line">	    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (f == <span class="number">3</span>) &#123;</span><br><span class="line">	        now_ans++;</span><br><span class="line">	    &#125;</span><br><span class="line">        f--;</span><br><span class="line">    &#125;;</span><br><span class="line">	<span class="comment">// çª—å£ä¼˜åŒ–</span></span><br><span class="line">    <span class="type">int</span> blk = (<span class="type">int</span>)<span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="function">vector&lt;Query&gt; <span class="title">queries</span><span class="params">(q)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; q; i++) &#123;</span><br><span class="line">        cin &gt;&gt; queries[i].l &gt;&gt; queries[i].r;</span><br><span class="line">        queries[i].id = i;</span><br><span class="line">        queries[i].blk = queries[i].l / blk;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(queries.<span class="built_in">begin</span>(), queries.<span class="built_in">end</span>(), [&amp;](<span class="type">const</span> Query &amp;A, <span class="type">const</span> Query &amp;B) &#123;</span><br><span class="line">        <span class="keyword">if</span> (A.blk == B.blk) <span class="keyword">return</span> A.r &lt; B.r;</span><br><span class="line">        <span class="keyword">return</span> A.blk &lt; B.blk;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="type">int</span> curL = <span class="number">1</span>, curR = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;q : queries) &#123;</span><br><span class="line">        <span class="keyword">while</span> (curR &lt; q.r) <span class="built_in">add</span>(original[++curR]);</span><br><span class="line">        <span class="keyword">while</span> (curR &gt; q.r) <span class="built_in">remove</span>(original[curR--]);</span><br><span class="line">        <span class="keyword">while</span> (curL &lt; q.l) <span class="built_in">remove</span>(original[curL++]);</span><br><span class="line">        <span class="keyword">while</span> (curL &gt; q.l) <span class="built_in">add</span>(original[--curL]);</span><br><span class="line">        ans[q.id] = now_ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; q; i++) cout &lt;&lt; ans[i] &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="KMPç®—æ³•"><a href="#KMPç®—æ³•" class="headerlink" title="KMPç®—æ³•"></a>KMPç®—æ³•</h3><p>å­—ç¬¦åŒ¹é…åŒ¹é…åŠ é€Ÿï¼ŒåŠ é€Ÿçš„ç‚¹åœ¨äºåŒ¹é…å¤±è´¥åä¸ä¸€å®šç›´æ¥è¿”å›èµ·ç‚¹é‡æ–°åŒ¹é…ï¼Œè€Œæ˜¯è·³åˆ°æœ€å¤§å‰ç¼€å¤„ï¼Œå¦‚<code>abab......</code>åŒ¹é…å¤±è´¥æ—¶ï¼Œä¼šè·³åˆ°2ä½ç½®è€Œä¸æ˜¯0ä½ç½®</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    string s1, s2;</span><br><span class="line">    cin &gt;&gt; s1 &gt;&gt; s2;</span><br><span class="line">    <span class="type">int</span> n = <span class="built_in">int</span>(s1.<span class="built_in">size</span>());</span><br><span class="line">    <span class="type">int</span> m = <span class="built_in">int</span>(s2.<span class="built_in">size</span>());</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">next1</span><span class="params">(m + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> i1 = <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> mark1 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(i1 &lt;= m)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s2[i1 - <span class="number">1</span>] == s2[mark1])&#123;</span><br><span class="line">            next1[i1++] = ++ mark1;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(mark1 != <span class="number">0</span>)&#123;</span><br><span class="line">            mark1 = next1[mark1];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            next1[i1++] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> j1 = i1 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(j1 &lt; n)&#123;</span><br><span class="line">        <span class="keyword">if</span>(s1[j1] == s2[i1])&#123;</span><br><span class="line">            j1 ++, i1 ++;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(i1 != <span class="number">0</span>)&#123;</span><br><span class="line">            i1 = next1[i1];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            j1 ++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i1 == m)&#123;</span><br><span class="line">            cout &lt;&lt; j1 - i1 + <span class="number">1</span> &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">            i1 = next1[i1];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i ++)&#123;</span><br><span class="line">    	cout &lt;&lt; next1[i];</span><br><span class="line">    	<span class="keyword">if</span>(i != m) cout &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="manacherç®—æ³•"><a href="#manacherç®—æ³•" class="headerlink" title="manacherç®—æ³•"></a>manacherç®—æ³•</h3><p>ä»¥æŸä¸€èŠ‚ç‚¹ä¸ºä¸­å¿ƒå‘ä¸¤ç«¯æ‰©å±•çš„æœ€å¤§å›æ–‡ä¸²</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="function">string <span class="title">manacherss</span><span class="params">(string s)</span></span>&#123;</span><br><span class="line">	string ss = <span class="string">&quot;#&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; s.<span class="built_in">size</span>(); i ++)&#123;</span><br><span class="line">		ss += s[i];</span><br><span class="line">		ss += <span class="string">&#x27;#&#x27;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ss;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	string s;</span><br><span class="line">	cin &gt;&gt; s;</span><br><span class="line">	string ss = <span class="built_in">manacherss</span>(s);</span><br><span class="line">	<span class="type">int</span> n = ss.<span class="built_in">size</span>();</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">r1</span><span class="params">(n, <span class="number">0</span>)</span></span>; <span class="comment">// çœŸå®å›æ–‡ä¸²çš„é•¿åº¦ä¸ºr[i] - 1;</span></span><br><span class="line">	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, r = <span class="number">0</span>, c = <span class="number">0</span>, len; i &lt; n; i ++)&#123;</span><br><span class="line">		len = r &gt; i ? <span class="built_in">min</span>(r1[<span class="number">2</span> * c - i], r - i) : <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">while</span>(i - len &gt;= <span class="number">0</span> &amp;&amp; i + len &lt; n &amp;&amp; ss[i - len] == ss[i + len])&#123;</span><br><span class="line">			len ++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(len + i &gt; r)&#123;</span><br><span class="line">			r = len + i;</span><br><span class="line">			c = i;</span><br><span class="line">		&#125;</span><br><span class="line">		r1[i] = len;</span><br><span class="line">		ans = <span class="built_in">max</span>(ans, len);</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; ans - <span class="number">1</span> &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">   </span><br><span class="line">    <span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// cin &gt;&gt; t;</span></span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">	     <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Zå‡½æ•°"><a href="#Zå‡½æ•°" class="headerlink" title="Zå‡½æ•°"></a>Zå‡½æ•°</h3><p>å¯¹äºä¸€ä¸ªé•¿åº¦ä¸ºnçš„å­—ç¬¦ä¸²sï¼Œå®šä¹‰å‡½æ•°z[i]è¡¨ç¤ºså’Œs[i, n - 1]çš„æœ€é•¿å…¬å…±å‰ç¼€ï¼ˆLCPï¼‰çš„é•¿åº¦åˆ™zè¢«æˆä¸ºsçš„Zå‡½æ•°</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// https://www.luogu.com.cn/problem/P5410</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Z1</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp; z, string s, <span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">	z[<span class="number">0</span>] = n;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, c = <span class="number">1</span>, r = <span class="number">1</span>, len; i &lt; n; i ++)&#123;</span><br><span class="line">		len = r &gt; i ? <span class="built_in">min</span>(z[i - c], r - i) : <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>(i + len &lt; n &amp;&amp; s[len] == s[i + len])&#123;</span><br><span class="line">			len ++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(i + len &gt; r)&#123;</span><br><span class="line">			r = i + len;</span><br><span class="line">			c = i;</span><br><span class="line">		&#125;</span><br><span class="line">		z[i] = len;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">E1</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp; e, vector&lt;<span class="type">int</span>&gt; &amp; z, string s1, string s2, <span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, r = <span class="number">0</span>, c = <span class="number">0</span>, len; i &lt; n; i ++)&#123;</span><br><span class="line">		len = r &gt; i ? <span class="built_in">min</span>(z[i - c], r - i) : <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>(i + len &lt; n &amp;&amp; s1[i + len] == s2[len])&#123;</span><br><span class="line">			len ++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(i + len &gt; r)&#123;</span><br><span class="line">			r = i + len;</span><br><span class="line">			c = i;</span><br><span class="line">		&#125;</span><br><span class="line">		e[i] = len;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	string s1, s2;</span><br><span class="line">	cin &gt;&gt; s1 &gt;&gt; s2;</span><br><span class="line">	<span class="comment">// æ±‚å¾—è¯¥å­—ç¬¦ä¸²çš„æœ€é•¿å‰ç¼€</span></span><br><span class="line">	<span class="type">int</span> n = s2.<span class="built_in">size</span>();</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">Z</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="built_in">Z1</span>(Z, s2, n);</span><br><span class="line">	<span class="comment">// æ±‚è¯¥ä¸²ä»¥æŸä¸€ä¸²ä¸ºåŸºå‡†çš„æœ€é•¿å‰ç¼€</span></span><br><span class="line">	<span class="type">int</span> m = s1.<span class="built_in">size</span>();</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">E</span><span class="params">(m + <span class="number">1</span>)</span></span>;</span><br><span class="line">	<span class="built_in">E1</span>(E, Z, s1, s2, m);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å‰ç¼€æ ‘"><a href="#å‰ç¼€æ ‘" class="headerlink" title="å‰ç¼€æ ‘"></a>å‰ç¼€æ ‘</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//é™æ€æ•°ç»„ç‰ˆæœ¬</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">150001</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M2 = <span class="number">28</span>;</span><br><span class="line"><span class="type">int</span> cnt=<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> pass1[M];</span><br><span class="line"><span class="type">int</span> end1[M];</span><br><span class="line"><span class="type">int</span> t1[M][M2];</span><br><span class="line"><span class="type">int</span> op1;</span><br><span class="line">string op2;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cnt = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">memset</span>(t1, <span class="number">0</span>, <span class="built_in">sizeof</span>(t1));</span><br><span class="line">    <span class="built_in">memset</span>(end1, <span class="number">0</span>, <span class="built_in">sizeof</span>(end1));</span><br><span class="line">    <span class="built_in">memset</span>(pass1, <span class="number">0</span>, <span class="built_in">sizeof</span>(pass1));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(<span class="type">const</span> string&amp; word)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> cur=<span class="number">1</span>;</span><br><span class="line">    pass1[cur]++;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;word.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">        <span class="type">int</span> path = word[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span>(t1[cur][path]==<span class="number">0</span>)&#123;</span><br><span class="line">            t1[cur][path]=++cnt;</span><br><span class="line">        &#125;</span><br><span class="line">        cur=t1[cur][path];</span><br><span class="line">        pass1[cur]++;</span><br><span class="line">    &#125;end1[cur]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">search</span><span class="params">(<span class="type">const</span> string&amp; word)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> cur=<span class="number">1</span>;<span class="type">int</span> path;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;word.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">        path=word[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span>(t1[cur][path]==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cur=t1[cur][path];</span><br><span class="line">    &#125;<span class="keyword">return</span> end1[cur];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">erase</span><span class="params">(<span class="type">const</span> string&amp; word)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">search</span>(word)&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="type">int</span> path;</span><br><span class="line">        <span class="type">int</span> cur=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;word.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">            path = word[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span>(--pass1[t1[cur][path]]==<span class="number">0</span>)&#123;</span><br><span class="line">                t1[cur][path]=<span class="number">0</span>;</span><br><span class="line">                <span class="comment">//  ä¹‹åä¼šé‡æ–°åˆ†é…èŠ‚ç‚¹ï¼Œæ‰€ä»¥éå†ä¸åˆ°æœªå‡å‡çš„end</span></span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            &#125;cur=t1[cur][path];</span><br><span class="line">        &#125;</span><br><span class="line">        end1[cur]--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">prefixNumber</span><span class="params">(<span class="type">const</span> string&amp; pre)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> cur=<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> path;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;pre.<span class="built_in">size</span>();i++)&#123;</span><br><span class="line">        path = pre[i]-<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span>(t1[cur][path]==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cur=t1[cur][path];</span><br><span class="line">    &#125;<span class="keyword">return</span> pass1[cur];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    string line;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">getline</span>(cin, line)) &#123;</span><br><span class="line">        <span class="built_in">build</span>();</span><br><span class="line">        <span class="type">int</span> m = <span class="built_in">stoi</span>(line);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; ++i) &#123;</span><br><span class="line">            <span class="built_in">getline</span>(cin, line);</span><br><span class="line">            <span class="function">stringstream <span class="title">ss</span><span class="params">(line)</span></span>;</span><br><span class="line">            <span class="type">int</span> op;</span><br><span class="line">            string word;</span><br><span class="line">            ss &gt;&gt; op &gt;&gt; word;</span><br><span class="line">            <span class="keyword">if</span> (op == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="built_in">insert</span>(word);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (op == <span class="number">2</span>) &#123;</span><br><span class="line">                <span class="built_in">erase</span>(word);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (op == <span class="number">3</span>) &#123;</span><br><span class="line">                cout &lt;&lt; (<span class="built_in">search</span>(word) &gt; <span class="number">0</span> ? <span class="string">&quot;YES&quot;</span> : <span class="string">&quot;NO&quot;</span>) &lt;&lt; endl;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (op == <span class="number">4</span>) &#123;</span><br><span class="line">                cout &lt;&lt; <span class="built_in">prefixNumber</span>(word) &lt;&lt; endl;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ACè‡ªåŠ¨æœº"><a href="#ACè‡ªåŠ¨æœº" class="headerlink" title="ACè‡ªåŠ¨æœº"></a>ACè‡ªåŠ¨æœº</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// https://www.luogu.com.cn/problem/P3796</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2e4</span>;</span><br><span class="line"><span class="type">int</span> cnt1;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">fail1</span><span class="params">(N)</span></span>;</span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">tree1</span>(N, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">26</span>,<span class="number">0</span>));</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">end1</span><span class="params">(N)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">times1</span><span class="params">(N)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(N)</span></span>; <span class="comment">// BFSé˜Ÿåˆ—å®ç°</span></span><br><span class="line"><span class="comment">//  é“¾å¼å‰å‘æ˜Ÿ</span></span><br><span class="line"><span class="type">int</span> cnt2;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">head</span><span class="params">(N)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">next1</span><span class="params">(N)</span></span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">to</span><span class="params">(N)</span></span>;</span><br><span class="line">string s1;</span><br><span class="line"><span class="comment">// æ„å»ºå‰ç¼€æ ‘</span></span><br><span class="line"><span class="function">vector&lt;string&gt; <span class="title">F1</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="function">vector&lt;string&gt; <span class="title">s1</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">	string temp1;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, x; i &lt;= n; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; temp1;</span><br><span class="line">        s1[i] = temp1; </span><br><span class="line">        x = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>, y; j &lt; temp1.<span class="built_in">size</span>(); j ++)&#123;</span><br><span class="line">            y = temp1[j] - <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span>(tree1[x][y] == <span class="number">0</span>)&#123;</span><br><span class="line">                tree1[x][y] = ++cnt1;</span><br><span class="line">            &#125;</span><br><span class="line">            x = tree1[x][y];</span><br><span class="line">        &#125;</span><br><span class="line">        end1[i] = x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ„å»ºè‡ªåŠ¨æœº</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">F2</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">// BFSéå†</span></span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    l = r = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(tree1[<span class="number">0</span>][i] != <span class="number">0</span>)&#123;</span><br><span class="line">            v1[r++] = tree1[<span class="number">0</span>][i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> u;</span><br><span class="line">    <span class="keyword">while</span>(l &lt; r)&#123;</span><br><span class="line">        u = v1[l ++];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i ++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(tree1[u][i] == <span class="number">0</span>)&#123;</span><br><span class="line">                tree1[u][i] = tree1[fail1[u]][i];</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                fail1[tree1[u][i]] = tree1[fail1[u]][i];</span><br><span class="line">                v1[r ++] = tree1[u][i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åå‘å»ºå›¾</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add1</span><span class="params">(<span class="type">int</span> u, <span class="type">int</span> v)</span></span>&#123;</span><br><span class="line">    next1[++cnt2] = head[u];</span><br><span class="line">    head[u] = cnt2;</span><br><span class="line">    to[cnt2] = v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»Ÿè®¡æ¬¡æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">F3</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> e = head[x]; e &gt; <span class="number">0</span>; e = next1[e])&#123;</span><br><span class="line">        <span class="built_in">F3</span>(to[e]);</span><br><span class="line">        times1[x] += times1[to[e]];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i ++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">26</span>; j ++)&#123;</span><br><span class="line">			tree1[i][j] = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cnt2 = cnt1 = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">fill</span>(head.<span class="built_in">begin</span>(), head.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">	<span class="built_in">fill</span>(times1.<span class="built_in">begin</span>(), times1.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">	<span class="built_in">fill</span>(fail1.<span class="built_in">begin</span>(), fail1.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">build</span>();</span><br><span class="line">    vector&lt;string&gt; ss = <span class="built_in">F1</span>();</span><br><span class="line">    <span class="built_in">F2</span>();</span><br><span class="line">    cin &gt;&gt; s1;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, u = <span class="number">0</span>; i &lt; s1.<span class="built_in">size</span>(); i ++)&#123;</span><br><span class="line">        u = tree1[u][s1[i] - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">        times1[u] ++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= cnt1; i ++)&#123;</span><br><span class="line">        <span class="built_in">add1</span>(fail1[i], i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">F3</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> max1 = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(times1[end1[i]] &gt; max1)&#123;</span><br><span class="line">        	max1 = times1[end1[i]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; max1 &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">    	<span class="keyword">if</span>(times1[end1[i]] == max1)&#123;</span><br><span class="line">    		cout &lt;&lt; ss[i] &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="keyword">while</span>(n)&#123;</span><br><span class="line">    	<span class="built_in">solve</span>();</span><br><span class="line">    	cin &gt;&gt; n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å­—ç¬¦ä¸²å“ˆå¸Œ"><a href="#å­—ç¬¦ä¸²å“ˆå¸Œ" class="headerlink" title="å­—ç¬¦ä¸²å“ˆå¸Œ"></a>å­—ç¬¦ä¸²å“ˆå¸Œ</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// https://www.luogu.com.cn/problem/P3370</span></span><br><span class="line"><span class="comment">// åˆ©ç”¨è´¨æ•°è¿›åˆ¶ä¿¡æ¯</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="type">int</span> base = <span class="number">39127</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">v</span><span class="params">(<span class="type">char</span> c)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> ans;</span><br><span class="line">	<span class="keyword">if</span>(<span class="string">&#x27;0&#x27;</span> &lt;= c &amp;&amp; <span class="string">&#x27;9&#x27;</span> &gt;= c)&#123;</span><br><span class="line">		ans = c - <span class="string">&#x27;0&#x27;</span> + <span class="number">1</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&#x27;a&#x27;</span> &lt;= c &amp;&amp; <span class="string">&#x27;z&#x27;</span> &gt;= c)&#123;</span><br><span class="line">		ans = c - <span class="string">&#x27;a&#x27;</span> + <span class="number">11</span>;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		ans = c - <span class="string">&#x27;A&#x27;</span> + <span class="number">27</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åŠ é€Ÿè¿›åˆ¶</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F</span><span class="params">(string s)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> ans = <span class="built_in">v</span>(s[<span class="number">0</span>]);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; s.<span class="built_in">size</span>(); i ++)&#123;</span><br><span class="line">		ans = ans * base + <span class="built_in">v</span>(s[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	cin &gt;&gt; n;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(n)</span></span>;</span><br><span class="line">	string s;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i ++)&#123;</span><br><span class="line">		cin &gt;&gt; s;</span><br><span class="line">		v1[i] = <span class="built_in">F</span>(s);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">sort</span>(v1.<span class="built_in">begin</span>(), v1.<span class="built_in">end</span>());</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i ++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(v1[i] != v1[i - <span class="number">1</span>])&#123;</span><br><span class="line">			ans ++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; ans &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// https://www.luogu.com.cn/record/204776127</span></span><br><span class="line"><span class="comment">// è¦æ±‚ä¸€æ®µåŒºé—´å†…çš„hashå€¼ï¼Œç”¨å‰ç¼€å’Œ</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">H</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp; hash, vector&lt;<span class="type">int</span>&gt; &amp; power, <span class="type">int</span> l, <span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(l &gt; <span class="number">0</span>)&#123;</span><br><span class="line">		l = hash[l - <span class="number">1</span>] * power[r - l + <span class="number">1</span>]; </span><br><span class="line">	&#125;</span><br><span class="line">	r = hash[r];</span><br><span class="line">	<span class="keyword">return</span> r - l;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve2</span><span class="params">()</span></span>&#123;</span><br><span class="line">	string s1, s2;</span><br><span class="line">	cin &gt;&gt; s1 &gt;&gt; s2;	</span><br><span class="line">	<span class="type">int</span> n = s1.<span class="built_in">size</span>(), m = s2.<span class="built_in">size</span>();</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">hash1</span><span class="params">(n)</span>, <span class="title">hash2</span><span class="params">(m)</span>, <span class="title">power</span><span class="params">(max(n, m))</span></span>;</span><br><span class="line">	power[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; power.<span class="built_in">size</span>(); i ++)&#123;</span><br><span class="line">		power[i] = power[i - <span class="number">1</span>] * base;</span><br><span class="line">	&#125;	</span><br><span class="line">	hash1[<span class="number">0</span>] = s1[<span class="number">0</span>] - <span class="string">&#x27;A&#x27;</span> + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i ++)&#123;</span><br><span class="line">		hash1[i] = hash1[i - <span class="number">1</span>] * base + s1[i] - <span class="string">&#x27;A&#x27;</span> + <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	hash2[<span class="number">0</span>] = s2[<span class="number">0</span>] - <span class="string">&#x27;A&#x27;</span> + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; m; i ++)&#123;</span><br><span class="line">		hash2[i] = hash2[i - <span class="number">1</span>] * base + s2[i] - <span class="string">&#x27;A&#x27;</span> + <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> l1, l2, r1;</span><br><span class="line">	<span class="type">int</span> l, r, len, mid;</span><br><span class="line">	<span class="type">int</span> k;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n - m; i ++)&#123;</span><br><span class="line">		l1 = i, r1 = i + m - <span class="number">1</span>;</span><br><span class="line">		k = <span class="number">0</span>;</span><br><span class="line">		l2 = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>(l1 &lt;= r1 &amp;&amp; k &lt;= <span class="number">3</span>)&#123;</span><br><span class="line">			l = l1, r = r1;</span><br><span class="line">			len = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">				mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">				<span class="keyword">if</span>(<span class="built_in">H</span>(hash1, power, l1, mid) == <span class="built_in">H</span>(hash2, power, l2, l2 + mid - l1))&#123;</span><br><span class="line">					len = mid - l1 + <span class="number">1</span>;</span><br><span class="line">					l = mid + <span class="number">1</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					r = mid - <span class="number">1</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(l1 + len &lt;= r1)&#123;</span><br><span class="line">				k ++;</span><br><span class="line">				l1 += len + <span class="number">1</span>;</span><br><span class="line">				l2 += len + <span class="number">1</span>;</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(k &lt;= <span class="number">3</span>)&#123;</span><br><span class="line">			ans ++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; ans &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¼‚æˆ–å“ˆå¸Œ"><a href="#å¼‚æˆ–å“ˆå¸Œ" class="headerlink" title="å¼‚æˆ–å“ˆå¸Œ"></a>å¼‚æˆ–å“ˆå¸Œ</h3><p>é¢˜ç›®å¤§æ¦‚æè¿°ï¼šç»™å®šä¸€ä¸ªæ•°å­—åºåˆ—aï¼Œè¯·ä½ æ‰¾å‡ºæœ€é•¿çš„è¿ç»­å­åŒºé—´ï¼Œä½¿å¾—è¿™ä¸ªå­åŒºé—´å†…æ‰€æœ‰æ•°å­—çš„ä¹˜ç§¯æ˜¯ä¸€ä¸ªå®Œå…¨å¹³æ–¹æ•°ã€‚å¦‚æœå­˜åœ¨å¤šä¸ªé•¿åº¦ç›¸åŒçš„å­åŒºé—´ï¼Œé€‰æ‹©æœ€é å·¦çš„ä¸€ä¸ªã€‚</p>
<p>å®Œå…¨å¹³æ–¹æ•°å¯ä»¥å·®åˆ†ä¸ºè´¨å› æ•°ä¹˜ç§¯ï¼Œä¸”æ‰€æœ‰è´¨å› æ•°çš„ä¸ªæ•°å‡ä¸ºå¶æ•°ã€‚</p>
<p>æ•…æŠŠæ¯ä¸€ä¸ªæ•°çš„å€¼æ”¹ä¸ºè½å•è´¨å› æ•°çš„å“ˆå¸Œå€¼ï¼Œå¦‚æœæŸä¸€ä¸ªåŒºé—´çš„å¼‚æˆ–å€¼ä¸º0ï¼Œå°±è¯´æ˜è¯¥åŒºé—´çš„è´¨å› æ•°éƒ½æ˜¯å¶æ•°ï¼Œè¯´æ˜ä¹˜ç§¯æ˜¯ä¸€ä¸ªå®Œå…¨å¹³æ–¹æ•°ï¼Œåˆ©ç”¨å‰ç¼€å’Œæ€æƒ³å¯ä»¥åŠ é€Ÿè¿™ä¸€æŸ¥æ‰¾è¿‡ç¨‹ï¼ˆå½“ä¸€ä¸ªçŠ¶æ€ç¬¬ä¸€æ¬¡å‡ºç°æ—¶ï¼Œè®°å½•ä½ç½®ï¼Œä»¥åæ¯æ¬¡å‡ºç°éƒ½è¯´æ˜ä¸­é—´ä¸ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®çš„é—´éš”ä¸ºä¸€ä¸ªå®Œå…¨å¹³æ–¹æ•°ï¼‰ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">using</span> ull = <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="function">mt19937_64 <span class="title">rng</span><span class="params">(chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">1</span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">spf</span><span class="params">(N)</span></span>; <span class="comment">// æœ€å°è´¨å› å­</span></span><br><span class="line"><span class="function">vector&lt;ull&gt; <span class="title">prime_hash</span><span class="params">(N)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">init</span><span class="params">()</span> </span>= [&amp;]()&#123;</span><br><span class="line">	<span class="built_in">iota</span>(spf.<span class="built_in">begin</span>(), spf.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt; N; i ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(spf[i] == i)&#123;</span><br><span class="line">            prime_hash[i] = <span class="built_in">rng</span>();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = i &lt;&lt; <span class="number">1</span>; j &lt; N; j += i)&#123;</span><br><span class="line">                <span class="keyword">if</span>(spf[j] == j)&#123;</span><br><span class="line">                    spf[j] = i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ ¹æ®æœ€å°è´¨å› å­æ±‚æŸä¸€ä¸ªæ•°çš„hashå€¼</span></span><br><span class="line"><span class="keyword">auto</span> get_hash = [&amp;](<span class="type">int</span> x) -&gt; ull &#123;</span><br><span class="line">    ull ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x &gt; <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="type">int</span> p = spf[x];</span><br><span class="line">        <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(x % p == <span class="number">0</span>)&#123;</span><br><span class="line">            x /= p;</span><br><span class="line">            cnt ^= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(cnt &amp; <span class="number">1</span>)&#123;</span><br><span class="line">            ans ^= prime_hash[p];		</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">cin &gt;&gt; t;</span><br><span class="line"><span class="keyword">while</span>(t --)&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;ull&gt; <span class="title">pref</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    pref[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; v1[i];</span><br><span class="line">        pref[i] = pref[i - <span class="number">1</span>] ^ <span class="built_in">get_hash</span>(v1[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    unordered_map&lt;ull,<span class="type">int</span>&gt; pos;</span><br><span class="line">    pos[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>, l = <span class="number">-1</span>, r = <span class="number">-1</span>;</span><br><span class="line">    ull x;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">        x = pref[i];</span><br><span class="line">        <span class="keyword">if</span>(pos.<span class="built_in">count</span>(x))&#123;</span><br><span class="line">            <span class="keyword">if</span>(i - pos[x] &gt; ans)&#123;</span><br><span class="line">                ans = i - pos[x];</span><br><span class="line">                l = pos[x] + <span class="number">1</span>, r = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            pos[x] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; l &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; r &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>

<h3 id="è´¨æ•°-ç´ æ•°"><a href="#è´¨æ•°-ç´ æ•°" class="headerlink" title="è´¨æ•°&#x2F;ç´ æ•°"></a>è´¨æ•°&#x2F;ç´ æ•°</h3><h4 id="è´¨æ•°åˆ¤åˆ«"><a href="#è´¨æ•°åˆ¤åˆ«" class="headerlink" title="è´¨æ•°åˆ¤åˆ«"></a>è´¨æ•°åˆ¤åˆ«</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// æ™®é€šåˆ¤åˆ«æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">p</span><span class="params">(<span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (n &lt;= <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n &gt; <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">6</span> != <span class="number">1</span> &amp;&amp; n % <span class="number">6</span> != <span class="number">5</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> sqrt1 = (<span class="type">int</span>) <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">5</span>; i &lt;= sqrt1; i += <span class="number">6</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (n % i == <span class="number">0</span> || n % (i + <span class="number">2</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Miller Rabin Primeåˆ¤åˆ«æ³•</span></span><br><span class="line"><span class="keyword">using</span> ll = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="comment">// å¤§æ•°çš„æ—¶å€™ç”¨</span></span><br><span class="line"><span class="comment">//typedef __int128 ll;</span></span><br><span class="line">vector&lt;ll&gt; primes = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">23</span>, <span class="number">29</span>, <span class="number">31</span>, <span class="number">37</span>&#125;;</span><br><span class="line"><span class="function">ll <span class="title">power</span><span class="params">(ll base, ll exp, ll mod)</span> </span>&#123;</span><br><span class="line">    ll result = <span class="number">1</span>;</span><br><span class="line">    base %= mod;</span><br><span class="line">    <span class="keyword">while</span> (exp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (exp &amp; <span class="number">1</span>) result = (result * base) % mod;</span><br><span class="line">        base = (base * base) % mod;</span><br><span class="line">        exp &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">witness</span><span class="params">(ll a, ll n)</span> </span>&#123;</span><br><span class="line">    ll u = n - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> ((u &amp; <span class="number">1</span>) == <span class="number">0</span>) &#123;</span><br><span class="line">        t++;</span><br><span class="line">        u &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ll x = <span class="built_in">power</span>(a, u, n);</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="number">1</span> || x == n - <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; t - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        x = (x * x) % n;</span><br><span class="line">        <span class="keyword">if</span> (x == n - <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">millerRabin</span><span class="params">(ll n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt; <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">0</span>) <span class="keyword">return</span> n == <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (ll p : primes) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p &gt;= n) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">witness</span>(p, n)) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="çº¿æ€§è´¨æ•°ç­›"><a href="#çº¿æ€§è´¨æ•°ç­›" class="headerlink" title="çº¿æ€§è´¨æ•°ç­›"></a>çº¿æ€§è´¨æ•°ç­›</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è´¨æ•°ç­›</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">F1</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i * i &lt;= x; i ++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(x % i != <span class="number">0</span>)&#123;</span><br><span class="line">			v1.<span class="built_in">push_back</span>(i);</span><br><span class="line">			<span class="keyword">while</span>(x % i == <span class="number">0</span>) x /= i;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ±‚æ•°å€¼å°äºç­‰äºnçš„è´¨æ•°çš„ä¸ªæ•°,</span></span><br><span class="line"><span class="comment">// è´¨æ•°ç­›-åŸƒæ°ç­›</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">  	cin &gt;&gt; n;</span><br><span class="line">  	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">	v[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">  	<span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= <span class="built_in">sqrt</span>(n); i++)&#123;</span><br><span class="line">		<span class="keyword">if</span> (v[i] == <span class="number">0</span>)&#123;</span><br><span class="line">	    	<span class="keyword">for</span> (<span class="type">int</span> j = i + i; j &lt;= n; j += i) v[j] = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">  	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    	<span class="keyword">if</span> (!v[i]) cnt++;</span><br><span class="line">  	&#125;</span><br><span class="line">  	cout &lt;&lt; cnt &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åªæ˜¯è®¡æ•°çš„è¯ï¼ŒåŸƒæ°ç­›è¿˜èƒ½æ”¹è¿›</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ehrlich2</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">visit</span><span class="params">(n + <span class="number">1</span>, <span class="literal">false</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> cnt = (n + <span class="number">1</span>) / <span class="number">2</span>; <span class="comment">// ä¼°è®¡è´¨æ•°æ•°é‡(å¥‡æ•°)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">3</span>; i * i &lt;= n; i += <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!visit[i]) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = i * i; j &lt;= n; j += <span class="number">2</span> * i) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!visit[j]) &#123;</span><br><span class="line">                    visit[j] = <span class="literal">true</span>;</span><br><span class="line">                    cnt--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½¿ç”¨çº¿æ€§ç­›æ³•è®¡ç®—æ¯ä¸ªæ•°å­—çš„æœ€å°è´¨å› å­ `spf`ï¼ˆsmallest prime factorï¼‰</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">1</span>;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">spf</span><span class="params">(N)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">init</span><span class="params">()</span> </span>= [&amp;]()&#123;</span><br><span class="line">	<span class="built_in">iota</span>(spf.<span class="built_in">begin</span>(), spf.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt; N; i ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(spf[i] == i)&#123;</span><br><span class="line">            prime_hash[i] = <span class="built_in">rng</span>();</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = i &lt;&lt; <span class="number">1</span>; j &lt; N; j += i)&#123;</span><br><span class="line">                <span class="keyword">if</span>(spf[j] == j)&#123;</span><br><span class="line">                    spf[j] = i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¬§æ‹‰ç­›æ—¶é—´å¤æ‚åº¦O(n)</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">euler</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">visit</span><span class="params">(n + <span class="number">1</span>, <span class="literal">false</span>)</span></span>;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">prime</span><span class="params">(n / <span class="number">2</span> + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!visit[i]) &#123;</span><br><span class="line">            prime[cnt++] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; cnt; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i * prime[j] &gt; n) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            visit[i * prime[j]] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (i % prime[j] == <span class="number">0</span>) &#123;</span><br><span class="line">    			<span class="comment">// ä¿è¯æ¯ä¸ªåˆæ•°åªè¢«æœ€å°çš„è´¨æ•°éå†ä¸€æ¬¡</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Pickå®šç†"><a href="#Pickå®šç†" class="headerlink" title="Pickå®šç†"></a>Pickå®šç†</h3><p><code>S = i + b / 2 - 1</code></p>
<p><code>S</code>ï¼šå›¾å½¢çš„é¢ç§¯ï¼ˆå¯ä»¥æ˜¯å®æ•°ï¼‰ï¼›</p>
<p><code>i</code>ï¼šå›¾å½¢å†…éƒ¨çš„æ ¼ç‚¹æ•°ï¼›</p>
<p><code>b</code>ï¼šå›¾å½¢è¾¹ç•Œä¸Šçš„æ ¼ç‚¹æ•°ï¼ˆåŒ…æ‹¬é¡¶ç‚¹ï¼‰ï¼›</p>
<p>ç»™å®šä¸¤ä¸ªæ•´æ•°ç‚¹<code>(x1, y1), (y1, y2)</code>,  ä¸¤ç‚¹é—´ï¼ˆåŒ…æ‹¬ç«¯ç‚¹)çš„æ ¼ç‚¹æ•°ä¸º<code>gcd(|x2 - x1|, |y2 - y1|) + 1</code></p>
<p>åˆ™æ±‚æŸåŒºåŸŸå†…çš„æ ¼ç‚¹æ•°çš„æ–¹æ³•ä¸º<code>i = S âˆ’ 2 / b + 1</code></p>
<h3 id="å·®åˆ†"><a href="#å·®åˆ†" class="headerlink" title="å·®åˆ†"></a>å·®åˆ†</h3><p>å¯¹åŒºé—´è¿›è¡Œå¿«é€ŸåŠ æ³•æ“ä½œ</p>
<h4 id="ä¸€ç»´-1"><a href="#ä¸€ç»´-1" class="headerlink" title="ä¸€ç»´"></a>ä¸€ç»´</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è‹¥æœ‰åŸæ•°ç»„åˆ™è¦åˆ†å¼€å¤„ç†ï¼Œæœ€ååŠ ä¸ŠåŸæ•°ç»„æˆ–è€…è¿›è¡Œä»¥ä¸‹å¤„ç†</span></span><br><span class="line">v[i] = original[i] - original[i - <span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> x, vector&lt;<span class="type">int</span>&gt; &amp; v)</span></span>&#123;</span><br><span class="line">	v[l] += x;</span><br><span class="line">	v[r + <span class="number">1</span>] -= x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">    v[i] += v[i - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="äºŒç»´-1"><a href="#äºŒç»´-1" class="headerlink" title="äºŒç»´"></a>äºŒç»´</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å’ŒåŸæ•°ç»„åˆ†å¼€å¤„ç†ï¼Œæœ€ååŠ ä¸ŠåŸæ•°ç»„ï¼Œæˆ–è€…è¿›è¡Œä»¥ä¸‹å¤„ç†</span></span><br><span class="line">v[i][j] = a[i][j] - a[i - <span class="number">1</span>][j] - a[i][j - <span class="number">1</span>] + a[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x1, <span class="type">int</span> y1, <span class="type">int</span> x2, <span class="type">int</span> y2, <span class="type">int</span> val, vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; v)</span></span>&#123;</span><br><span class="line">	v[x1][y1] += val;</span><br><span class="line">    v[x2 + <span class="number">1</span>][y1] -= val;</span><br><span class="line">    v[x1][y2 + <span class="number">1</span>] -= val;</span><br><span class="line">    v[x2 + <span class="number">1</span>][y2 + <span class="number">1</span>] += val;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åºåˆ—-æ•°ç»„é—®é¢˜"><a href="#åºåˆ—-æ•°ç»„é—®é¢˜" class="headerlink" title="åºåˆ—&#x2F;æ•°ç»„é—®é¢˜"></a>åºåˆ—&#x2F;æ•°ç»„é—®é¢˜</h3><h4 id="æœ€é•¿å…¬å…±å­åºåˆ—"><a href="#æœ€é•¿å…¬å…±å­åºåˆ—" class="headerlink" title="æœ€é•¿å…¬å…±å­åºåˆ—"></a>æœ€é•¿å…¬å…±å­åºåˆ—</h4><p>é€’å½’&#x2F;é€’æ¨+è·¯å¾„</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// é€’å½’ç‰ˆ</span></span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line">string s1, s2;</span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(<span class="number">1001</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">1001</span>, <span class="number">-1</span>));</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F1</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i == n || j == n)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(dp[i][j] != <span class="number">-1</span>) <span class="keyword">return</span> dp[i][j];</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(s1[i] == s2[j])&#123;</span><br><span class="line">            ans = <span class="built_in">max</span>(&#123;<span class="built_in">F1</span>(i + <span class="number">1</span>, j + <span class="number">1</span>) + <span class="number">1</span>, <span class="built_in">F1</span>(i + <span class="number">1</span>, j), <span class="built_in">F1</span>(i , j + <span class="number">1</span>)&#125;);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            ans = <span class="built_in">max</span>(<span class="built_in">F1</span>(i + <span class="number">1</span>, j), <span class="built_in">F1</span>(i, j + <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        dp[i][j] = ans;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// é€’æ¨ç‰ˆ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">F2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    string s1, s2;</span><br><span class="line">    cin &gt;&gt; s1 &gt;&gt; s2;</span><br><span class="line">    <span class="type">int</span> n = s1.<span class="built_in">size</span>(), m = s2.<span class="built_in">size</span>();</span><br><span class="line">    vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m + <span class="number">1</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; j ++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(s1[i - <span class="number">1</span>] == s2[ j - <span class="number">1</span>])&#123;</span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                dp[i][j] = <span class="built_in">max</span>(dp[i - <span class="number">1</span>][j], dp[i][ j - <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ±‚è·¯å¾„</span></span><br><span class="line">    string s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n, j = m; i &amp;&amp; j;)&#123;</span><br><span class="line">    	<span class="keyword">if</span>(s1[i - <span class="number">1</span>] == s2[j - <span class="number">1</span>])&#123;</span><br><span class="line">    		s += s1[i - <span class="number">1</span>];</span><br><span class="line">    		i --;</span><br><span class="line">    		j --;</span><br><span class="line">    	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    		<span class="keyword">if</span>(dp[i - <span class="number">1</span>][j] &gt; dp[i][j - <span class="number">1</span>]) i --;</span><br><span class="line">    		<span class="keyword">else</span> j --;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(s.<span class="built_in">size</span>() == <span class="number">0</span>)&#123;</span><br><span class="line">    	cout &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, j = s.<span class="built_in">size</span>() - <span class="number">1</span>; i &lt; j; i ++, j --) <span class="built_in">swap</span>(s[i], s[j]);</span><br><span class="line">    cout &lt;&lt; s &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="æœ€é•¿é€’å¢å­åºåˆ—"><a href="#æœ€é•¿é€’å¢å­åºåˆ—" class="headerlink" title="æœ€é•¿é€’å¢å­åºåˆ—"></a>æœ€é•¿é€’å¢å­åºåˆ—</h4><p>ä¸¤ä¸ªåºåˆ—åŒ…å«å®Œå…¨ç›¸åŒçš„æ•°å­—ä½¿ï¼Œå¯ä»¥å°†ä¸€ä¸ªæ•°ç»„çš„é¡ºåºæ˜ å°„åˆ°å¦ä¸€ä¸ªæ•°ç»„ä¸Šï¼Œè¿™æ—¶å…¶æœ€é•¿å…¬å…±å­åºåˆ—å˜æˆæ±‚æœ€é•¿é€’å¢å­åºåˆ—é—®é¢˜ï¼ˆæˆ–è€…åå‘æ±‚æœ€é•¿é€’å‡å­åºåˆ—ï¼‰</p>
<h5 id="æ™®é€šç‰ˆ"><a href="#æ™®é€šç‰ˆ" class="headerlink" title="æ™®é€šç‰ˆ"></a>æ™®é€šç‰ˆ</h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F1</span><span class="params">(<span class="type">int</span> x, vector&lt;<span class="type">int</span>&gt; &amp; v)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> l = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> r = v.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">-1</span>;</span><br><span class="line">    <span class="type">int</span> mid;</span><br><span class="line">    <span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">        mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(x &lt; v[mid]) l = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">            ans = mid;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v2</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">temp</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, x; i &lt;= n; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; x;</span><br><span class="line">        temp[x] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n ; i ++)&#123;</span><br><span class="line">        cin &gt;&gt; v2[i];  </span><br><span class="line">        v2[i] = temp[v2[i]];</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; ans;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = n, x; i; i --)&#123;</span><br><span class="line">        x = <span class="built_in">F1</span>(v2[i], ans);</span><br><span class="line">        <span class="keyword">if</span>(x == <span class="number">-1</span>)&#123;</span><br><span class="line">            ans.<span class="built_in">push_back</span>(v2[i]);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            ans[x] = v2[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans.<span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="å­—å…¸åºæœ€å°ç‰ˆ"><a href="#å­—å…¸åºæœ€å°ç‰ˆ" class="headerlink" title="å­—å…¸åºæœ€å°ç‰ˆ"></a>å­—å…¸åºæœ€å°ç‰ˆ</h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F1</span><span class="params">(<span class="type">int</span> x, vector&lt;<span class="type">int</span>&gt; &amp; v)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">-1</span>;</span><br><span class="line">	<span class="type">int</span> l = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> r = v.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">	<span class="type">int</span> mid;</span><br><span class="line">	<span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">		mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span>(x &lt; v[mid])&#123;</span><br><span class="line">			l = mid + <span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			r = mid - <span class="number">1</span>;</span><br><span class="line">			ans = mid;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">	cout.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	cin &gt;&gt; n;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(n)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">auto</span>&amp; x : v1) cin &gt;&gt; x;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; v2;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">dp</span><span class="params">(n)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = n - <span class="number">1</span>, ans; i &gt;= <span class="number">0</span>; i --)&#123;</span><br><span class="line">		ans = <span class="built_in">F1</span>(v1[i], v2);</span><br><span class="line">		<span class="keyword">if</span>(ans == <span class="number">-1</span>)&#123;</span><br><span class="line">			v2.<span class="built_in">push_back</span>(v1[i]);</span><br><span class="line">			dp[i] = v2.<span class="built_in">size</span>();</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			v2[ans] = v1[i];</span><br><span class="line">			dp[i] = ans + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> m = v2.<span class="built_in">size</span>();</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">ans</span><span class="params">(m, <span class="number">1e9</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">auto</span> x : dp) cout &lt;&lt; x &lt;&lt; <span class="string">&quot; &quot;</span>;cout &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, x; i &lt; n; i ++)&#123;</span><br><span class="line">		x = dp[i];</span><br><span class="line">		<span class="keyword">if</span>(x == m) ans[<span class="number">0</span>] = v1[i];</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(ans[m - x - <span class="number">1</span>] &lt; v1[i])&#123;</span><br><span class="line">				ans[m - x] = v1[i];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i ++)&#123;</span><br><span class="line">		cout &lt;&lt; ans[i];</span><br><span class="line">		<span class="keyword">if</span>(i != m) cout &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç´¯åŠ å’Œä¸å¤§äºkçš„æœ€é•¿å­æ•°ç»„"><a href="#ç´¯åŠ å’Œä¸å¤§äºkçš„æœ€é•¿å­æ•°ç»„" class="headerlink" title="ç´¯åŠ å’Œä¸å¤§äºkçš„æœ€é•¿å­æ•°ç»„"></a>ç´¯åŠ å’Œä¸å¤§äºkçš„æœ€é•¿å­æ•°ç»„</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	<span class="type">int</span> k;</span><br><span class="line">	cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">auto</span> &amp; x : v1) cin &gt;&gt; x;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">min1</span><span class="params">(n)</span></span>;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">minend</span><span class="params">(n)</span></span>;</span><br><span class="line">	min1[n - <span class="number">1</span>] = v1[n - <span class="number">1</span>];</span><br><span class="line">	minend[n - <span class="number">1</span>] = n - <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = n - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i --)&#123;</span><br><span class="line">		<span class="keyword">if</span>(min1[i + <span class="number">1</span>] &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">			min1[i] = v1[i] + min1[i + <span class="number">1</span>];</span><br><span class="line">			minend[i] = minend[i + <span class="number">1</span>];</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			min1[i] = v1[i];</span><br><span class="line">			minend[i] = i;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>, sum1 = <span class="number">0</span>, r = <span class="number">0</span>; i &lt; n; i ++)&#123;</span><br><span class="line">		<span class="keyword">while</span>(r &lt; n  &amp;&amp; sum1 + min1[r] &lt;= k)&#123;</span><br><span class="line">			sum1 += min1[r];</span><br><span class="line">			r = minend[r] + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(r &gt; i)&#123;</span><br><span class="line">			ans = <span class="built_in">max</span>(ans, r - i);</span><br><span class="line">			sum1 -= v1[i];</span><br><span class="line">		&#125;<span class="keyword">else</span> r = i + <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; ans &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="DP"><a href="#DP" class="headerlink" title="DP"></a>DP</h3><h4 id="æ•°ä½DP"><a href="#æ•°ä½DP" class="headerlink" title="æ•°ä½DP"></a>æ•°ä½DP</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ•°ä½dp https://www.luogu.com.cn/problem/P2602</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> d)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> cur, temp = n, l, r = <span class="number">1</span>; temp; r *= <span class="number">10</span>, temp /= <span class="number">10</span>)&#123;</span><br><span class="line">        cur = temp % <span class="number">10</span>;</span><br><span class="line">        l = temp / <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">if</span>(d == <span class="number">0</span>) l --;</span><br><span class="line">        ans += l * r;</span><br><span class="line">        <span class="keyword">if</span>(d &lt; cur)&#123;</span><br><span class="line">            ans += r;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(d == cur)&#123;</span><br><span class="line">            ans += n % r + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i ++)&#123;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">F</span>(r, i) - <span class="built_in">F</span>(l - <span class="number">1</span>, i);</span><br><span class="line">        <span class="keyword">if</span>(i != <span class="number">9</span>) cout &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// https://www.luogu.com.cn/problem/P3413</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is</span><span class="params">(string s)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>, j; i &lt; s.<span class="built_in">size</span>(); i ++)&#123;</span><br><span class="line">        j = i - <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>((j &gt;= <span class="number">0</span> &amp;&amp; s[j] == s[i]) || s[i] == s[i - <span class="number">1</span>]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»Ÿè®¡0-nä¸­æ‰€æœ‰ä¸æ˜¯å›æ–‡æ•°çš„æ•° f1è¡¨ç¤ºæ˜¯å¦é€‰è¿‡æ•° f2è¡¨ç¤ºæ˜¯å¦å¯ä»¥ä»»æ„é€‰</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F</span><span class="params">(<span class="type">int</span> i1, string s, <span class="type">int</span> l, <span class="type">int</span> ll, <span class="type">bool</span> f1, <span class="type">bool</span> f2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i1 == s.<span class="built_in">size</span>()) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(!f1)&#123;</span><br><span class="line">        ans = (ans + <span class="built_in">F</span>(i1 + <span class="number">1</span>, s, <span class="number">-1</span>, <span class="number">-1</span>, <span class="literal">false</span>, <span class="literal">true</span>)) % mod;</span><br><span class="line">        <span class="keyword">if</span>(!f2)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; s[i1] - <span class="string">&#x27;0&#x27;</span>; i ++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i != l &amp;&amp; i != ll)&#123;</span><br><span class="line">                    ans = (ans + <span class="built_in">F</span>(i1 + <span class="number">1</span>, s, i, l, <span class="literal">true</span>, <span class="literal">true</span>)) % mod;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(s[i1] - <span class="string">&#x27;0&#x27;</span> != l &amp;&amp; s[i1] - <span class="string">&#x27;0&#x27;</span> != ll) ans = (ans + <span class="built_in">F</span>(i1 + <span class="number">1</span>, s, s[i1] - <span class="string">&#x27;0&#x27;</span>, l, <span class="literal">true</span>, <span class="literal">false</span>)) % mod;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="type">int</span> sum = <span class="number">9</span>;</span><br><span class="line">            <span class="keyword">if</span>(++i1 != s.<span class="built_in">size</span>()) sum *= <span class="number">9</span>;</span><br><span class="line">            <span class="keyword">while</span>(++i1 &lt; s.<span class="built_in">size</span>())&#123;</span><br><span class="line">                sum = (sum * <span class="number">8</span>) % mod;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = (ans + sum) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!f2)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; s[i1] - <span class="string">&#x27;0&#x27;</span>; i ++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i != l &amp;&amp; i != ll)&#123;</span><br><span class="line">                    ans = (ans + <span class="built_in">F</span>(i1 + <span class="number">1</span>, s, i, l, <span class="literal">true</span>, <span class="literal">true</span>)) % mod;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(s[i1] - <span class="string">&#x27;0&#x27;</span> != l &amp;&amp; s[i1] - <span class="string">&#x27;0&#x27;</span> != ll) ans = (ans + <span class="built_in">F</span>(i1 + <span class="number">1</span>, s, s[i1] - <span class="string">&#x27;0&#x27;</span>, l, <span class="literal">true</span>, <span class="literal">false</span>)) % mod;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="type">int</span> sum;</span><br><span class="line">            <span class="keyword">if</span>(ll == <span class="number">-1</span>)&#123;</span><br><span class="line">                sum = <span class="number">9</span>;</span><br><span class="line">                <span class="keyword">while</span>(++ i1 &lt; s.<span class="built_in">size</span>())&#123;</span><br><span class="line">                    sum = (sum * <span class="number">8</span>) % mod;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                sum = <span class="number">8</span>;</span><br><span class="line">                <span class="keyword">while</span>(++ i1 &lt; s.<span class="built_in">size</span>())&#123;</span><br><span class="line">                    sum = (sum * <span class="number">8</span>) % mod;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = (ans + sum) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»Ÿè®¡0-nä¸­çš„æ‰€æœ‰æ•° f1è¡¨ç¤ºæ˜¯å¦é€‰è¿‡æ•° f2è¡¨ç¤ºæ˜¯å¦å¯ä»¥ä»»æ„é€‰</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">F2</span><span class="params">(<span class="type">int</span> i1, string s, <span class="type">bool</span> f1, <span class="type">bool</span> f2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(i1 == s.<span class="built_in">size</span>()) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(!f1)&#123;</span><br><span class="line">        ans = (ans + <span class="built_in">F2</span>(i1 + <span class="number">1</span>, s, <span class="literal">false</span>, <span class="literal">true</span>)) % mod;</span><br><span class="line">        <span class="keyword">if</span>(!f2)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt; s[i1] - <span class="string">&#x27;0&#x27;</span>; i ++)&#123;</span><br><span class="line">                ans = (ans + <span class="built_in">F2</span>(i1 + <span class="number">1</span>, s, <span class="literal">true</span>, <span class="literal">true</span>)) % mod;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = (ans + <span class="built_in">F2</span>(i1 + <span class="number">1</span>, s, <span class="literal">true</span>, <span class="literal">false</span>)) % mod;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="type">int</span> sum = <span class="number">9</span>; <span class="comment">// ä¸èƒ½ä¸ºé›¶</span></span><br><span class="line">            <span class="keyword">while</span>(++ i1 &lt; s.<span class="built_in">size</span>())&#123;</span><br><span class="line">                sum = (sum * <span class="number">10</span>) % mod;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = (ans + sum) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!f2)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; s[i1] - <span class="string">&#x27;0&#x27;</span>; i ++)&#123;</span><br><span class="line">                ans = (ans + <span class="built_in">F2</span>(i1 + <span class="number">1</span>, s, <span class="literal">true</span>, <span class="literal">true</span>)) % mod;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = (ans + <span class="built_in">F2</span>(i1 + <span class="number">1</span>, s, <span class="literal">true</span>, <span class="literal">false</span>)) % mod;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="type">int</span> sum = <span class="number">10</span>; <span class="comment">// èƒ½ä¸ºé›¶</span></span><br><span class="line">            <span class="keyword">while</span>(++ i1 &lt; s.<span class="built_in">size</span>())&#123;</span><br><span class="line">                sum = (sum * <span class="number">10</span>) % mod;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = (ans + sum) % mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    string s1, s2;</span><br><span class="line">    cin &gt;&gt; s1 &gt;&gt; s2;</span><br><span class="line">    <span class="type">int</span> n1 = <span class="built_in">F</span>(<span class="number">0</span>, s1, <span class="number">-1</span>, <span class="number">-1</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">    <span class="type">int</span> n2 = <span class="built_in">F</span>(<span class="number">0</span>, s2, <span class="number">-1</span>, <span class="number">-1</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">    <span class="type">int</span> ans1 = (n2 - n1  + <span class="built_in">is</span>(s1) + mod) % mod;</span><br><span class="line">    <span class="type">int</span> n3 = <span class="built_in">F2</span>(<span class="number">0</span>, s1, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">    <span class="type">int</span> n4 = <span class="built_in">F2</span>(<span class="number">0</span>, s2, <span class="literal">false</span> ,<span class="literal">false</span>);</span><br><span class="line">    <span class="type">int</span> ans2 = (n4 - n3 + <span class="number">1</span> + mod) % mod;</span><br><span class="line">    cout &lt;&lt; (ans2 - ans1 + mod) % mod &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ ‘å½¢DP-1"><a href="#æ ‘å½¢DP-1" class="headerlink" title="æ ‘å½¢DP"></a>æ ‘å½¢DP</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// https://pintia.cn/problem-sets/1859417373569925120/exam/problems/type/7?problemSetProblemId=1859417373590896646</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">my</span>&#123;</span><br><span class="line">	<span class="type">int</span> w, b;</span><br><span class="line">	priority_queue&lt;<span class="type">int</span>, vector&lt;<span class="type">int</span>&gt;, greater&lt;&gt;&gt; qw, qb;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>) -&gt; ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// cin &gt;&gt; t;</span></span><br><span class="line">    <span class="keyword">while</span> (t--)&#123;</span><br><span class="line">    	<span class="type">int</span> n;</span><br><span class="line">    	cin &gt;&gt; n;</span><br><span class="line">    	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">color</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">val</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">root</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    	<span class="function">vector <span class="title">adj</span><span class="params">(n + <span class="number">1</span>, vector&lt;<span class="type">int</span>&gt;())</span></span>;</span><br><span class="line">    	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">    		<span class="type">int</span> m;</span><br><span class="line">    		cin &gt;&gt; color[i] &gt;&gt; val[i] &gt;&gt; m;</span><br><span class="line">    		<span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j ++)&#123;</span><br><span class="line">    			<span class="type">int</span> v;</span><br><span class="line">    			cin &gt;&gt; v;</span><br><span class="line">    			adj[i].<span class="built_in">push_back</span>(v);</span><br><span class="line">    			root[v] --;</span><br><span class="line">    		&#125;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// ä¼ å›å¯ä»¥è¢«æ”¹è‰²çš„èŠ‚ç‚¹</span></span><br><span class="line">		<span class="keyword">auto</span> F = [&amp;](<span class="keyword">auto</span> &amp;&amp; f, <span class="type">int</span> u) -&gt; my &#123;</span><br><span class="line">			<span class="type">int</span> w1 = <span class="number">0</span>, b1 = <span class="number">0</span>;</span><br><span class="line">			priority_queue&lt;<span class="type">int</span>, vector&lt;<span class="type">int</span>&gt;, greater&lt;&gt;&gt; qw1, qb1;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">auto</span> v : adj[u])&#123;</span><br><span class="line">				my temp = <span class="built_in">f</span>(f, v);</span><br><span class="line">				w1 += temp.w;</span><br><span class="line">				b1 += temp.b;</span><br><span class="line">				<span class="keyword">while</span>(!temp.qw.<span class="built_in">empty</span>())&#123;</span><br><span class="line">					qw1.<span class="built_in">push</span>(temp.qw.<span class="built_in">top</span>());</span><br><span class="line">					temp.qw.<span class="built_in">pop</span>();</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">while</span>(!temp.qb.<span class="built_in">empty</span>())&#123;</span><br><span class="line">					qb1.<span class="built_in">push</span>(temp.qb.<span class="built_in">top</span>());</span><br><span class="line">					temp.qb.<span class="built_in">pop</span>();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// cout &lt;&lt; u &lt;&lt; &quot; &quot; &lt;&lt; w1 &lt;&lt; &quot; &quot; &lt;&lt; b1 &lt;&lt;  &quot;\n&quot;;</span></span><br><span class="line">			<span class="comment">// priority_queue&lt;int, vector&lt;int&gt;, greater&lt;&gt;&gt; q11 = qw1, q22 = qb1;</span></span><br><span class="line">			<span class="comment">// cout &lt;&lt; &quot;w: &quot;;</span></span><br><span class="line">			<span class="comment">// while(!q11.empty())&#123;</span></span><br><span class="line">				<span class="comment">// cout &lt;&lt; q11.top() &lt;&lt; &quot; &quot;;</span></span><br><span class="line">				<span class="comment">// q11.pop();</span></span><br><span class="line">			<span class="comment">// &#125;cout &lt;&lt; &quot;\n&quot;;</span></span><br><span class="line">			<span class="comment">// cout &lt;&lt; &quot;b: &quot;;</span></span><br><span class="line">			<span class="comment">// while(!q22.empty())&#123;</span></span><br><span class="line">				<span class="comment">// cout &lt;&lt; q22.top() &lt;&lt; &quot; &quot;;</span></span><br><span class="line">				<span class="comment">// q22.pop();</span></span><br><span class="line">			<span class="comment">// &#125;cout &lt;&lt; &quot;\n&quot;;</span></span><br><span class="line">			my temp;</span><br><span class="line">			priority_queue&lt;<span class="type">int</span>, vector&lt;<span class="type">int</span>&gt;, greater&lt;&gt;&gt; q1, q2;</span><br><span class="line">			temp.w = temp.b = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">if</span>(color[u] == <span class="number">0</span>)&#123;</span><br><span class="line">				temp.w ++;</span><br><span class="line">				q1.<span class="built_in">push</span>(val[u]);</span><br><span class="line">			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				temp.b ++;</span><br><span class="line">				q2.<span class="built_in">push</span>(val[u]);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(w1 != b1)&#123;</span><br><span class="line">				<span class="keyword">if</span>(<span class="built_in">abs</span>(w1 - b1) == <span class="number">1</span>)&#123;</span><br><span class="line">					<span class="keyword">if</span>(w1 &gt; b1)&#123;</span><br><span class="line">						q1.<span class="built_in">push</span>(qw1.<span class="built_in">top</span>());</span><br><span class="line">					&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">						q2.<span class="built_in">push</span>(qb1.<span class="built_in">top</span>());</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					<span class="keyword">while</span>(<span class="built_in">abs</span>(w1 - b1) &gt;= <span class="number">2</span>)&#123;</span><br><span class="line">						<span class="keyword">if</span>(w1 &gt; b1)&#123;</span><br><span class="line">							ans += qw1.<span class="built_in">top</span>();</span><br><span class="line">							qw1.<span class="built_in">pop</span>();</span><br><span class="line">							w1 --, b1 ++;</span><br><span class="line">						&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">							ans += qb1.<span class="built_in">top</span>();</span><br><span class="line">							qb1.<span class="built_in">pop</span>();</span><br><span class="line">							w1 --, b1 ++;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			temp.qw = q1, temp.qb = q2;</span><br><span class="line">			temp.w += w1, temp.b += b1;</span><br><span class="line">			<span class="keyword">return</span> temp;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(root[i] == <span class="number">0</span>)&#123;</span><br><span class="line">				<span class="built_in">F</span>(F, i);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">    	cout &lt;&lt; ans &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Fliegelâ€“Van-Flandern-ç®—æ³•"><a href="#Fliegelâ€“Van-Flandern-ç®—æ³•" class="headerlink" title="Fliegelâ€“Van Flandern ç®—æ³•"></a>Fliegelâ€“Van Flandern ç®—æ³•</h3><p>è¿™ä¸ªç®—æ³•å¯ä»¥å°†ä»å…¬å…ƒå‰4713å¹´1æœˆ1æ—¥ï¼ˆå³å„’ç•¥æ—¥JD&#x3D;0ï¼‰èµ·è®¡ç®—çš„**å„’ç•¥æ—¥æ•°ï¼ˆJDï¼‰**è½¬æ¢ä¸ºå…¬å†æ—¥æœŸï¼ˆå¹´ã€æœˆã€æ—¥ï¼‰ï¼Œå¹¶è‡ªåŠ¨åˆ¤æ–­æ˜¯åœ¨å„’ç•¥å†è¿˜æ˜¯æ ¼é‡Œå†ä¸­ï¼ˆ1582å¹´10æœˆ15æ—¥ä¸ºåˆ‡æ¢ç‚¹ï¼‰ã€‚</p>
<ul>
<li>JD â‰¥ 2299161ï¼šé‡‡ç”¨<strong>æ ¼é‡Œå†</strong>ï¼ˆå³1582å¹´10æœˆ15æ—¥ä¹‹åï¼‰</li>
<li>JD &lt; 2299161ï¼šé‡‡ç”¨<strong>å„’ç•¥å†</strong></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Fliegelâ€“Van Flandern ç®—æ³•</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">julianDayToDate</span><span class="params">(ll JD, ll &amp;day, ll &amp;month, ll &amp;year, <span class="type">bool</span> &amp;isBC)</span> </span>&#123;</span><br><span class="line">    ll A, B, C, D, E;</span><br><span class="line">    <span class="keyword">if</span> (JD &gt;= <span class="number">2299161</span>) &#123; </span><br><span class="line">        <span class="type">double</span> alpha = <span class="built_in">floor</span>((JD - <span class="number">1867216.25</span>) / <span class="number">36524.25</span>);</span><br><span class="line">        A = JD + <span class="number">1</span> + alpha - <span class="built_in">floor</span>(alpha / <span class="number">4.0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123; </span><br><span class="line">        A = JD;</span><br><span class="line">    &#125;</span><br><span class="line">    B = A + <span class="number">1524</span>;</span><br><span class="line">    C = <span class="built_in">floor</span>((<span class="type">double</span>)(B - <span class="number">122.1</span>) / <span class="number">365.25</span>);</span><br><span class="line">    D = <span class="built_in">floor</span>(<span class="number">365.25</span> * (<span class="type">double</span>)C);</span><br><span class="line">    E = <span class="built_in">floor</span>((<span class="type">double</span>)(B - D) / <span class="number">30.6001</span>);</span><br><span class="line">    day = B - D - <span class="built_in">floor</span>(<span class="number">30.6001</span> * E);</span><br><span class="line">    <span class="keyword">if</span> (E &lt; <span class="number">14</span>)</span><br><span class="line">        month = E - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        month = E - <span class="number">13</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (month &gt; <span class="number">2</span>)</span><br><span class="line">        year = C - <span class="number">4716</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        year = C - <span class="number">4715</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (year &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        isBC = <span class="literal">true</span>;</span><br><span class="line">        day = day;</span><br><span class="line">        month = month;</span><br><span class="line">        year = -(year) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        isBC = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">    ll Q;</span><br><span class="line">    cin &gt;&gt; Q;</span><br><span class="line">    <span class="keyword">while</span>(Q--)&#123;</span><br><span class="line">        ll JD;</span><br><span class="line">        cin &gt;&gt; JD;</span><br><span class="line">        ll day, month, year;</span><br><span class="line">        <span class="type">bool</span> isBC = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">julianDayToDate</span>(JD, day, month, year, isBC);</span><br><span class="line">        <span class="keyword">if</span>(isBC)&#123;</span><br><span class="line">            cout &lt;&lt; day &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; month &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; year &lt;&lt; <span class="string">&quot; BC\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            cout &lt;&lt; day &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; month &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; year &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é€†æ³¢å…°å¼"><a href="#é€†æ³¢å…°å¼" class="headerlink" title="é€†æ³¢å…°å¼"></a>é€†æ³¢å…°å¼</h3><p>é€†æ³¢å…°è¡¨è¾¾å¼ï¼ˆReverse Polish Notationï¼Œç®€ç§° <code>RPN</code>ï¼‰ï¼Œä¹Ÿç§°ä¸ºåç¼€è¡¨è¾¾å¼ï¼Œæ˜¯ä¸€ç§å°†è¿ç®—ç¬¦æ”¾åœ¨æ“ä½œæ•°ä¹‹åçš„æ•°å­¦è¡¨è¾¾æ–¹å¼ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mod1 1000000007</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">3e5</span> + <span class="number">1</span>;</span><br><span class="line"><span class="function">vector&lt;ll&gt; <span class="title">stack1</span><span class="params">(N,<span class="number">0</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> size1;</span><br><span class="line">ll a;</span><br><span class="line">ll b;</span><br><span class="line">ll ans;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">(<span class="type">void</span>)</span></span>&#123;</span><br><span class="line">    size1 = <span class="number">0</span>;</span><br><span class="line">    string s;</span><br><span class="line">    <span class="built_in">getline</span>(cin,s);</span><br><span class="line">    <span class="function">istringstream <span class="title">ios</span><span class="params">(s)</span></span>;</span><br><span class="line">    string token;</span><br><span class="line">    <span class="keyword">while</span>(ios &gt;&gt; token)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">isdigit</span>(token[<span class="number">0</span>]))&#123;</span><br><span class="line">            stack1[size1++] = <span class="built_in">stoll</span>(token);</span><br><span class="line">            <span class="comment">// cout &lt;&lt; stoll(token) &lt;&lt; &quot;\n&quot;;</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            b = stack1[--size1];</span><br><span class="line">            a = stack1[--size1];</span><br><span class="line">            <span class="comment">// cout &lt;&lt; a &lt;&lt; &quot; &quot; &lt;&lt; b &lt;&lt; &quot;\n&quot;;</span></span><br><span class="line">            <span class="keyword">if</span>(token == <span class="string">&quot;+&quot;</span>)&#123;</span><br><span class="line">                ans = (a + b) % mod1;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(token == <span class="string">&quot;-&quot;</span>)&#123;</span><br><span class="line">                ans = (a - b) % mod1;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(token == <span class="string">&quot;*&quot;</span>)&#123;</span><br><span class="line">                ans = (a * b) % mod1;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                ans = (a / b) % mod1;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// cout &lt;&lt; ans &lt;&lt; &quot;\n&quot;;</span></span><br><span class="line">            stack1[size1++] = ans;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; stack1[size1 - <span class="number">1</span>] &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="çº¦ç‘Ÿå¤«ç¯"><a href="#çº¦ç‘Ÿå¤«ç¯" class="headerlink" title="çº¦ç‘Ÿå¤«ç¯"></a>çº¦ç‘Ÿå¤«ç¯</h3><p>çº¦ç‘Ÿå¤«ç¯é—®é¢˜æè¿°çš„æ˜¯ä¸€ç¾¤äººå›´æˆä¸€åœˆï¼Œæ¯éš”å›ºå®šäººæ•°ï¼ˆå³ç¬¬ k ä¸ªäººï¼‰è¢«æ·˜æ±°ï¼Œç›´åˆ°æœ€åå‰©ä¸‹ä¸€ä¸ªäººã€‚æœ€åå­˜æ´»çš„äººçš„ä½ç½®å¯ä»¥é€šè¿‡ä¸‹é¢çš„é€’æ¨å¼æ¥æ±‚è§£ï¼š</p>
<p>å‡è®¾åªæœ‰ 1 ä¸ªäººæ—¶ï¼Œå­˜æ´»çš„ä½ç½®ä¸º 0ï¼ˆæ³¨æ„ï¼šè¿™é‡Œç”¨ 0 è¡¨ç¤ºç¼–å·ï¼Œä» 0 å¼€å§‹ï¼‰ï¼›å½“æœ‰ i ä¸ªäººæ—¶ï¼Œå¯ä»¥åˆ©ç”¨ i-1 ä¸ªäººçš„ç»“æœé€’æ¨å‡º i ä¸ªäººçš„æƒ…å†µã€‚<br>é€’æ¨å…¬å¼ä¸ºï¼š</p>
<p>f(i) &#x3D; (f(iâˆ’1) + k ) modâ€‰â€‰i</p>
<p>å…¶ä¸­ï¼Œf(i)è¡¨ç¤º i ä¸ªäººæ—¶æœ€åå­˜æ´»è€…çš„ç¼–å·ã€‚</p>
<p>i &#x3D; 1 æ—¶ï¼Œf[i]æ˜¾ç„¶ç­‰äº0</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">josephus</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> result = <span class="number">0</span>; <span class="comment">// åˆå§‹åªæœ‰ä¸€ä¸ªäººæ—¶ï¼Œä½ç½®æ˜¯ 0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        result = (result + k) % i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç¦»æ•£åŒ–-1"><a href="#ç¦»æ•£åŒ–-1" class="headerlink" title="ç¦»æ•£åŒ–"></a>ç¦»æ•£åŒ–</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>) -&gt; ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// cin &gt;&gt; t;</span></span><br><span class="line">    <span class="keyword">while</span> (t--)&#123;</span><br><span class="line">    	<span class="type">int</span> n;</span><br><span class="line">    	cin &gt;&gt; n;</span><br><span class="line">    	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">v1</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">ord</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">    		cin &gt;&gt; v1[i];</span><br><span class="line">    		ord[i] = v1[i];</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="built_in">sort</span>(ord.<span class="built_in">begin</span>() + <span class="number">1</span>, ord.<span class="built_in">end</span>());</span><br><span class="line">    	<span class="type">int</span> m = <span class="number">1</span>;</span><br><span class="line">    	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i ++)&#123;</span><br><span class="line">    		<span class="keyword">if</span>(ord[m] != ord[i])&#123;</span><br><span class="line">    			ord[++ m] = ord[i];</span><br><span class="line">    		&#125;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">auto</span> find = [&amp;](<span class="type">int</span> x) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">    		<span class="type">int</span> l = <span class="number">1</span>, r = m;</span><br><span class="line">    		<span class="type">int</span> mid, ans;</span><br><span class="line">    		<span class="keyword">while</span>(l &lt;= r)&#123;</span><br><span class="line">    			mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    			<span class="keyword">if</span>(x &gt;= ord[mid])&#123;</span><br><span class="line">    				ans = mid;</span><br><span class="line">    				l = mid + <span class="number">1</span>;</span><br><span class="line">    			&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    				r = mid - <span class="number">1</span>;</span><br><span class="line">    			&#125;</span><br><span class="line">    		&#125;</span><br><span class="line">    		<span class="keyword">return</span> ans;</span><br><span class="line">    	&#125;;</span><br><span class="line">    	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;after: &quot;</span> &lt;&lt; <span class="built_in">find</span>(v1[i]) &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Nçš‡åé—®é¢˜"><a href="#Nçš‡åé—®é¢˜" class="headerlink" title="Nçš‡åé—®é¢˜"></a>Nçš‡åé—®é¢˜</h3><h4 id="ä½è¿ç®—ç‰ˆæœ¬"><a href="#ä½è¿ç®—ç‰ˆæœ¬" class="headerlink" title="ä½è¿ç®—ç‰ˆæœ¬"></a>ä½è¿ç®—ç‰ˆæœ¬</h4><p>æ¯æ¬¡å°†çŠ¶æ€è¿›è¡Œå·¦ç§»å’Œå³ç§»ä¸€ä½æ¨¡æ‹Ÿå¯¹è§’çº¿ç§»åŠ¨ï¼Œè€Œä¸”åˆ©ç”¨ä½è¿ç®—å¿«é€Ÿå¾—åˆ°æ­¤è¡Œèƒ½å¤Ÿæ”¾ç½®çš„ä½ç½®</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line">vector&lt;array&lt;<span class="type">int</span>,11&gt;&gt; sols;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dfs</span><span class="params">(<span class="type">int</span> row, <span class="type">int</span> colMask, <span class="type">int</span> d1Mask, <span class="type">int</span> d2Mask, array&lt;<span class="type">int</span>,<span class="number">11</span>&gt;&amp; col)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (row == n) &#123;</span><br><span class="line">        sols.<span class="built_in">push_back</span>(col);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> avail = ((<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>) &amp; ~(colMask | d1Mask | d2Mask); </span><br><span class="line">    <span class="keyword">while</span> (avail) &#123;</span><br><span class="line">        <span class="type">int</span> p = avail &amp; -avail; </span><br><span class="line">        <span class="type">int</span> c = __builtin_ctz(p);</span><br><span class="line">        col[row] = c;</span><br><span class="line">        <span class="built_in">dfs</span>(row + <span class="number">1</span>,</span><br><span class="line">            colMask | p,</span><br><span class="line">            (d1Mask | p) &lt;&lt; <span class="number">1</span>,</span><br><span class="line">            (d2Mask | p) &gt;&gt; <span class="number">1</span>,</span><br><span class="line">            col);</span><br><span class="line">        avail ^= p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">	cin &gt;&gt; n;</span><br><span class="line">    array&lt;<span class="type">int</span>,11&gt; col&#123;&#125;;</span><br><span class="line">    <span class="built_in">dfs</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, col);</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> S = sols.<span class="built_in">size</span>();</span><br><span class="line">    cout &lt;&lt; S &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h2><h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><p>åŸºäºçº¢é»‘æ ‘å®ç°çš„è‡ªåŠ¨æ’åºã€æ— é‡å¤å…ƒç´ çš„å…³è”å®¹å™¨</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">set&lt;<span class="type">int</span>&gt; s;                  <span class="comment">// å‡åºï¼Œé»˜è®¤ less&lt;int&gt;</span></span><br><span class="line">set&lt;string&gt; names;</span><br><span class="line">set&lt;<span class="type">int</span>, greater&lt;<span class="type">int</span>&gt;&gt; s2;   <span class="comment">// é™åºæ’åˆ—</span></span><br><span class="line">s.<span class="built_in">insert</span>(<span class="number">5</span>);    <span class="comment">// æ’å…¥ 5ï¼Œè‹¥å·²å­˜åœ¨åˆ™æ— æ•ˆ</span></span><br><span class="line">s.<span class="built_in">erase</span>(<span class="number">5</span>);       <span class="comment">// åˆ é™¤å€¼ä¸º5çš„å…ƒç´ </span></span><br><span class="line">s.<span class="built_in">erase</span>(it);      <span class="comment">// é€šè¿‡è¿­ä»£å™¨åˆ é™¤</span></span><br><span class="line">s.<span class="built_in">erase</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>()); <span class="comment">// æ¸…ç©º</span></span><br><span class="line"><span class="keyword">auto</span> it = s.<span class="built_in">find</span>(<span class="number">5</span>);     <span class="comment">// æ‰¾åˆ°è¿”å›è¿­ä»£å™¨ï¼Œå¦åˆ™ä¸º s.end()</span></span><br><span class="line"><span class="keyword">if</span> (it != s.<span class="built_in">end</span>()) cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; found\n&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (s.<span class="built_in">count</span>(<span class="number">5</span>)) cout &lt;&lt; <span class="string">&quot;å­˜åœ¨&quot;</span>;</span><br><span class="line">s.<span class="built_in">size</span>();</span><br><span class="line">s.<span class="built_in">empty</span>();</span><br><span class="line">s.<span class="built_in">clear</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> it = s.<span class="built_in">begin</span>(); it != s.<span class="built_in">end</span>(); ++it)</span><br><span class="line">    cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> x : s)</span><br><span class="line">    cout &lt;&lt; x &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line"><span class="keyword">auto</span> it1 = s.<span class="built_in">lower_bound</span>(<span class="number">5</span>); <span class="comment">// è¿”å› â‰¥ 5 çš„ç¬¬ä¸€ä¸ªå…ƒç´ è¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">auto</span> it2 = s.<span class="built_in">upper_bound</span>(<span class="number">5</span>); <span class="comment">// è¿”å› &gt; 5 çš„ç¬¬ä¸€ä¸ªå…ƒç´ è¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">cmp</span> &#123;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&amp; a, <span class="type">const</span> pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;&amp; b)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a.first &lt; b.first;  <span class="comment">// å¯å®šä¹‰å¤åˆæ’åºè§„åˆ™</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">set&lt;pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;, cmp&gt; s;</span><br></pre></td></tr></table></figure>

<p>æ’å…¥&#x2F;åˆ é™¤&#x2F;æŸ¥æ‰¾éƒ½æ˜¯O(log n)</p>
<h3 id="ordered-set"><a href="#ordered-set" class="headerlink" title="ordered_set"></a>ordered_set</h3><p>è§£é‡Šå„ä¸ªéƒ¨åˆ†çš„ä½œç”¨</p>
<table>
<thead>
<tr>
<th>ä»£ç éƒ¨åˆ†</th>
<th>åŠŸèƒ½</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>s.insert(5)</code></td>
<td>æ’å…¥å…ƒç´ </td>
<td><code>ordered_set</code> è‡ªåŠ¨å»é‡</td>
</tr>
<tr>
<td><code>s.erase(7)</code></td>
<td>åˆ é™¤å…ƒç´ </td>
<td>éœ€å…ˆæ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</td>
</tr>
<tr>
<td><code>find_by_order(k)</code></td>
<td>è·å–ç¬¬ k å°å…ƒç´ </td>
<td><code>0-based</code>ï¼Œéœ€å…ˆæ£€æŸ¥æ˜¯å¦ä¸ºç©º</td>
</tr>
<tr>
<td><code>order_of_key(10)</code></td>
<td>è·å–å°äºæŸä¸ªå€¼çš„å…ƒç´ æ•°é‡</td>
<td><code>O(log n)</code> å¤æ‚åº¦</td>
</tr>
<tr>
<td><code>find(5)</code></td>
<td>æŸ¥æ‰¾å…ƒç´ </td>
<td>ç›´æ¥è¿”å›è¿­ä»£å™¨</td>
</tr>
<tr>
<td><code>s.size()</code></td>
<td>è·å–é›†åˆå¤§å°</td>
<td><code>O(1)</code> å¤æ‚åº¦</td>
</tr>
<tr>
<td><code>s.clear()</code></td>
<td>æ¸…ç©ºé›†åˆ</td>
<td>ç›´æ¥æ¸…ç©º</td>
</tr>
</tbody></table>
<p>æ—¶é—´å¤æ‚åº¦</p>
<ul>
<li>æ’å…¥ï¼š<code>O(log n)</code></li>
<li>åˆ é™¤ï¼š<code>O(log n)</code></li>
<li>æŸ¥æ‰¾ï¼š<code>O(log n)</code></li>
<li>è·å–ç¬¬ k å°å…ƒç´ ï¼š<code>O(log n)</code></li>
<li>è·å–å°äº x çš„å…ƒç´ æ•°é‡ï¼š<code>O(log n)</code></li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> tree&lt;</span><br><span class="line">    <span class="type">int</span>, </span><br><span class="line">    null_type, </span><br><span class="line">    less&lt;<span class="type">int</span>&gt;, </span><br><span class="line">    rb_tree_tag, </span><br><span class="line">    tree_order_statistics_node_update</span><br><span class="line">&gt; ordered_set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ordered_set s;</span><br><span class="line">    s.<span class="built_in">insert</span>(<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">if</span> (s.<span class="built_in">find</span>(<span class="number">7</span>) != s.<span class="built_in">end</span>()) s.<span class="built_in">erase</span>(<span class="number">7</span>);</span><br><span class="line">    <span class="keyword">if</span> (s.<span class="built_in">size</span>() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;The 2nd smallest element is: &quot;</span> &lt;&lt; *s.<span class="built_in">find_by_order</span>(<span class="number">1</span>) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (s.<span class="built_in">find</span>(<span class="number">5</span>) != s.<span class="built_in">end</span>()) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;5 exists in the set\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!s.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Minimum element: &quot;</span> &lt;&lt; *s.<span class="built_in">find_by_order</span>(<span class="number">0</span>) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Maximum element: &quot;</span> &lt;&lt; *s.<span class="built_in">find_by_order</span>(s.<span class="built_in">size</span>() - <span class="number">1</span>) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    s.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="string"><a href="#string" class="headerlink" title="string"></a>string</h3><h4 id="æ•°å€¼ä¸å­—ç¬¦ä¸²è½¬åŒ–"><a href="#æ•°å€¼ä¸å­—ç¬¦ä¸²è½¬åŒ–" class="headerlink" title="æ•°å€¼ä¸å­—ç¬¦ä¸²è½¬åŒ–"></a>æ•°å€¼ä¸å­—ç¬¦ä¸²è½¬åŒ–</h4><table>
<thead>
<tr>
<th>å‡½æ•°ç­¾å</th>
<th>ä½œç”¨è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>to_string(val)</code></td>
<td>æŠŠ <code>val</code> è½¬æ¢æˆ <code>string</code></td>
</tr>
<tr>
<td><code>stoi(s, p, b)</code></td>
<td>æŠŠå­—ç¬¦ä¸² <code>s</code> ä»ä¸‹æ ‡ <code>p</code> å¼€å§‹è½¬æ¢æˆ <code>b</code> è¿›åˆ¶çš„ <code>int</code></td>
</tr>
<tr>
<td><code>stol(s, p, b)</code></td>
<td>è½¬æ¢æˆ <code>long</code></td>
</tr>
<tr>
<td><code>stoul(s, p, b)</code></td>
<td>è½¬æ¢æˆ <code>unsigned long</code></td>
</tr>
<tr>
<td><code>stoll(s, p, b)</code></td>
<td>è½¬æ¢æˆ <code>long long</code></td>
</tr>
<tr>
<td><code>stoull(s, p, b)</code></td>
<td>è½¬æ¢æˆ <code>unsigned long long</code></td>
</tr>
<tr>
<td><code>stof(s, p, b)</code></td>
<td>è½¬æ¢æˆ <code>float</code></td>
</tr>
<tr>
<td><code>stod(s, p, b)</code></td>
<td>è½¬æ¢æˆ <code>double</code></td>
</tr>
<tr>
<td><code>stold(s, p, b)</code></td>
<td>è½¬æ¢æˆ <code>long double</code></td>
</tr>
</tbody></table>
<p><code>p</code> å’Œ <code>b</code>å¯çœï¼Œé»˜è®¤ä¸ºåè¿›åˆ¶</p>
<h4 id="å­—ç¬¦ä¸²è¾“å…¥ä¸åˆ†å‰²"><a href="#å­—ç¬¦ä¸²è¾“å…¥ä¸åˆ†å‰²" class="headerlink" title="å­—ç¬¦ä¸²è¾“å…¥ä¸åˆ†å‰²"></a>å­—ç¬¦ä¸²è¾“å…¥ä¸åˆ†å‰²</h4><p><code>getline(cin, s)</code></p>
<p><code>stringstream s(ss)</code></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">string s1;</span><br><span class="line"><span class="built_in">getline</span>(cin, s1);</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v1;</span><br><span class="line"><span class="function">stringstream <span class="title">ss</span><span class="params">(s1)</span></span>;</span><br><span class="line">string temp;</span><br><span class="line"><span class="comment">// while(ss &gt;&gt; temp) æŒ‰ç©ºæ ¼è¯»å–</span></span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">getline</span>(ss, temp, <span class="string">&#x27;,&#x27;</span>))&#123;</span><br><span class="line">    <span class="keyword">if</span>(temp[<span class="number">0</span>] == <span class="string">&#x27;-&#x27;</span>)&#123;</span><br><span class="line">        temp = temp.<span class="built_in">substr</span>(<span class="number">1</span>);</span><br><span class="line">        v1.<span class="built_in">push_back</span>(-<span class="built_in">stoi</span>(temp));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        v1.<span class="built_in">push_back</span>(<span class="built_in">stoi</span>(temp));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ”¹å˜å¤§å°å†™"><a href="#æ”¹å˜å¤§å°å†™" class="headerlink" title="æ”¹å˜å¤§å°å†™"></a>æ”¹å˜å¤§å°å†™</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">transform</span>(èµ·ç‚¹, ç»ˆç‚¹, è¾“å‡ºä½ç½®, å¤„ç†å‡½æ•°)</span><br><span class="line"><span class="comment">// å˜å°å†™</span></span><br><span class="line"><span class="built_in">transform</span>(s1.<span class="built_in">begin</span>(), s1.<span class="built_in">end</span>(), s1.<span class="built_in">begin</span>(), ::tolower);</span><br><span class="line"><span class="comment">// å˜å¤§å†™</span></span><br><span class="line"><span class="built_in">transform</span>(s1.<span class="built_in">begin</span>(), s1.<span class="built_in">end</span>(), s1.<span class="built_in">begin</span>(), ::toupper);</span><br><span class="line"><span class="comment">// è½¬æ¢åˆ°å¦ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">string src = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">string dest;</span><br><span class="line">dest.<span class="built_in">resize</span>(src.<span class="built_in">size</span>());</span><br><span class="line"><span class="built_in">transform</span>(src.<span class="built_in">begin</span>(), src.<span class="built_in">end</span>(), dest.<span class="built_in">begin</span>(), ::tolower);</span><br><span class="line"><span class="comment">// dest ç°åœ¨æ˜¯ &quot;hello&quot;ï¼ŒåŸå§‹ src ä¸å˜</span></span><br></pre></td></tr></table></figure>

<h4 id="å­ä¸²substr"><a href="#å­ä¸²substr" class="headerlink" title="å­ä¸²substr"></a>å­ä¸²<code>substr</code></h4><p><code>substr(st, len)</code></p>
<p><code>len</code>çœç•¥æ—¶è¡¨ç¤ºåˆ°en</p>
<h4 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h4><h5 id="find"><a href="#find" class="headerlink" title="find"></a><code>find</code></h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="function">std::string <span class="title">str</span> <span class="params">(<span class="string">&quot;There are two needles in this haystack with needles.&quot;</span>)</span></span>;</span><br><span class="line">    <span class="function">std::string <span class="title">str2</span> <span class="params">(<span class="string">&quot;needle&quot;</span>)</span></span>;</span><br><span class="line">    <span class="comment">//åœ¨strå½“ä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå‡ºç°çš„needleï¼Œæ‰¾åˆ°åˆ™è¿”å›å‡ºç°çš„ä½ç½®ï¼Œå¦åˆ™è¿”å›ç»“å°¾</span></span><br><span class="line">    std::<span class="type">size_t</span> found = str.<span class="built_in">find</span>(str2);</span><br><span class="line">    <span class="keyword">if</span> (found!=std::string::npos) <span class="comment">// ç»“å°¾</span></span><br><span class="line">    <span class="comment">//åœ¨strå½“ä¸­ï¼Œä»ç¬¬found+1çš„ä½ç½®å¼€å§‹æŸ¥æ‰¾å‚æ•°å­—ç¬¦ä¸²çš„å‰6ä¸ªå­—ç¬¦</span></span><br><span class="line">    found = str.<span class="built_in">find</span>(<span class="string">&quot;needles are small&quot;</span>,found+<span class="number">1</span>,<span class="number">6</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="rfind"><a href="#rfind" class="headerlink" title="rfind"></a><code>rfind</code></h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//rfindæ˜¯æ‰¾æœ€åä¸€ä¸ªå‡ºç°çš„åŒ¹é…å­—ç¬¦ä¸²</span></span><br><span class="line">std::<span class="type">size_t</span> found = str.<span class="built_in">rfind</span>(str2);</span><br></pre></td></tr></table></figure>

<h5 id="find-of"><a href="#find-of" class="headerlink" title="find_...of"></a><code>find_...of</code></h5><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">find_first_of</span>(args) <span class="comment">// **æŸ¥æ‰¾argsä¸­ä»»ä½•ä¸€ä¸ªå­—ç¬¦ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®**</span></span><br><span class="line"><span class="built_in">find_last_of</span>(args) <span class="comment">// **æœ€åä¸€ä¸ªå‡ºç°çš„ä½ç½®**</span></span><br><span class="line"><span class="built_in">find_fist_not_of</span>(args) <span class="comment">// **æŸ¥æ‰¾ç¬¬ä¸€ä¸ªä¸åœ¨argsä¸­çš„å­—ç¬¦**</span></span><br><span class="line">find_last_not_of <span class="comment">// **æŸ¥æ‰¾æœ€åä¸€ä¸ªä¸åœ¨argsä¸­å‡ºç°çš„å­—ç¬¦**</span></span><br></pre></td></tr></table></figure>

<h4 id="æ’å…¥insert"><a href="#æ’å…¥insert" class="headerlink" title="æ’å…¥insert"></a>æ’å…¥insert</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    string str=<span class="string">&quot;to be question&quot;</span>;</span><br><span class="line">    string str2=<span class="string">&quot;the &quot;</span>;</span><br><span class="line">    string str3=<span class="string">&quot;or not to be&quot;</span>;</span><br><span class="line">    string::iterator it;</span><br><span class="line">    <span class="comment">//s.insert(pos,str)//åœ¨sçš„posä½ç½®æ’å…¥str</span></span><br><span class="line">    str.<span class="built_in">insert</span>(<span class="number">6</span>,str2); </span><br><span class="line">    <span class="comment">//s.insert(pos,str,a,n)åœ¨sçš„posä½ç½®æ’å…¥strä¸­æ’å…¥ä½ç½®aåˆ°åé¢çš„nä¸ªå­—ç¬¦</span></span><br><span class="line">    str.<span class="built_in">insert</span>(<span class="number">6</span>,str3,<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line">    <span class="comment">//s.insert(pos,cstr,n)//åœ¨posä½ç½®æ’å…¥cstrå­—ç¬¦ä¸²ä»å¼€å§‹åˆ°åé¢çš„nä¸ªå­—ç¬¦</span></span><br><span class="line">    str.<span class="built_in">insert</span>(<span class="number">10</span>,<span class="string">&quot;that is cool&quot;</span>,<span class="number">8</span>); </span><br><span class="line">    <span class="comment">//s.insert(pos,n,ch)åœ¨s.posä½ç½®ä¸Šé¢æ’å…¥nä¸ªch</span></span><br><span class="line">    str.<span class="built_in">insert</span>(<span class="number">15</span>,<span class="number">1</span>,<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">    <span class="comment">//s.insert(s.it,ch)åœ¨sçš„itæŒ‡å‘ä½ç½®å‰é¢æ’å…¥ä¸€ä¸ªå­—ç¬¦chï¼Œè¿”å›æ–°æ’å…¥çš„ä½ç½®çš„è¿­ä»£å™¨</span></span><br><span class="line">    it = str.<span class="built_in">insert</span>(str.<span class="built_in">begin</span>()+<span class="number">5</span>,<span class="string">&#x27;,&#x27;</span>); <span class="comment">// to be, not to be: that is the question</span></span><br><span class="line">    <span class="comment">//s.insert(s.it,n,ch)//åœ¨sçš„itæ‰€æŒ‡å‘ä½ç½®çš„å‰é¢æ’å…¥nä¸ªch</span></span><br><span class="line">    str.<span class="built_in">insert</span> (str.<span class="built_in">end</span>(),<span class="number">3</span>,<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">    <span class="comment">//s.insert(it,str.ita,str.itb)åœ¨itæ‰€æŒ‡å‘çš„ä½ç½®çš„å‰é¢æ’å…¥[ita,itb)çš„å­—ç¬¦ä¸²</span></span><br><span class="line">    str.<span class="built_in">insert</span> (it+<span class="number">2</span>,str3.<span class="built_in">begin</span>(),str3.<span class="built_in">begin</span>()+<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="map-unordered-map"><a href="#map-unordered-map" class="headerlink" title="map  &amp; unordered_map"></a>map  &amp; unordered_map</h3><p>mapåŸºäºçº¢é»‘æ ‘ï¼ˆæˆ–å…¶ä»–å¹³è¡¡äºŒå‰æ ‘ï¼‰å®ç°ï¼Œæ‰€æœ‰å…ƒç´ æŒ‰ç…§keyçš„å¤§å°æœ‰åºå­˜å‚¨ã€‚</p>
<p>unordered_mapåŸºäºå“ˆå¸Œè¡¨å®ç°ï¼Œå…ƒç´ æŒ‰ç…§å“ˆå¸Œæ¡¶æ— åºå­˜å‚¨ã€‚</p>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>map</th>
<th>unordered_map</th>
</tr>
</thead>
<tbody><tr>
<td>æŸ¥æ‰¾&#x2F;æ’å…¥&#x2F;åˆ é™¤</td>
<td>O(logN)ï¼ˆä¸¥æ ¼ï¼‰</td>
<td>å¹³å‡O(1),æœ€åO(N)ï¼ˆå“ˆå¸Œå†²çªï¼‰</td>
</tr>
</tbody></table>
<blockquote>
<p>å¦‚æœå¯¹ key çš„é¡ºåºæœ‰éœ€æ±‚ï¼Œæˆ–æ•°æ®é‡ä¸æç«¯ã€æ€§èƒ½è¦æ±‚ä¸¥æ ¼ç¨³å®šï¼Œå°±ç”¨ <code>map</code>ã€‚</p>
</blockquote>
<blockquote>
<p>å¦‚æœæ•°æ®éšæœºåˆ†å¸ƒã€å¯¹éå†é¡ºåºæ— è¦æ±‚ï¼Œå¸Œæœ›è·å¾—æå¿«çš„å¹³å‡æŸ¥æ‰¾é€Ÿåº¦ï¼Œå¯ç”¨ <code>unordered_map</code>ï¼Œä½†è¦æ³¨æ„ï¼š</p>
<ol>
<li><strong>é€‚å½“ <code>reserve</code></strong>ï¼šæå‰ <code>reserve(bucket_count)</code> æˆ– <code>max_load_factor</code> æ¥å‡å°‘æ‰©å®¹ï¼›</li>
<li><strong>è‡ªå®šä¹‰å“ˆå¸Œ</strong>ï¼šåœ¨ CF ç­‰å¹³å°ä¸Šå¯ç”¨ <code>splitmix64</code> ç­‰æ›´å®‰å…¨çš„å“ˆå¸Œå‡½æ•°ï¼Œé˜²æ­¢ç¢°æ’æ”»å‡»ã€‚</li>
</ol>
</blockquote>
<h2 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h2><h3 id="é‡è½½è¿ç®—ç¬¦å·ï¼ˆæ¯”è¾ƒï¼‰"><a href="#é‡è½½è¿ç®—ç¬¦å·ï¼ˆæ¯”è¾ƒï¼‰" class="headerlink" title="é‡è½½è¿ç®—ç¬¦å·ï¼ˆæ¯”è¾ƒï¼‰"></a>é‡è½½è¿ç®—ç¬¦å·ï¼ˆæ¯”è¾ƒï¼‰</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">my</span>&#123;</span><br><span class="line">    <span class="type">int</span> l, r, index;</span><br><span class="line">    <span class="built_in">my</span>(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> c)&#123;</span><br><span class="line">        l = a, r = b, index = c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> my x) <span class="type">const</span> &#123;  </span><br><span class="line">            <span class="comment">// ä¼˜å…ˆé˜Ÿåˆ—ä¸­æ¯”è¾ƒå…³ç³»åç€æ¥</span></span><br><span class="line">            <span class="keyword">return</span> l &gt; x.l;</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// lambdaï¼ˆç¤ºä¾‹ä¸ºå°æ ¹å †ï¼‰</span></span><br><span class="line"><span class="keyword">auto</span> cmp = [](pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; x, pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; y) &#123;</span><br><span class="line">    <span class="keyword">return</span> x.second &gt; y.second;</span><br><span class="line">&#125;;</span><br><span class="line">priority_queue&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;, vector&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt;, <span class="keyword">decltype</span>(cmp)&gt; <span class="built_in">q</span>(cmp); </span><br></pre></td></tr></table></figure>

<h3 id="æ±‚æœ€å¤§çš„æœ€å°æˆ–è€…æœ€å°çš„æœ€å¤§é—®é¢˜"><a href="#æ±‚æœ€å¤§çš„æœ€å°æˆ–è€…æœ€å°çš„æœ€å¤§é—®é¢˜" class="headerlink" title="æ±‚æœ€å¤§çš„æœ€å°æˆ–è€…æœ€å°çš„æœ€å¤§é—®é¢˜"></a>æ±‚æœ€å¤§çš„æœ€å°æˆ–è€…æœ€å°çš„æœ€å¤§é—®é¢˜</h3><p>å¤§æ¦‚ç‡æ˜¯ç”¨äºŒåˆ†æ¥æŸ¥è¯¢æœ€åˆé€‚çš„ç­”æ¡ˆï¼Œå…·ä½“ç®—æ³•çœ‹é¢˜</p>
<h3 id="åœ†å‘¨ç‡-960"><a href="#åœ†å‘¨ç‡-960" class="headerlink" title="åœ†å‘¨ç‡&#960;"></a>åœ†å‘¨ç‡&#960;</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">double</span> pi  =  <span class="built_in">acos</span>(<span class="number">-1</span>);</span><br></pre></td></tr></table></figure>

<h3 id="æ±‚å®¹å™¨æœ€å¤§å€¼"><a href="#æ±‚å®¹å™¨æœ€å¤§å€¼" class="headerlink" title="æ±‚å®¹å™¨æœ€å¤§å€¼"></a>æ±‚å®¹å™¨æœ€å¤§å€¼</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">*<span class="built_in">max_element</span>(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>());</span><br></pre></td></tr></table></figure>

<h3 id="å…¨æ’åˆ—"><a href="#å…¨æ’åˆ—" class="headerlink" title="å…¨æ’åˆ—"></a>å…¨æ’åˆ—</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::string s = <span class="string">&quot;aba&quot;</span>; </span><br><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    std::cout &lt;&lt; s &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;<span class="keyword">while</span> (std::<span class="built_in">next_permutation</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>()));</span><br><span class="line">std::cout &lt;&lt; s &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="æ±‚äºŒç»´å¹³é¢ä¸Šçš„ä¸‰è§’å½¢é¢ç§¯"><a href="#æ±‚äºŒç»´å¹³é¢ä¸Šçš„ä¸‰è§’å½¢é¢ç§¯" class="headerlink" title="æ±‚äºŒç»´å¹³é¢ä¸Šçš„ä¸‰è§’å½¢é¢ç§¯"></a>æ±‚äºŒç»´å¹³é¢ä¸Šçš„ä¸‰è§’å½¢é¢ç§¯</h3><h4 id="ç»™å®šä¸‰ä¸ªé¡¶ç‚¹"><a href="#ç»™å®šä¸‰ä¸ªé¡¶ç‚¹" class="headerlink" title="ç»™å®šä¸‰ä¸ªé¡¶ç‚¹"></a>ç»™å®šä¸‰ä¸ªé¡¶ç‚¹</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">S = <span class="built_in">abs</span>(x1 * (y2 - y3) + x2 * (y3 - y1) + x3 * (y1 - y2)) / <span class="number">2</span>;</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line">S = <span class="built_in">abs</span>((x2 - x1) * (y3 - y1) - (x3 - x1) * (y2 - y1)) / <span class="number">2</span>;</span><br><span class="line"><span class="comment">// ä¸¤ä¸ªå‚æ•°ç›¸è¾ƒäºä¸‰ä¸ªå‚æ•°ï¼Œæœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼Œå¯ä»¥å–ä¸€ä¸ªåæ ‡ä¸ºåŸºå‡†ï¼ˆ2åæ ‡ä¸1åæ ‡ï¼Œ3åæ ‡ä¸1åæ ‡ï¼Œæ¯ä¸ªå‚æ•°éƒ½è¿›è¡Œäº†ä¸€æ¬¡ç¢°é¢ï¼‰ï¼Œè¿›è¡Œç‚¹ä¸ç‚¹ä¹‹é—´çš„é€»è¾‘å¤„ç†ï¼Œå¦‚åˆ¤æ–­å¤„åæ ‡å¼‚æˆ–å€¼</span></span><br></pre></td></tr></table></figure>

<h4 id="ç»™å®šä¸‰æ¡è¾¹"><a href="#ç»™å®šä¸‰æ¡è¾¹" class="headerlink" title="ç»™å®šä¸‰æ¡è¾¹"></a>ç»™å®šä¸‰æ¡è¾¹</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">p = (a + b + c) / <span class="number">2</span>;</span><br><span class="line">S = <span class="built_in">sqrt</span>(p * (p -a ) * (p - b) * (p - c));</span><br></pre></td></tr></table></figure>

<h3 id="æ±‚ä¸‰ç»´ç©ºé—´ä¸­ä¸¤æ¡ç›´çº¿æœ€çŸ­è·ç¦»"><a href="#æ±‚ä¸‰ç»´ç©ºé—´ä¸­ä¸¤æ¡ç›´çº¿æœ€çŸ­è·ç¦»" class="headerlink" title="æ±‚ä¸‰ç»´ç©ºé—´ä¸­ä¸¤æ¡ç›´çº¿æœ€çŸ­è·ç¦»"></a>æ±‚ä¸‰ç»´ç©ºé—´ä¸­ä¸¤æ¡ç›´çº¿æœ€çŸ­è·ç¦»</h3><p><code>L1</code>ç»è¿‡<code>A(x1,  y1,  z1)</code>, <code>B(x2,  y2,  z2)</code></p>
<p><code>L2</code>ç»è¿‡<code> C(x3,  y3,  z3)</code>, <code>D(x4,  y4,  z4)</code></p>
<p><code>L1</code>çš„æ–¹å‘å‘é‡<code>d1 = B - A</code>, <code>L2</code>çš„æ–¹å‘å‘é‡<code>d2 = D - C</code></p>
<p><code>n = d1 * d2</code></p>
<p>å¦‚æœnä¸º0,åˆ™ä¸¤ç›´çº¿å¹³è¡Œ</p>
<p>ä»»é€‰<code>L1</code>ä¸Šçš„ç‚¹Aå’Œ<code>L2</code>ä¸Šçš„ç‚¹Cï¼Œè®¡ç®—<code>AC = C - A</code></p>
<p>ä¸å¹³è¡Œæ—¶ï¼Œä¸¤ç›´çº¿æœ€çŸ­è·ç¦»<code>d = |AC  .*  n| / |n|</code></p>
<p>å¹³è¡Œæ—¶ï¼Œ<code>d = |AC * d1| / |d1|</code></p>
<hr>
<p>ä¸å¹³è¡Œæƒ…å†µ<br>$$<br>è‹¥ \vec{d_1} \times \vec{d_2} \neq 0ï¼Œåˆ™æœ€çŸ­è·ç¦»å…¬å¼ä¸º<br>$$</p>
<p>$$<br>d &#x3D; \frac{\left| (C - A) \cdot \bigl(\vec{d_1} \times \vec{d_2}\bigr) \right|}{|\vec{d_1} \times \vec{d_2}|}.<br>$$</p>
<p>å…¶ä¸­ï¼š<br>$$<br>(C - A) è¡¨ç¤ºå‘é‡ï¼Œ<br>\cdot ä¸ºç‚¹ä¹˜ï¼Œ<br>\times ä¸ºå‰ä¹˜ã€‚<br>$$</p>
<p>$$<br>è¯¥å…¬å¼çš„å‡ ä½•æ„ä¹‰æ˜¯ï¼š\vec{d_1} \times \vec{d_2} å‚ç›´äºä¸¤æ¡ç›´çº¿ï¼Œ(C - A) åœ¨æ­¤å‚ç›´æ–¹å‘ä¸Šçš„æŠ•å½±é•¿åº¦å³ä¸ºä¸¤æ¡ç›´çº¿çš„æœ€çŸ­è·ç¦»ã€‚<br>$$</p>
<p>å¹³è¡Œæƒ…å†µ<br>$$<br>è‹¥ \vec{d_1} \times \vec{d_2} &#x3D; 0ï¼Œåˆ™è¯´æ˜ä¸¤æ¡ç›´çº¿å¹³è¡Œæˆ–é‡åˆã€‚æ­¤æ—¶æœ€çŸ­è·ç¦»å¯ä»¥ç”±ä¸‹å¼ç»™å‡ºï¼š<br>$$</p>
<p>$$<br>d &#x3D; \frac{|(C - A) \times \vec{d_1}|}{|\vec{d_1}|}.<br>$$</p>
<p>å¦‚æœå‡ºç°é€€åŒ–æƒ…å†µï¼ˆä¾‹å¦‚ A&#x3D;B æˆ– C&#x3D;Dï¼‰ï¼Œéœ€è¦è¿›ä¸€æ­¥åšç‰¹æ®Šå¤„ç†ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="comment">// baidu 14 2</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">point</span>&#123;</span><br><span class="line">	<span class="type">double</span> x, y, z;</span><br><span class="line">	<span class="built_in">point</span>(<span class="type">double</span> x1 = <span class="number">0</span>, <span class="type">double</span> y1 = <span class="number">0</span>, <span class="type">double</span> z1 = <span class="number">0</span>): <span class="built_in">x</span>(x1), <span class="built_in">y</span>(y1), <span class="built_in">z</span>(z1) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin.<span class="built_in">tie</span>(<span class="number">0</span>) -&gt; ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span> (t--)&#123;</span><br><span class="line">    	<span class="type">double</span> x1, x2, x3, x4, y1, y2, y3, y4, z1, z2, z3, z4;</span><br><span class="line">    	cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; z1 &gt;&gt; x2 &gt;&gt; y2 &gt;&gt; z2 &gt;&gt; x3 &gt;&gt; y3 &gt;&gt; z3 &gt;&gt; x4 &gt;&gt; y4 &gt;&gt; z4;</span><br><span class="line">    	point a = point&#123;x1, y1, z1&#125;, b = &#123;x2, y2, z2&#125;, c = &#123;x3, y3, z3&#125;, d = &#123;x4, y4, z4&#125;;</span><br><span class="line">    	<span class="comment">// å‘é‡å‡æ³•ï¼šè¿”å› b - a</span></span><br><span class="line">    	<span class="keyword">auto</span> vecSub = [](<span class="type">const</span> point &amp; a, <span class="type">const</span> point &amp; b) -&gt; point &#123;</span><br><span class="line">    		point temp = <span class="built_in">point</span>(b.x - a.x, b.y - a.y, b.z - a.z);</span><br><span class="line">    		<span class="keyword">return</span> temp;</span><br><span class="line">    	&#125;;</span><br><span class="line">    	<span class="comment">// å‘é‡å‰ä¹˜ (ä»…é€‚ç”¨äº 3D)</span></span><br><span class="line">    	<span class="keyword">auto</span> crossProduct = [](<span class="type">const</span> point &amp; a, <span class="type">const</span> point &amp; b) -&gt; point&#123;</span><br><span class="line">    		point temp = <span class="built_in">point</span>(a.y * b.z - a.z * b.y, a.z * b.x - a.x * b.z, a.x * b.y - a.y * b.x);</span><br><span class="line">    		<span class="keyword">return</span> temp;</span><br><span class="line">    	&#125;;</span><br><span class="line">    	<span class="comment">// å‘é‡ç‚¹ä¹˜</span></span><br><span class="line">    	<span class="keyword">auto</span> dotProduct = [](<span class="type">const</span> point &amp; a, <span class="type">const</span> point &amp; b) -&gt; <span class="type">double</span> &#123;</span><br><span class="line">    		<span class="keyword">return</span> a.x * b.x + a.y * b.y + a.z * b.z;</span><br><span class="line">    	&#125;;</span><br><span class="line">    	<span class="comment">// å‘é‡çš„æ¨¡é•¿</span></span><br><span class="line">    	<span class="keyword">auto</span> norm = [](<span class="type">const</span> point &amp; a) -&gt; <span class="type">double</span> &#123;</span><br><span class="line">    		<span class="keyword">return</span> <span class="built_in">sqrt</span>(a.x * a.x + a.y * a.y + a.z * a.z);</span><br><span class="line">    	&#125;;</span><br><span class="line">    	point d1 = <span class="built_in">vecSub</span>(a, b), d2 = <span class="built_in">vecSub</span>(c, d); </span><br><span class="line">    	point n = <span class="built_in">crossProduct</span>(d1, d2);</span><br><span class="line">    	<span class="type">double</span> norm_n = <span class="built_in">norm</span>(n);</span><br><span class="line">    	point AC = <span class="built_in">vecSub</span>(c, a);</span><br><span class="line">    	<span class="type">double</span> distance = <span class="number">0.0</span>;</span><br><span class="line">    	<span class="comment">// å¦‚æœ n != 0ï¼Œè¯´æ˜ä¸¤æ¡ç›´çº¿ä¸å¹³è¡Œ</span></span><br><span class="line">    	<span class="keyword">if</span>(<span class="built_in">fabs</span>(norm_n) &gt; <span class="number">1e-12</span>)&#123;</span><br><span class="line">    		<span class="comment">// æœ€çŸ­è·ç¦»å…¬å¼: |(C - A) Â· (d1 x d2)| / ||d1 x d2||</span></span><br><span class="line">    		distance = <span class="built_in">fabs</span>(<span class="built_in">dotProduct</span>(AC, n)) / norm_n;</span><br><span class="line">    	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    		<span class="comment">// n = 0ï¼Œè¯´æ˜ä¸¤æ¡ç›´çº¿å¹³è¡Œæˆ–å…±çº¿</span></span><br><span class="line">		    <span class="comment">// ä½¿ç”¨å¹³è¡Œç›´çº¿è·ç¦»å…¬å¼: ||(C - A) x d1|| / ||d1||</span></span><br><span class="line">		    point temp1 = <span class="built_in">crossProduct</span>(AC, d1);</span><br><span class="line">		    <span class="type">double</span> norm_temp1 = <span class="built_in">norm</span>(temp1), norm_d1 = <span class="built_in">norm</span>(d1);</span><br><span class="line">		    <span class="keyword">if</span>(<span class="built_in">fabs</span>(norm_d1) &lt; <span class="number">1e-12</span>)&#123;</span><br><span class="line">		    	<span class="comment">// è‹¥ d1Norm=0ï¼Œè¯´æ˜ Aã€B æ˜¯åŒä¸€ç‚¹ï¼›è‹¥ d2Norm=0ï¼ŒCã€D åŒç†ã€‚æ­¤æ—¶éœ€ç‰¹æ®Šå¤„ç†</span></span><br><span class="line">		    	<span class="type">double</span> norm_d2 = <span class="built_in">norm</span>(d2);</span><br><span class="line">		    	<span class="keyword">if</span>(<span class="built_in">fabs</span>(norm_d2) &lt; <span class="number">1e-12</span>)&#123;</span><br><span class="line">		    		<span class="comment">// ä¸¤æ¡â€œç›´çº¿â€éƒ½æ˜¯ç‚¹ï¼Œè®¡ç®— A åˆ° C çš„è·ç¦»</span></span><br><span class="line">		    		distance = <span class="built_in">sqrt</span>(<span class="built_in">pow</span>(a.x - c.x, <span class="number">2</span>) + <span class="built_in">pow</span>(a.y - c.y, <span class="number">2</span>) + <span class="built_in">pow</span>(a.z - c.z, <span class="number">2</span>));</span><br><span class="line">;		    	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		    		<span class="comment">// åªéœ€è®¡ç®—ç‚¹ A åˆ°ç›´çº¿ CD çš„è·ç¦»</span></span><br><span class="line">	                <span class="comment">// è·ç¦» = ||(C - A) x d2|| / ||d2||</span></span><br><span class="line">	                point temp2 = <span class="built_in">crossProduct</span>(AC, d2);</span><br><span class="line">	                distance = <span class="built_in">norm</span>(temp2) / <span class="built_in">norm</span>(d2);</span><br><span class="line">		    	&#125;</span><br><span class="line">		    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		    	distance = <span class="built_in">norm</span>(temp1) / <span class="built_in">norm</span>(d1);</span><br><span class="line">		    &#125;</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="built_in">printf</span>(<span class="string">&quot;%.3lf\n&quot;</span>, distance);</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="GCDæ•°é‡çº§"><a href="#GCDæ•°é‡çº§" class="headerlink" title="GCDæ•°é‡çº§"></a>GCDæ•°é‡çº§</h3><p>ä¸€ä¸ªæ•°ç»„çš„GCDå‰ç¼€ä¸åŒç§ç±»æ˜¯logçº§åˆ«çš„ï¼Œå¯é€šè¿‡æ­¤é¢˜è¿›è¡Œè¿›ä¸€æ­¥äº†è§£å’Œä½“ä¼š<a href="https://codeforces.com/gym/105386/problem/E">2024ICPCKunming</a></p>
<h3 id="ç‚¹åˆ°ç›´çº¿çš„è·ç¦»å…¬å¼"><a href="#ç‚¹åˆ°ç›´çº¿çš„è·ç¦»å…¬å¼" class="headerlink" title="ç‚¹åˆ°ç›´çº¿çš„è·ç¦»å…¬å¼"></a>ç‚¹åˆ°ç›´çº¿çš„è·ç¦»å…¬å¼</h3><p><strong>è®¾ï¼š</strong><br>$$<br>P(x_0,,y_0)<br>$$<br> ä¸ºå¹³é¢ä¸Šä¸€ç‚¹ï¼Œ<br>ç›´çº¿ L çš„æ–¹ç¨‹ä¸º<br>$$<br>A x + B y + C &#x3D; 0.<br>$$</p>
<p>åˆ™Påˆ°ç›´çº¿Lçš„è·ç¦»dä¸º<br>$$<br>d &#x3D; \frac{|,A x_0 + B y_0 + C,|}{\sqrt{A^2 + B^2}}.<br>$$</p>
<h3 id="éšæœºæ•°"><a href="#éšæœºæ•°" class="headerlink" title="éšæœºæ•°"></a>éšæœºæ•°</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">srand</span>((<span class="type">unsigned</span>)<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line">cout &lt;&lt; (<span class="built_in">rand</span>()) % <span class="number">17</span>;</span><br></pre></td></tr></table></figure>

<h3 id="å®Œå…¨å¹³æ–¹æ•°"><a href="#å®Œå…¨å¹³æ–¹æ•°" class="headerlink" title="å®Œå…¨å¹³æ–¹æ•°"></a>å®Œå…¨å¹³æ–¹æ•°</h3><p>ä¸€ä¸ªæ•°ä¸ºå®Œå…¨å¹³æ–¹æ•°å½“ä¸”ä»…å½“è¯¥åˆ†è§£åè¯¥æ•°æ‰€æœ‰è´¨å› æ•°ä¸ªæ•°å‡ä¸ºå¶æ•°</p>
<h3 id="éšæœºå“ˆå¸Œç¼–ç "><a href="#éšæœºå“ˆå¸Œç¼–ç " class="headerlink" title="éšæœºå“ˆå¸Œç¼–ç "></a>éšæœºå“ˆå¸Œç¼–ç </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">mt19937_64 <span class="title">rng</span><span class="params">(chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="type">int</span> a_hash = <span class="built_in">rng</span>();</span><br></pre></td></tr></table></figure>

<h3 id="æ‰¹é‡æ“ä½œ"><a href="#æ‰¹é‡æ“ä½œ" class="headerlink" title="æ‰¹é‡æ“ä½œ"></a>æ‰¹é‡æ“ä½œ</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a[<span class="number">5</span>];</span><br><span class="line"><span class="comment">// è¿ç»­å¡«å……</span></span><br><span class="line"><span class="built_in">iota</span>(a, a + <span class="number">5</span>, <span class="number">1</span>);  <span class="comment">// a = &#123;1, 2, 3, 4, 5&#125;</span></span><br><span class="line"><span class="comment">// é€‚åˆè®¾ç½®ä¸º0ã€-1ã€255ï¼ˆå³æ‰€æœ‰å­—èŠ‚ä¸€è‡´çš„å€¼ï¼‰</span></span><br><span class="line"><span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="built_in">sizeof</span>(a));  <span class="comment">// å°†æ•°ç»„ a ä¸­çš„æ‰€æœ‰å­—èŠ‚è®¾ä¸º 0</span></span><br><span class="line"><span class="comment">// æ”¯æŒæ‰€æœ‰åŸºç¡€ç±»å‹å’ŒSTLå®¹å™¨</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; v;</span><br><span class="line"><span class="built_in">fill</span>(a, a + <span class="number">5</span>, <span class="number">42</span>);  <span class="comment">// a = &#123;42, 42, 42, 42, 42&#125;</span></span><br><span class="line"><span class="built_in">fill</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), <span class="number">42</span>);</span><br></pre></td></tr></table></figure>

<h3 id="lower-bound-upper-bound"><a href="#lower-bound-upper-bound" class="headerlink" title="lower_bound &amp; upper_bound"></a>lower_bound &amp; upper_bound</h3><p>ower_bound( )å’Œupper_bound( )éƒ½æ˜¯åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ–¹æ³•åœ¨ä¸€ä¸ªæ’å¥½åºçš„æ•°ç»„ä¸­è¿›è¡ŒæŸ¥æ‰¾çš„ã€‚</p>
<p>åœ¨ä»å°åˆ°å¤§çš„æ’åºæ•°ç»„ä¸­ï¼Œ</p>
<ul>
<li><p><code>lower_bound(begin, end, value)</code></p>
<p>  è¿”å›<strong>ç¬¬ä¸€ä¸ª â‰¥ value çš„ä½ç½®</strong></p>
</li>
<li><p><code>upper_bound(begin, end, value)</code><br>  è¿”å›<strong>ç¬¬ä¸€ä¸ª &gt; value çš„ä½ç½®</strong></p>
</li>
</ul>
<p>åœ¨ä»å°åˆ°å¤§çš„æ’åºæ•°ç»„ä¸­ï¼Œ</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; v = &#123;<span class="number">-1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">15</span>, <span class="number">34</span>&#125;;</span><br><span class="line">    <span class="built_in">sort</span>(v.<span class="built_in">begin</span>() + <span class="number">1</span>, v.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> pos1 = <span class="built_in">lower_bound</span>(v.<span class="built_in">begin</span>() + <span class="number">1</span>, v.<span class="built_in">end</span>(), <span class="number">7</span>) - v.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="type">int</span> pos2 = <span class="built_in">upper_bound</span>(v.<span class="built_in">begin</span>() + <span class="number">1</span>, v.<span class="built_in">end</span>(), <span class="number">7</span>) - v.<span class="built_in">begin</span>();</span><br><span class="line">    cout &lt;&lt; pos1 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; v[pos1] &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; pos2 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; v[pos2] &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">sort</span>(v.<span class="built_in">begin</span>() + <span class="number">1</span>, v.<span class="built_in">end</span>(), <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;());</span><br><span class="line">    <span class="type">int</span> pos3 = <span class="built_in">lower_bound</span>(v.<span class="built_in">begin</span>() + <span class="number">1</span>, v.<span class="built_in">end</span>(), <span class="number">7</span>, <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;()) - v.<span class="built_in">begin</span>();</span><br><span class="line">    <span class="type">int</span> pos4 = <span class="built_in">upper_bound</span>(v.<span class="built_in">begin</span>() + <span class="number">1</span>, v.<span class="built_in">end</span>(), <span class="number">7</span>, <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;()) - v.<span class="built_in">begin</span>();</span><br><span class="line">    cout &lt;&lt; pos3 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; v[pos3] &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; pos4 &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; v[pos4] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æŠ˜å°ºå®šç†"><a href="#æŠ˜å°ºå®šç†" class="headerlink" title="æŠ˜å°ºå®šç†"></a>æŠ˜å°ºå®šç†</h3><p>ä¸€å †æœ‰å„è‡ªé•¿åº¦($a_{1},a_{2},a_{3} \dots$)æœ¨æ£èƒ½å¦è¿æ¥åœ¨ä¸¤ä¸ªç‚¹ä¸Šï¼Œå–å†³äºæ˜¯å¦$L_{\min}\le D\le L_{\max}$,å…¶ä¸­ï¼Œ$L_{\max} &#x3D; \sum_{i &#x3D; 1}^{n}a_{i} $ ,$L_{\min} &#x3D; max(0, 2 * a_{\max} - L_{\max})$ï¼ŒDä¸ºä¸¤ç‚¹é—´è·ç¦»</p>
<h3 id="ä¸¤ä¸¤ç»å¯¹å€¼æ±‚å’Œ"><a href="#ä¸¤ä¸¤ç»å¯¹å€¼æ±‚å’Œ" class="headerlink" title="ä¸¤ä¸¤ç»å¯¹å€¼æ±‚å’Œ"></a>ä¸¤ä¸¤ç»å¯¹å€¼æ±‚å’Œ</h3><p>å½“ä½ æŠŠä¸€ç»„æ•°æ’åºåï¼Œå¯¹æ‰€æœ‰ã€Œä¸¤ä¸¤å·®çš„ç»å¯¹å€¼ä¹‹å’Œã€$\sum_{0\le p&lt;q\le n} |a_q - a_p|$æœ‰ä¸€ä¸ªç»å…¸ç»“è®ºï¼š</p>
<p>$ \sum_{0\le p&lt;q\le n} (a_q - a_p)  &#x3D; \sum_{k&#x3D;0}^n a_k \bigl(\underbrace{k}<em>{\text{æ¯”å®ƒå°çš„æ•°å¯¹}} - \underbrace{(n-k)}</em>{\text{æ¯”å®ƒå¤§çš„æ•°å¯¹}}\bigr).$</p>
<p>è¿™æ˜¯å› ä¸ºï¼š</p>
<ul>
<li><p>å¯¹äºå›ºå®šçš„$a_k$ï¼Œå®ƒä½œä¸ºâ€œå³ç«¯â€ $q_{q}$ çš„æ—¶å€™ï¼Œä¼šå’Œå‰é¢æ‰€æœ‰ k ä¸ªæ›´å°çš„æ•° $a_0,\dots,a_{k-1}$ ç›¸å‡ï¼Œç´¯è®¡è´¡çŒ®</p>
<p>  $\displaystyle +,a_k\times k$ã€‚</p>
</li>
<li><p>åŒæ—¶å®ƒä¹Ÿä¼šä½œä¸ºâ€œå·¦ç«¯â€ $a_p$ è¢«åé¢æ‰€æœ‰ (nâˆ’k) ä¸ªæ›´å¤§çš„æ•° $a_{k+1},\dots,a_n$ç›¸å‡ï¼Œè´¡çŒ®</p>
<p>  $-,a_k\times (n - k)$ã€‚</p>
</li>
<li><p>åˆå¹¶èµ·æ¥ï¼Œå°±æ˜¯</p>
<p>  $a_k(kâˆ’(nâˆ’k))&#x3D;a_k(2kâˆ’n).$</p>
</li>
</ul>
<p>æ³¨æ„è¿™é‡Œä¸éœ€è¦å†å†™ç»å¯¹å€¼äº†ï¼Œå› ä¸ºæ’åºä¿è¯äº†â€œåè€…å‡å‰è€…â€æ€»æ˜¯éè´Ÿçš„ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://blog.csdn.net/tengfei461807914/article/details/52203202">å­—ç¬¦ä¸² CSDN</a></p>
<p><a href="https://github.com/algorithmzuo/algorithm-journey">å·¦ç¨‹äº‘</a></p>
<p><a href="https://blog.csdn.net/duiwangxiaomi/article/details/104288351">ä¸‰è§’å½¢é¢ç§¯</a></p>
<p><a href="https://blog.csdn.net/qq_40160605/article/details/80150252">lower_bound &amp; upper_bound</a></p>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>è´´èº«ä¿é•–</title>
    <url>/%E8%B4%B4%E8%BA%AB%E4%BF%9D%E9%95%96.html</url>
    <content><![CDATA[<p>æœ€æƒ³æ€æ­»ä½ ï¼Œæœ€æƒ³ä¿æŠ¤ä½ </p>
<span id="more"></span>

<p>æœ¬æ–‡çš„ä¸»è§’å¤§å«-é‚¦å¾·ï¼Œä¸€åå†›äººã€ä¸€åè­¦å¯Ÿã€ä¸€ä½ä¸ˆå¤«ã€ä¸€ä½çˆ¶äº²ï¼Œåœ¨å‰§ä¸­ä¸€å¼€å§‹å°±å±•ç¤ºäº†å¼‚äºå¸¸äººçš„æ´å¯ŸåŠ›ä¸å…±æƒ…åŠ›ï¼Œä»¥åŠåº”å¯¹çªå‘æƒ…å†µçš„ä¸“ä¸šç´ å…»ï¼Œæˆ‘æ·±æ·±åœ°è¢«è¿™ä¸€ä½æŸ”æƒ…ç¡¬æ±‰æ‰“åŠ¨ã€‚ç„¶è€Œï¼Œè¿™æ ·ä¸€ä½å¯ä»¥è¯´æ˜¯é€šæƒ…è¾¾ç†çš„äººï¼Œå±…ç„¶å’Œå¦»å­å¤„äºåˆ†å±…çŠ¶æ€ï¼Œè¿™ä¹Ÿè®©æˆ‘å¯¹é‚¦å¾·çš„èº«ä¸–ç»å†å……æ»¡äº†å¥½å¥‡ï¼Œä»–çœ‹èµ·æ¥å­¤ç‹¬ï¼Œå¿§éƒï¼Œç”šè‡³è¿˜æœ‰æŠ‘éƒç—‡ï¼Œå…¶å®è¿™å¹¶ä¸ä¸å…¶å¤–åœ¨çš„æ²‰ç€å½¢è±¡å†²çªï¼Œä»–çš„å¤–åœ¨å…¶å®ä¹Ÿæ˜¯çœŸå®çš„ä»–è‡ªå·±ï¼Œå› ä¸ºæœ‰æ—¶å€™æˆ‘ä»¬å®æ„¿çœŸå®åœ°é¢å¯¹ä»–äººï¼Œä¹Ÿä¸æ„¿å¦ç™½å¯¹å¾…è‡ªå·±ã€‚å¤§å«é‚¦å¾·çš„æ•…äº‹ä¹Ÿæ˜¯ä¸€åè´´èº«ä¿é•–çš„æ•…äº‹ï¼Œå› ä¸ºä»–çš„è‹±å‹‡ä¸¾åŠ¨éœ‡æƒŠå…¨è‹±ï¼Œå„ç•Œéƒ½é«˜åº¦å…³æ³¨è¿™æ ·ä¸€ä½èƒ½å¤Ÿè¯´æœè‡ªæ€ç‚¸å¼¹æºå¸¦è€…ä»¥ä¿æŠ¤å…¨åˆ—è½¦äººçš„è­¦å¯Ÿï¼Œå°¤å…¶æ˜¯æ”¿åºœé«˜å±‚ï¼Œå› æ­¤ï¼Œä»–è¢«æˆäºˆäº†ä¸€é¡¹ç‰¹æ®Šçš„ä»»åŠ¡ï¼Œæˆä¸ºå†…åŠ¡å¤§è‡£çš„è´´èº«ä¿é•–ï¼Œè€ŒçœŸæ­£çš„å¤§å«é‚¦å¾·ï¼Œå¼€å§‹é€æ¸æµ®ç°ã€‚</p>
<p>æœ€è®¨åŒå†…åŠ¡å¤§è‡£çš„äººåè€Œæˆä¸ºäº†å†…åŠ¡å¤§è‡£èº«è¾¹æœ€äº²è¿‘çš„äººã€‚å¤§å«é‚¦å¾·ä¸å†…åŠ¡å¤§è‡£æœ‰ç“œè‘›å—ï¼Œå½“ç„¶ï¼Œè°éƒ½ä¸ä¼šæ— ç¼˜æ— æ•…è®¨åŒä¸€ä¸ªç´ ä¸ç›¸è¯†çš„äººï¼Œå‰é¢æåˆ°å¤§å«é‚¦å¾·æ˜¯ä¸€åå†›äººï¼Œæ²¡é”™ï¼Œä»–æ›¾æ˜¯ä¸€åå†›äººï¼Œè¢«æ´¾å¾€é˜¿å¯Œæ±—å‚åŠ éæ­£ä¹‰çš„æˆ˜äº‰ï¼Œä¹Ÿå› æ­¤å¤§å«é‚¦å¾·å¤±å»äº†å¾ˆå¤šä½äº²å¯†çš„å…„å¼Ÿï¼Œè‡ªå·±ä¹Ÿå·®ç‚¹æ®’å‘½ï¼Œæœ€é‡è¦çš„æ˜¯å¤§å«é‚¦å¾·æ‚£ä¸Šäº†<a href="https://zh.wikipedia.org/wiki/%E5%89%B5%E5%82%B7%E5%BE%8C%E5%A3%93%E5%8A%9B%E7%97%87">åˆ›ä¼¤ååº”æ¿€éšœç¢</a>ï¼Œè€Œè¿™äº›å†›äººæœ‰ä¸€ä¸ªå…±åŒçš„æ•Œäººï¼Œé‚£å°±æ˜¯é‚£äº›è§†ä»–ä»¬ç”Ÿå‘½å¦‚è‡ªå·±æƒåŠ›ç‰ºç‰²å“çš„ã€ä¸æ„¿æ„äº²è‡ªç•™ä¸€æ»´è¡€çš„å†·è¡€çš„åŠ¿åŠ›çš„æ”¿å®¢ã€‚è€Œä¸å†…åŠ¡å¤§è‡£ç›¸é‡çš„å‰æœŸï¼Œå¥¹ä¸å‡ºæ„å¤–çš„ä½“ç°äº†å‡ºäº†æ‰€æœ‰ä»¤å¤§å«é‚¦å¾·å’Œä»–æˆ˜å‹æ‰€è®¨åŒçš„ç‰¹å¾ï¼Œå¹¶ä¸”å½“å¤§å«é‚¦å¾·äº²è‡ªé—®å¥¹æ‰€ä½œè¨€è®ºæ˜¯å¦å±å®æ—¶ï¼Œå†…åŠ¡å¤§è‡£å´è¯´ä¸ºäº†å¤§å±€å¥¹å¿…é¡»æœ‰æ‰€æŠ‰æ‹©ï¼Œè¿™å½»åº•æ¿€æ€’äº†å¤§å«é‚¦å¾·ã€‚å¤§å«é‚¦å¾·æœ‰æ— æ•°æ¬¡æƒ³äº²è‡ªäº†è§£è¿™ä½ä¸çŸ¥æ‚”æ”¹çš„æ”¿å®¢ï¼Œä½†æ˜¯å´åˆå‡ºäºèŒä¸šé“å¾·æ— æ•°æ¬¡æ‹¯æ•‘å†…åŠ¡å¤§è‡£ï¼Œç”šè‡³åœ¨ä¸€åœºæš—æ€ä¸­ï¼Œå¤§å«ä¹Ÿâ€œæ€æ­»â€äº†èº«ä¸ºæˆ˜å‹çš„æ€æ‰‹ï¼Œè€Œé‚£åè‡ªæ€çš„æˆ˜å‹ï¼Œåœ¨æŸç§æ„ä¹‰ä¸Šï¼Œå°†æœªå®Œæˆçš„ä½¿å‘½åˆåŠ é‡åœ¨å¤§å«é‚¦å¾·èº«ä¸Šã€‚</p>
<p>ä¹Ÿè®¸æ˜¯ä¸€æ¬¡æ¬¡çš„ç”Ÿæ­»ä¸å…±ï¼Œåˆæˆ–è€…æ˜¯å­¤ç‹¬çµé­‚çš„ç›¸é‡ï¼Œå†…åŠ¡å¤§è‡£å’Œå¤§å«é‚¦å¾·åœ¨åŠ«åä½™ç”Ÿæ—¶ï¼Œç”¨èº«ä½“æŠšæ…°æƒŠé­‚ã€‚èµ·åˆæˆ‘åªæ˜¯è®¤ä¸ºå†…åŠ¡å¤§è‡£ä¸ºäº†è®©å¤§å«é‚¦å¾·å…¨å¿ƒå…¨æ„çš„ä¿æŠ¤è‡ªå·±äºæ˜¯ä¸Šæ¼”äº†ç¾äººè®¡ï¼ŒåŒæ—¶ä¹Ÿè®¤ä¸ºå¤§å«é‚¦å¾·ä¸ºäº†æ›´é è¿‘å†…åŠ¡å¤§è‡£é…åˆäº†è¿™åœºæ¼”å‡ºï¼Œä½†å†…åŠ¡å¤§è‡£å¯¹å¤§å«é‚¦å¾·çš„å­©å­ä»¬çš„å¸®åŠ©ï¼Œä»¥åŠå¤§å«é‚¦å¾·è™½å¸®åŠ©è‡ªå·±çš„ç›´å±ä¸Šå¸åˆ‡ç¡®å†…åŠ¡å¤§è‡£çš„æƒ…æŠ¥å´è£…ä½œä¸€æ— æ‰€è·ï¼Œè¿˜æœ‰å†…åŠ¡å¤§è‡£åœ¨æ¼”è®²æ—¶è¢«ç‚¸å¼¹è¢­å‡»æ®’å‘½åå¤§å«é‚¦å¾·çš„æ„¤æ€’ï¼Œéƒ½å‘æˆ‘ä¼ è¾¾å‡ºä¸€ä¸ªè®¯å·ï¼Œé‚£å°±æ˜¯ï¼Œä»–ä»¬åœ¨æŸç§æ„ä¹‰ä¸Šè¢«è¿æ¥åœ¨äº†ä¸€èµ·ï¼Œæ˜¯é‚£ç§äº¦æ•Œäº¦å‹çš„è€äººå¯»å‘³ï¼Œå› ä¸ºå¤§å«é‚¦å¾·è¿˜çˆ±ç€è‡ªå·±çš„åˆ†å±…å¦»å­ï¼Œä¸”æˆ‘ä¹Ÿå¾ˆéš¾æ¥å—è¿™ç§æç«¯æƒ…å½¢ä¸‹çš„çˆ±æƒ…ï¼Œå› æ­¤æˆ‘è®¤ä¸ºè¿™ä¸ç®—å¾—ä¸Šæ˜¯çˆ±æƒ…ï¼Œè€Œæ˜¯æ›´å€¾å‘äºå‰æ–‡æ‰€è¯´çš„ç›¸äº’æŠšæ…°ï¼Œå› ä¸ºä»–ä»¬ä¸€ä¸ªå¤„äºPTSDçš„ç¬¼ç½©ï¼Œä¸€ä¸ªç«™åœ¨æ”¿ç•Œçš„é£å£æµªå°–ï¼Œä¸¤äººå› ä¸ºä¸åŒçš„åŸå› ï¼Œéšæ—¶éƒ½æœ‰å¯èƒ½å¤±å»ç”Ÿå‘½ã€‚</p>
<p>åœ¨å†…åŠ¡å¤§è‡£æ­»åï¼Œæ•´ä¸ªå‰§é›†åªå‰©ä¸‹å¿«èŠ‚å¥çš„è¿½å‡¶ï¼Œæ‰“æ–—ä¸æ¨ç†åè½¬ï¼Œè¿™ä¹Ÿæ˜¯çœ‹çš„æœ€çˆ½çš„ä¸€éƒ¨åˆ†ï¼Œç„¶æˆ‘è¿‘ä¹å¿˜è®°äº†å¤–ç•Œæ—¶é—´çš„æµé€ï¼Œä½†èƒ½å›å¿†èµ·æ¥çš„æ‰€å‰©æ— å‡ ã€‚</p>
<p>åœ¨å¿˜æ‰ä¹‹å‰ï¼Œæˆ‘å¿…é¡»é¦–å…ˆæåŠæˆ‘å½±å“æœ€æ·±åˆ»çš„å‡ ä¸ªè§’è‰²ï¼Œåˆæˆ–è€…è¯´ï¼Œå‰§é›†ä¸­å¯¹æ¯ä¸ªäººç‰©å‡ ä¹éƒ½æœ‰ä¸¤é¢å¡‘é€ ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æœ€èƒ½å¼•èµ·å…±é¸£çš„åœ°æ–¹ï¼Œæ¯ä¸ªäººæ˜¯å–„ä¹Ÿæ˜¯æ¶ï¼Œæœ‰å†²åŠ¨ä¹Ÿæœ‰å†·é™ï¼Œæˆ‘çœ‹åˆ°äº†æ¯ä¸ªè§’è‰²çš„ç‹¬æœ‰é­…åŠ›ï¼Œè­¦å¯Ÿã€ä¼´ä¾£ã€åŒäº‹ã€æœ‹å‹ã€ä¸Šçº§ã€ä¸Šçº§ä¹‹ä¸Šçº§ã€‚è€Œå¤§å«é‚¦å¾·ä¹‹æ‰€æ‚£äº†PTSDè¿˜èƒ½ç»§ç»­å½“è­¦å¯Ÿç”šè‡³æ˜¯è´´èº«ä¿é•–ï¼Œæ˜¯å› ä¸ºä»–å¯¹åˆ«äººéšç’äº†ç—…æƒ…ï¼Œåªæœ‰æœ€äº²è¿‘çš„äººï¼Œä¹Ÿå°±æ˜¯æˆ˜å‹å’Œå¦»å­çŸ¥é“ï¼Œè€Œå½“æœ€åå¤§å«é‚¦å¾·æ”¾ä¸‹äº†ä¹”è£…çš„åšå¼ºï¼Œå‘å¿ƒç†åŒ»ç”Ÿè¢’éœ²è‡ªå·±çš„è„†å¼±åï¼Œæˆ‘ä»¬ä¾æ—§èƒ½å¤Ÿè¢«é‡å½’äºå¥½çš„å¤§å«é‚¦å¾·å’Œå…¶å¦»å­è–‡çªçš„å¹¸ç¦ä¸€å®¶æ‰€æ¸©æš–ã€‚æ˜¯å•Šï¼ŒåŸæ¥æ¥å—æ²»ç–—ï¼Œæ‰“å¼€å¿ƒæ‰‰å°±èƒ½å›å½’æ­£å¸¸ç”Ÿæ´»ï¼Œå°±å‰©æ„Ÿå—æœ€å¹³å‡¡çš„å¿«ä¹ï¼Œä½†æ˜¯ï¼Œæœ‰äº›æ—¶å€™ï¼Œéš¾çš„ä¸æ˜¯æ²»ç–—ï¼Œè€Œæ˜¯æ¥å—æ²»ç–—ï¼Œéš¾çš„ä¸æ˜¯ç°çŠ¶ï¼Œè€Œæ˜¯æ¥å—ç°çŠ¶ï¼Œæˆ‘æƒ³ï¼Œä¸å‘æœ‹å‹æ©ç›–ï¼Œä¸å¯¹å®¶äººä¼ªè£…ï¼ŒçœŸå®çš„è¡¨è¾¾è‡ªå·±ï¼Œè¡¨è¾¾è¯‰æ±‚ï¼Œä¸è¦å®³æ€•çª˜è¿«ï¼Œæ‡‚ä½ çš„äººä¸ä¼šè®©ä½ éš¾å ªï¼Œæ‰€è°“æ‡‚ä½ çš„äººæ— éœ€å¤šè¨€ï¼Œä¸æ‡‚çš„äººä½•å¿…å¤šè¨€ï¼Œæ¥å—ä½ çœŸå®å‘ä¸–ç•Œè¡¨è¾¾åçš„æ‰€æœ‰ç»“æœã€‚</p>
]]></content>
      <categories>
        <category>Daily</category>
      </categories>
      <tags>
        <tag>å‰§</tag>
      </tags>
  </entry>
</search>
